(this["webpackJsonpscorch-whiplash"]=this["webpackJsonpscorch-whiplash"]||[]).push([[0],{11:function(e,t,n){e.exports={score:"pairings_score__1yn8S",confirmed:"pairings_confirmed__3JrmJ",finished:"pairings_finished__3Tinj",live:"pairings_live__1ycFn",watchLive:"pairings_watchLive__2cnys",registered:"pairings_registered__Q2QET",scheduled:"pairings_scheduled__1GzqC",pending:"pairings_pending__3TFsg",aborted:"pairings_aborted__pZaOi",pairingRound:"pairings_pairingRound__2Sz8j",roundSelected:"pairings_roundSelected__15kTz",nullRound:"pairings_nullRound__2lhF2",inner:"pairings_inner__hb8sB",subheader:"pairings_subheader__tOuDn",pieMatrix:"pairings_pieMatrix__2pEq7",pie:"pairings_pie__3vifK",statusPicker:"pairings_statusPicker__1Frr2",timezone:"pairings_timezone__2ajYa",download:"pairings_download__gZx8B",jumpTo:"pairings_jumpTo__1i8OA",expandAll:"pairings_expandAll__2WE6V",searchBar:"pairings_searchBar__r83HS",description:"pairings_description__4Fd7Z",buttonList:"pairings_buttonList__2r4XD",flag:"pairings_flag__21EM_",join:"pairings_join__YK3fM",pool:"pairings_pool__3ObdH",table:"pairings_table__RLFKq",watchButton:"pairings_watchButton__1ksVQ"}},116:function(e,t,n){e.exports={tournament_info:"tournamentinfo_tournament_info__3OozG",tieBreakLink:"tournamentinfo_tieBreakLink__30hG_"}},117:function(e,t,n){e.exports={matchUp:"playerline_matchUp__Jb9ni",white:"playerline_white__2Dg_3",black:"playerline_black__yf2p1",flag:"playerline_flag__1Wzhr",playerInfo:"playerline_playerInfo__2wd6f"}},118:function(e,t,n){e.exports={tableAnnounce:"tournaments_tableAnnounce__2MLQm",rowLink:"tournaments_rowLink__1OayQ",tournamentLink:"tournaments_tournamentLink__3mGz7"}},12:function(e,t,n){e.exports={canvas:"login_canvas__1qibW",column:"login_column__14Kgt",foreground:"login_foreground__2Cqo8",frame:"login_frame__3ssmQ",loginSection:"login_loginSection__1BBMn",forgottenContainer:"login_forgottenContainer__2yR4y","fade-in":"login_fade-in__3QsyL",forgotten:"login_forgotten__3VFQz",form:"login_form__1ieaR",input:"login_input__3ze1R",back:"login_back__1oP5T",text:"login_text__WDlWF",submit:"login_submit__2qxJT",flip:"login_flip__2KG2q",loginButton:"login_loginButton__1XTHr",registerButton:"login_registerButton__1vv8o",loginForeground:"login_loginForeground__lnGgY",registerForeground:"login_registerForeground__3D6jX",messageBar:"login_messageBar__6TM4O",logo:"login_logo__UJ7Qe",staticLogo:"login_staticLogo__Z0jZQ",loadingGif:"login_loadingGif__WfBMg",crownOutline:"login_crownOutline__2mObX",loadingLine:"login_loadingLine__1iXG0","grow-right":"login_grow-right__2HxVz"}},152:function(e,t,n){e.exports={container:"fullscreen_container__2o3cX",fullScreenHeader:"fullscreen_fullScreenHeader__8hyCZ",stage:"fullscreen_stage__2cH6J"}},153:function(e,t,n){e.exports={cover:"embed_cover__354uy",canvas:"embed_canvas__3b5lE",brand:"embed_brand__2tsAG"}},17:function(e,t,n){e.exports={container:"home_container__3m-V0",section:"home_section__J4Pas",title:"home_title__2zCUD",wrapper:"home_wrapper__1kdtX",col1:"home_col1__1cCiq",col2:"home_col2__1BVR0",announcements:"home_announcements__4cufj",tournaments:"home_tournaments__1q8_O",tableAnnounce:"home_tableAnnounce__dGzDK",yourTournaments:"home_yourTournaments__1aqpu",sectionHeader:"home_sectionHeader__1zVNc",live:"home_live__2gArQ",sizer:"home_sizer__3Z1C7",notificationRow:"home_notificationRow__1q_nU",expando:"home_expando__2-dbm",rowLink:"home_rowLink__1N7Sr",tournamentLink:"home_tournamentLink__1SOA6",iconLink:"home_iconLink__1RN-Z",connected:"home_connected__3l58F",disconnected:"home_disconnected__3n6S0",logout:"home_logout__12JDk",info:"home_info__13MIt",buttons:"home_buttons__3u2f7",row:"home_row__Wfflj",details:"home_details___qRnM",account:"home_account__15sn1",sync:"home_sync__175YB",new:"home_new__2kEVt"}},20:function(e,t,n){e.exports={container:"profile_container__1K7NH",title:"profile_title__2BZxm",grid:"profile_grid__3AVqG",details:"profile_details__T2CsB",flag:"profile_flag__3RCpw",info:"profile_info__3FtOw",contact:"profile_contact__3SQSq",notes:"profile_notes__1GtWG",background:"profile_background__2pk8i",stage:"profile_stage__2kP0B",teamStage:"profile_teamStage__2cDka",midButtons:"profile_midButtons__3oJbm",box:"profile_box__2QL9b",name:"profile_name__bRkcf",history:"profile_history__22CVZ",resultsRow:"profile_resultsRow__4zleX",small:"profile_small__10h6z",fieldBox:"profile_fieldBox__1gEdr",subtitle:"profile_subtitle__2fxvS",scores:"profile_scores__ByD8u",row:"profile_row__aUfgI",key:"profile_key__mRxor",value:"profile_value__vcPiH",action:"profile_action__2ARI5",inactive:"profile_inactive__2tSAV"}},21:function(e,t,n){e.exports={nav:"nav_nav__1gFey",stage:"nav_stage__3GKOi",infoBox:"nav_infoBox__22EbU",linkButtons:"nav_linkButtons__2ee5L",profilePicture:"nav_profilePicture__PVvqr",nameContainer:"nav_nameContainer__17v30",name:"nav_name__1A6FS",profileWrapper:"nav_profileWrapper__33UPj",live:"nav_live__3qmpe",preload:"nav_preload__vbtMr",liveRing:"nav_liveRing__1leOV",rotate:"nav_rotate__3MBnR",livePlay:"nav_livePlay__1hJbH",extra:"nav_extra__nwYhM",rules:"nav_rules__3Fitx",website:"nav_website__3Z3po",buttonContainer:"nav_buttonContainer__2BU-r",linkButton:"nav_linkButton__1saVW",defaultProfilePicture:"nav_defaultProfilePicture__3cROn",tieBreakLink:"nav_tieBreakLink__1UyPD",tieBreakSection:"nav_tieBreakSection__2Qbwx",visible:"nav_visible__1OKR0",tieBreakContainer:"nav_tieBreakContainer__2hPD_",tieBreakTitle:"nav_tieBreakTitle__1guQ_",tieBreaks:"nav_tieBreaks__qpKIN","slide-in-from-left":"nav_slide-in-from-left__1m3c0"}},217:function(e,t,n){e.exports={sticky:"sticky_sticky__kzuz5",absolute:"sticky_absolute__3TZI6"}},219:function(e,t,n){},22:function(e,t,n){e.exports={fixed:"rotating_fixed__1mKEH",backContainer:"rotating_backContainer__PRAiB","fade-in":"rotating_fade-in__2DxCb",parent:"rotating_parent__2hVEL",background:"rotating_background__1qBGX",logoBackground:"rotating_logoBackground__Sunzn",faded:"rotating_faded__pUsO6",lighter:"rotating_lighter__1PJ2J",rotator:"rotating_rotator__1DVLb",stage:"rotating_stage__2scv6",selection:"rotating_selection__2iSsC",child:"rotating_child__1UA2D",curr:"rotating_curr__2YxLv","from-right":"rotating_from-right__1DmXW",description:"rotating_description__2VU0a",title:"rotating_title__1mJSD",palette:"rotating_palette__1UniL",box:"rotating_box__RNGV_",new:"rotating_new__2i9lb",frame:"rotating_frame__LIoJX",logo:"rotating_logo__2NJ_4",dot:"rotating_dot__25TPv",dotSelected:"rotating_dotSelected__1f7uq"}},23:function(e,t,n){e.exports={container:"knockout_container__3GFEr",stage:"knockout_stage__2PYEg",scroll:"knockout_scroll__2Lk6I",left:"knockout_left__3kShv",right:"knockout_right__1EZg2",columns:"knockout_columns__1HnTZ",roundNumber:"knockout_roundNumber__H8JgI",column:"knockout_column__1qlCt",matchUp:"knockout_matchUp__3Jiow",spacer:"knockout_spacer__XYmSq",poolTitle:"knockout_poolTitle__2C7J0",visible:"knockout_visible__3GoHg",white:"knockout_white__GNLcm",black:"knockout_black__3bxjQ",playerInfo:"knockout_playerInfo__1lJHe",score:"knockout_score__388e2",win:"knockout_win__GFz0e",winner:"knockout_winner__2ItfJ",all:"knockout_all__1IdMR",connectors:"knockout_connectors__3QXK_",line:"knockout_line__3Bc0o"}},24:function(e,t,n){e.exports={info:"info_info__2j2R2",small:"info_small__cklkw",cols:"info_cols__1yYqW",flag:"info_flag__1H1VP",name:"info_name__1t72C",bio:"info_bio__3T2uc",details:"info_details__pv7Xk",detail:"info_detail__GcdDt",title:"info_title__lFhDd",buttons:"info_buttons__3NQRo",memberBox:"info_memberBox__3Qob9",more:"info_more__8BqKY",container:"info_container__2WVXM",section:"info_section__1Wa9L",sectionHeader:"info_sectionHeader__1p1UY",expando:"info_expando__26_ZT",status:"info_status__334R_",online:"info_online__1Pz8P"}},25:function(e,t,n){e.exports={container:"crosstable_container__1iD5w",th:"crosstable_th__Q7ggx",round:"crosstable_round__2z99m",pool:"crosstable_pool__nPUSS",table:"crosstable_table__1xVB_",headerCell:"crosstable_headerCell__1MXgj",moreHidden:"crosstable_moreHidden__3RsC0",tr:"crosstable_tr__1OMcp",footer:"crosstable_footer__1NSZx",col2:"crosstable_col2__1bcMr",button:"crosstable_button__2lxn7",searchBar:"crosstable_searchBar__2QHjR",searchBarDiv:"crosstable_searchBarDiv__BkgHE"}},28:function(e,t,n){e.exports={draggable:"components_draggable__6I6m8","move-to-corner":"components_move-to-corner__2IMAP",shade:"components_shade__3PndK",section:"components_section__2oPYC","vertical-split":"components_vertical-split__17qtW",lightBoxContent:"components_lightBoxContent__1phCW",lightBoxTitle:"components_lightBoxTitle__b48fv",error:"components_error__3Plio",dateTime:"components_dateTime__2VtC6",footer:"components_footer__27uos",resolve:"components_resolve__1X_KN",reject:"components_reject__3ymMO",divide:"components_divide__37rpK",collapsed:"components_collapsed__1YIKM"}},284:function(e,t,n){e.exports=n.p+"static/media/watch.ddf443c3.svg"},285:function(e,t,n){e.exports=n.p+"static/media/twitch.e1f7813a.svg"},286:function(e,t,n){e.exports=n.p+"static/media/youtube.46bc6904.svg"},287:function(e,t,n){e.exports=n.p+"static/media/chessCom.228db28e.svg"},288:function(e,t,n){e.exports=n.p+"static/media/lichess.9ff6e305.svg"},289:function(e,t,n){e.exports=n.p+"static/media/ecf.68e0df94.svg"},29:function(e,t,n){e.exports={header:"header_header__3AnVH",small:"header_small__1FEFj",buttonContainer:"header_buttonContainer__2NGSo",button:"header_button__3Dvcf",native:"header_native__2zjQ6",nameWrapper:"header_nameWrapper__3xkIw",logoWrapper:"header_logoWrapper__1SDiB",logo:"header_logo__2gzAt",headerButton:"header_headerButton__nbL-0",selected:"header_selected__3ZcvA",inactive:"header_inactive__2B8ig",title:"header_title__1aYsG",label:"header_label__3IhFN",installer:"header_installer__3SXUE",icons:"header_icons__2zG98",notifications:"header_notifications__27OsP",mobileMenu:"header_mobileMenu__1JasY",menuButton:"header_menuButton__1iKql",unseen:"header_unseen__z38Fn",inlineNotifTitle:"header_inlineNotifTitle__2-Ono",inlineNotif:"header_inlineNotif__2g-5s",unseenN:"header_unseenN__mphpe",inlineNotifContent:"header_inlineNotifContent__1dD3f",inlineNotifDate:"header_inlineNotifDate__1useH"}},290:function(e,t,n){e.exports=n.p+"static/media/fide.03cb669d.svg"},291:function(e,t,n){e.exports=n.p+"static/media/zoom.83081771.svg"},30:function(e,t,n){e.exports={container:"chesscom_container__AGg5n",results:"chesscom_results__xtTqO",score:"chesscom_score__wGavR",wrapper:"chesscom_wrapper__3vwwR",boardlabel:"chesscom_boardlabel__E2EmQ",boardLabel:"chesscom_boardLabel__1N2Qy",gameViewWrapper:"chesscom_gameViewWrapper__T9V4M",board:"chesscom_board__3LGEQ","fade-in":"chesscom_fade-in__15-gn",row:"chesscom_row__17flm",square:"chesscom_square___JdY5",W:"chesscom_W__1Kbfl",B:"chesscom_B__misXA",null:"chesscom_null__13qcL",active:"chesscom_active__1tUDT",loading:"chesscom_loading__2Ayrk",spin:"chesscom_spin__1lrfp",button:"chesscom_button__3PlYs"}},31:function(e,t,n){e.exports={fireworksSection:"results_fireworksSection__2qvrE",resultsScreen:"results_resultsScreen__KIKHg",place:"results_place__3ZhVh",position:"results_position__3Onk_",teamName:"results_teamName__2Pxe5",table:"results_table__1keWa",key:"results_key__3XFuQ",standingsButton:"results_standingsButton__36hZx",value:"results_value__3Qasx",flag:"results_flag__2-WYI",links:"results_links__2vHBV"}},316:function(e,t,n){},34:function(e,t,n){e.exports={container:"streams_container__3OSGu",streamHeader:"streams_streamHeader__2u9wC",popOut:"streams_popOut__20aUz",streamContainer:"streams_streamContainer__28Cw5",player:"streams_player__1u4zp",twitchChat:"streams_twitchChat__2j9X5","move-to-corner":"streams_move-to-corner__1zn6f",chat:"streams_chat__3ysIe",footer:"streams_footer__NYfmO",twitchPlayer:"streams_twitchPlayer__ZwLdZ"}},35:function(e,t,n){e.exports={floated:"floated_floated__118Mz",container:"floated_container__2tXHo",left:"floated_left__3BIxl","fly-in-from-left":"floated_fly-in-from-left__tlTt0",bottom:"floated_bottom__2l4p2",top:"floated_top__1EBos",right:"floated_right__lbqAX","fly-in-from-right":"floated_fly-in-from-right__2J-y2",linkSwitcher:"floated_linkSwitcher__3R5fI",wrapper:"floated_wrapper__PNN0c",formWrapper:"floated_formWrapper__1yAc7",dot:"floated_dot__1hSH3",link:"floated_link__3_GJM",dotExpando:"floated_dotExpando__3Wf4b",expando:"floated_expando__MiW_b",title:"floated_title__37QlP",input:"floated_input__3iheT",buttons:"floated_buttons__uLTYZ",viewTournament:"floated_viewTournament__10Rw-"}},359:function(e){e.exports=JSON.parse('{"AFG":"Afghanistan","ALA":"Aland Islands","ALB":"Albania","DZA":"Algeria","ASM":"American Samoa","AND":"Andorra","AGO":"Angola","AIA":"Anguilla","ATA":"Antarctica","ATG":"Antigua and Barbuda","ARG":"Argentina","ARM":"Armenia","ABW":"Aruba","AUS":"Australia","AUT":"Austria","AZE":"Azerbaijan","BHS":"Bahamas","BHR":"Bahrain","BGD":"Bangladesh","BRB":"Barbados","BLR":"Belarus","BEL":"Belgium","BLZ":"Belize","BEN":"Benin","BMU":"Bermuda","BTN":"Bhutan","BOL":"Bolivia","BIH":"Bosnia and Herzegovina","BWA":"Botswana","BVT":"Bouvet Island","BRA":"Brazil","VGB":"British Virgin Islands","IOT":"British Indian Ocean Territory","BRN":"Brunei Darussalam","BUL":"Bulgaria","BFA":"Burkina Faso","BDI":"Burundi","KHM":"Cambodia","CMR":"Cameroon","CAN":"Canada","CPV":"Cape Verde","CYM":"Cayman Islands","CAF":"Central African Republic","TCD":"Chad","CHI":"Chile","CHN":"China","HKG":"Hong Kong, SAR China","MAC":"Macao, SAR China","CXR":"Christmas Island","CCK":"Cocos (Keeling) Islands","COL":"Colombia","COM":"Comoros","COG":"Congo (Brazzaville)","COD":"Congo, (Kinshasa)","COK":"Cook Islands","CRI":"Costa Rica","CIV":"C\xf4te d\'Ivoire","HRV":"Croatia","CUB":"Cuba","CYP":"Cyprus","CZE":"Czech Republic","DNK":"Denmark","DJI":"Djibouti","DMA":"Dominica","DOM":"Dominican Republic","ECU":"Ecuador","EGY":"Egypt","SLV":"El Salvador","GNQ":"Equatorial Guinea","ERI":"Eritrea","EST":"Estonia","ETH":"Ethiopia","FLK":"Falkland Islands (Malvinas)","FAI":"Faroe Islands","FJI":"Fiji","FIN":"Finland","FRA":"France","GUF":"French Guiana","PYF":"French Polynesia","ATF":"French Southern Territories","GAB":"Gabon","GBR":"United Kingdom","GMB":"Gambia","GEO":"Georgia","GER":"Germany","GHA":"Ghana","GIB":"Gibraltar","GRE":"Greece","GRL":"Greenland","GRD":"Grenada","GLP":"Guadeloupe","GUM":"Guam","GTM":"Guatemala","GGY":"Guernsey","GIN":"Guinea","GNB":"Guinea-Bissau","GUY":"Guyana","HTI":"Haiti","HMD":"Heard and Mcdonald Islands","VAT":"Holy See (Vatican City State)","HND":"Honduras","HUN":"Hungary","ISL":"Iceland","IND":"India","IDN":"Indonesia","IRN":"Iran, Islamic Republic of","IRQ":"Iraq","IRL":"Ireland","IMN":"Isle of Man","ISR":"Israel","ITA":"Italy","JAM":"Jamaica","JPN":"Japan","JEY":"Jersey","JOR":"Jordan","KAZ":"Kazakhstan","KEN":"Kenya","KIR":"Kiribati","PRK":"Korea (North)","KOR":"Korea (South)","KWT":"Kuwait","KGZ":"Kyrgyzstan","LAO":"Lao PDR","LVA":"Latvia","LBN":"Lebanon","LSO":"Lesotho","LBR":"Liberia","LBY":"Libya","LIE":"Liechtenstein","LTU":"Lithuania","LUX":"Luxembourg","MKD":"Macedonia, Republic of","MDG":"Madagascar","MWI":"Malawi","MAS":"Malaysia","MDV":"Maldives","MLI":"Mali","MLT":"Malta","MHL":"Marshall Islands","MTQ":"Martinique","MRT":"Mauritania","MUS":"Mauritius","MYT":"Mayotte","MEX":"Mexico","FSM":"Micronesia, Federated States of","MDA":"Moldova","MCO":"Monaco","MNG":"Mongolia","MNE":"Montenegro","MSR":"Montserrat","MAR":"Morocco","MOZ":"Mozambique","MMR":"Myanmar","NAM":"Namibia","NRU":"Nauru","NPL":"Nepal","NLD":"Netherlands","ANT":"Netherlands Antilles","NCL":"New Caledonia","NZL":"New Zealand","NIC":"Nicaragua","NER":"Niger","NGA":"Nigeria","NIU":"Niue","NFK":"Norfolk Island","MNP":"Northern Mariana Islands","NOR":"Norway","OMN":"Oman","PAK":"Pakistan","PLW":"Palau","PSE":"Palestinian Territory","PAN":"Panama","PNG":"Papua New Guinea","PRY":"Paraguay","PER":"Peru","PHI":"Philippines","PCN":"Pitcairn","POL":"Poland","POR":"Portugal","PRI":"Puerto Rico","QAT":"Qatar","REU":"R\xe9union","ROU":"Romania","RUS":"Russian Federation","RWA":"Rwanda","BLM":"Saint-Barth\xe9lemy","SHN":"Saint Helena","KNA":"Saint Kitts and Nevis","LCA":"Saint Lucia","MAF":"Saint-Martin (French part)","SPM":"Saint Pierre and Miquelon","VCT":"Saint Vincent and Grenadines","WSM":"Samoa","SMR":"San Marino","STP":"Sao Tome and Principe","SAU":"Saudi Arabia","SEN":"Senegal","SRB":"Serbia","SYC":"Seychelles","SLE":"Sierra Leone","SGP":"Singapore","SVK":"Slovakia","SLO":"Slovenia","SLB":"Solomon Islands","SOM":"Somalia","RSA":"South Africa","SGS":"South Georgia and the South Sandwich Islands","SSD":"South Sudan","ESP":"Spain","LKA":"Sri Lanka","SDN":"Sudan","SUR":"Suriname","SJM":"Svalbard and Jan Mayen Islands","SWZ":"Swaziland","SWE":"Sweden","CHE":"Switzerland","SYR":"Syrian Arab Republic (Syria)","TWN":"Taiwan, Republic of China","TJK":"Tajikistan","TZA":"Tanzania, United Republic of","THA":"Thailand","TLS":"Timor-Leste","TGO":"Togo","TKL":"Tokelau","TON":"Tonga","TTO":"Trinidad and Tobago","TUN":"Tunisia","TUR":"Turkey","TKM":"Turkmenistan","TCA":"Turks and Caicos Islands","TUV":"Tuvalu","UGA":"Uganda","UKR":"Ukraine","ARE":"United Arab Emirates","ENG":"England","SCO":"Scotland","WLS":"Wales","USA":"United States of America","UMI":"US Minor Outlying Islands","URY":"Uruguay","UZB":"Uzbekistan","VUT":"Vanuatu","VEN":"Venezuela (Bolivarian Republic)","VNM":"Viet Nam","VIR":"Virgin Islands, US","WLF":"Wallis and Futuna Islands","ESH":"Western Sahara","YEM":"Yemen","ZMB":"Zambia","ZWE":"Zimbabwe"}')},360:function(e,t,n){e.exports={switcher:"switcher_switcher__3zrJL"}},376:function(e){e.exports=JSON.parse('{"name":"scorch-whiplash","version":"1.6.3","private":true,"license":"MIT","babel":{"plugins":["@babel/plugin-proposal-class-properties"]},"dependencies":{"@welldone-software/why-did-you-render":"^4.2.7","axios":"^0.20.0","aos":"^2.3.4","bcryptjs":"^2.4.3","chartist":"^0.11.4","chartist-plugin-axistitle":"0.0.7","chartist-plugin-tooltips-updated":"^0.1.2","cheerio":"^1.0.0-rc.3","chess-web-api":"^1.0.10","chess.js":"^0.10.3","fen-chess-board":"^2.0.5","html-to-react":"^1.4.2","leven":"^3.1.0","node-vibrant":"^3.1.5","react":"^16.13.1","react-chartist":"^0.14.3","react-dom":"^16.13.1","react-facebook-login":"^4.1.1","react-icons":"^3.9.0","react-images":"^1.1.3","react-indiana-drag-scroll":"^1.6.1","react-markdown":"^4.3.1","react-pgn-viewer":"^0.2.4","react-photo-gallery":"^8.0.0","react-router-dom":"^5.2.0","react-responsive-carousel":"^3.2.4","react-scripts":"3.4.1","react-slider":"^1.0.3","react-twitch-embed":"^2.1.0","reactjs-chessboard":"^0.0.9","socket.io-client":"^2.3.0","typescript":"~3.7.2","universal-cookie":"^4.0.3"},"scripts":{"win-start":"set PORT=3001 && react-scripts start","start":"HOST=0.0.0.0 PORT=3001 react-scripts start","test":"react-scripts test","eject":"react-scripts eject","build":"react-scripts build","predeploy":"echo \\"results.scorchapp.co.uk\\" > ./public/CNAME; yarn build","deploy":"gh-pages -d build -o public","prebetadeploy":"echo \\"beta.results.scorchapp.co.uk\\" > ./public/CNAME; yarn build","betadeploy":"yarn build; gh-pages -d build -o beta"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@babel/plugin-proposal-class-properties":"^7.8.3","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","@types/aos":"^3.0.3","@types/bcrypt":"^3.0.0","@types/chartist":"^0.9.48","@types/cheerio":"^0.22.17","@types/classnames":"^2.2.10","@types/jest":"^24.0.0","@types/node":"^12.0.0","@types/react":"^16.9.0","@types/react-dom":"^16.9.0","@types/react-facebook-login":"^4.1.1","@types/react-router-dom":"^5.1.5","@types/react-slider":"^1.0.0","@types/socket.io-client":"^1.4.32","@types/universal-cookie":"^2.2.0","aws-sdk":"^2.669.0","classnames":"^2.2.6","eslint":"^6.8.0","node-sass":"^4.14.1"}}')},377:function(e,t,n){e.exports={news:"news_news__3JwX8"}},386:function(e,t,n){e.exports=n(860)},39:function(e,t,n){e.exports={header:"registered_header__1Gp9E",table:"registered_table__yBsRH",cell:"registered_cell__2gBeU",headerCell:"registered_headerCell__3zk9f",flag:"registered_flag__3SAHb",tr:"registered_tr__2fs11",stickyheader:"registered_stickyheader__1HWiu",showAllButton:"registered_showAllButton__1DD0h",rowLast:"registered_rowLast__3NF--"}},391:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},43:function(e,t,n){e.exports={container:"dashboard_container__2J23A",left_column:"dashboard_left_column__2yqzh",info_organiser_container:"dashboard_info_organiser_container__329_7",description:"dashboard_description__2f7Ep",organiser_container:"dashboard_organiser_container__1bD29",tieBreakSection:"dashboard_tieBreakSection__1E9RP",tieBreakContainer:"dashboard_tieBreakContainer__1UUuR",visible:"dashboard_visible__ZUPCq",tieBreakTitle:"dashboard_tieBreakTitle__2Bgc7",tieBreaks:"dashboard_tieBreaks__3QIuR",featured:"dashboard_featured__1uxAe",live:"dashboard_live__9fbmX",teams_announcements:"dashboard_teams_announcements__1_Etj",header:"dashboard_header__3PhQ6",teams_list:"dashboard_teams_list__1OrFn",announcements:"dashboard_announcements__Ye1Fj"}},44:function(e,t,n){e.exports={container:"teams_container__2UodT",userTable:"teams_userTable__1ewml",compactContainer:"teams_compactContainer__1FsXq",compact:"teams_compact__JlUva",preview:"teams_preview__3baBK",title:"teams_title__ZBgAW",menu:"teams_menu__3GQxR",active:"teams_active__3EYBs",inactive:"teams_inactive__2C24V",searchBar:"teams_searchBar__2Xvbs",searchBarDiv:"teams_searchBarDiv__39JPn",searchIcon:"teams_searchIcon__7VoOb","scroll-up":"teams_scroll-up__ydb2Z"}},443:function(e,t){},464:function(e,t,n){},469:function(e,t){},471:function(e,t){},50:function(e,t,n){e.exports={sidebar:"sidebar_sidebar__2onqj",name:"sidebar_name__36s3Y",announcement:"sidebar_announcement__3Kxqn",title:"sidebar_title__3-Bzg",body:"sidebar_body__yxp0C",dates:"sidebar_dates__3BaX0",more:"sidebar_more__2_1JR",statusPicker:"sidebar_statusPicker__3PMmo",timezone:"sidebar_timezone__Q_npt",download:"sidebar_download__ctCo6",jumpTo:"sidebar_jumpTo__1aUvg",expandAll:"sidebar_expandAll__1JSCF",searchBar:"sidebar_searchBar__1tfzm"}},501:function(e,t){},502:function(e,t){},55:function(e,t,n){e.exports={th:"leaderboard_th__AoCU4"}},56:function(e,t,n){e.exports={featured:"featured_featured__zs_iR",headerItems:"featured_headerItems__2EPoN",headingContainer:"featured_headingContainer__5ud5j",table:"featured_table__alHoJ",featured_table:"featured_featured_table__3YWrg",cell:"featured_cell__2ru_7",headerCell:"featured_headerCell__3_aGP",flag:"featured_flag__3DtES",tr:"featured_tr__20MXQ",showAllButton:"featured_showAllButton__cv3-K",menuItems:"featured_menuItems__1p2uG",selectedItem:"featured_selectedItem__DBU8G",nullRound:"featured_nullRound__2RKp0",pairingRound:"featured_pairingRound__2YCgO"}},57:function(e,t,n){e.exports={columns:"members_columns__2lClQ",userTable:"members_userTable__14M2i",row:"members_row__2J83a",status:"members_status__2jTkv",online:"members_online__Wd29_",profile:"members_profile__15QHc",searchBar:"members_searchBar__BWiTL"}},59:function(e){e.exports=JSON.parse('{"server":"http://localhost:8080/","prodServer":"https://api.scorchapp.co.uk/","useProd":true,"prodDomain":"scorchapp.co.uk","flags":"https://ratings.fide.com/svg/|.svg","lichess":"QbFvChDTNzA9oLse","lichessBeta":"pdUYlK2nMo6sL2Tc","lichessCallback":"https://api.scorchapp.co.uk/callback/lichess","lichessCallbackBeta":"http://localhost:8080/callback/lichess"}')},6:function(e,t,n){e.exports={container:"user_container__1dvTh",col1:"user_col1__3bNLm",col2:"user_col2__1JC_B",infoWrapper:"user_infoWrapper__2j1nO",section:"user_section__3uWp7",title:"user_title__1_x29",wrapper:"user_wrapper__1caZc",accountSection:"user_accountSection__1v38f",optionsContainer:"user_optionsContainer__1_GSb",pendingContainer:"user_pendingContainer__1Bwh8",account:"user_account__2Ssme",submit:"user_submit__2HRF7",claim:"user_claim__3tI48",inline:"user_inline__3OXtN",icon:"user_icon__1Gghq",active:"user_active__2mhNB",facebookLink:"user_facebookLink__2btxv",accountButton:"user_accountButton__3oyQ8",remove:"user_remove__fI5h_",notes:"user_notes__2esV_",sync:"user_sync__1JFkv",auth:"user_auth__2yfjQ",null:"user_null__3Qrr2",authMessage:"user_authMessage__390Sk",upcomingBattle:"user_upcomingBattle__3pUGX",stage:"user_stage__3ss_y",reversed:"user_reversed__2kR16",flag:"user_flag__2UYEA",name:"user_name__3j1p-",vs:"user_vs__1kBgF",round:"user_round__3EHAB",buttons:"user_buttons__2RHQ3",join:"user_join__3BJv3",gameLink:"user_gameLink__3NIae",infoBox:"user_infoBox__3E8hT",scoreBox:"user_scoreBox__fcW-6",warning:"user_warning__1z2z2",clickButton:"user_clickButton__1FCsS",darkMode:"user_darkMode__71Cw8",merge:"user_merge__o00Ut",teamMerge:"user_teamMerge__3sVxu"}},662:function(e,t){},67:function(e,t,n){e.exports={footer:"footer_footer__3JrgB",col1:"footer_col1__1qvnn",logoWrapper:"footer_logoWrapper__cNWw0",logo:"footer_logo__1UHL_",text:"footer_text__3rv_o",copyright:"footer_copyright__3FrmR",version:"footer_version__1joZ_",col2:"footer_col2__2wzJ0",shortcuts:"footer_shortcuts__2x3Je"}},70:function(e,t,n){e.exports={content:"contact_content__3nm_K",fieldSet:"contact_fieldSet__21EWO",list:"contact_list__2yoGo",textArea:"contact_textArea__2-djk",submit:"contact_submit__3HK4a"}},741:function(e,t,n){},75:function(e,t,n){e.exports={container:"meta_container__37e3D",nav:"meta_nav__3NyJ8",divider:"meta_divider__3oJiV",announcement:"meta_announcement__AfOYM",title:"meta_title__xgqyZ"}},76:function(e,t,n){e.exports={columns:"rules_columns__TQ3pt",controls:"rules_controls__2PIup",arrows:"rules_arrows__3i4Ul",title:"rules_title__nnkUS",arrow:"rules_arrow__2Jtq1",link:"rules_link__1ontN"}},77:function(e,t,n){e.exports={stage:"game_stage__2w45h",viewer:"game_viewer__3D_Va",rightCol:"game_rightCol__2HW0P",more:"game_more__1LAp-",scroll:"game_scroll__3k70v",info:"game_info__1PzxE"}},859:function(e,t,n){},86:function(e,t,n){e.exports={fsChart:"stats_fsChart__3pHze",title:"stats_title__XSaLS",subtitle:"stats_subtitle__24ox6",name:"stats_name__178sR",url:"stats_url__1r9Nj",header:"stats_header__3zy0s"}},860:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"useLink",(function(){return ba})),n.d(a,"useClub",(function(){return _a})),n.d(a,"useVerify",(function(){return ja}));var r={};n.r(r),n.d(r,"useLink",(function(){return Xr})),n.d(r,"handleSync",(function(){return Zr}));var i={};n.r(i),n.d(i,"useFacebook",(function(){return $r}));var o=n(1),c=n.n(o),l=n(38),s=n.n(l),u=(n(391),n(85)),m=n(8),d=n.n(m),f=n(13),h=n(2),v=n(7),p=n(74),b=n(357),g=n.n(b),E=n(3),_=(n(393),n(219),n(394),n(395),n(45)),j=n(9),y=n(15),k=n(5),w=n.n(k),O=n(143),N=n(144),C={gamePoint:{name:"By game point total",func:function(e,t){return t.gamePoints-e.gamePoints}},rating:{name:"By rating",func:function(e,t){return t.rating-e.rating}},null:null,h2h:{name:"By head-to-head score",func:function(e,t){return t.scoreAgainst(e.id)-e.scoreAgainst(e.id)}},gamePointDiff:{name:"By net game points",func:function(e,t){return t.netGamePoint-e.netGamePoint}},whites:{name:"By times played black",func:function(e,t){return e.whiteTotal-t.whiteTotal}},progScore:{name:"By progressive score",func:function(e,t){return t.progressiveScore-e.progressiveScore}},wins:{name:"By most wins",func:function(e,t){return t.histories&&e.histories?t.histories.filter((function(e){return 1===(null===e||void 0===e?void 0:e.match)})).length-e.histories.filter((function(e){return 1===(null===e||void 0===e?void 0:e.match)})).length:0}},gameh2h:{name:"By head-to-head of game points",func:function(e,t){return t.gameScoreAgainst(e.id)-e.gameScoreAgainst(e.id)}},perfRating:{name:"By performance rating",func:function(e,t){return t.performanceRating-e.performanceRating}},oppRating:{name:"By average rating cut",func:function(e,t){var n,a;if(t.oppRatingSum!==e.oppRatingSum)return t.oppRatingSum-e.oppRatingSum;var r=null===(n=e.histories)||void 0===n?void 0:n.filter((function(e){return e})),i=null===(a=t.histories)||void 0===a?void 0:a.filter((function(e){return e}));if(!r||!i||!r.length||!i.length)return 0;for(var o=r.sort((function(e,t){return e.oppRating-t.oppRating})),c=i.sort((function(e,t){return e.oppRating-t.oppRating}));;){var l=[o.shift(),c.shift()],s=l[0],u=l[1];if(void 0==s||void 0===u)break;if(s||u){var m=o.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/o.length,d=c.reduce((function(e,t){return t?e+=t.oppRating:e}),0)/c.length;if(m!==d)return d-m}}return 0}},alphabetical:{name:"Alphabetical",func:function(e,t){return t.firstName>e.firstName?-1:e.firstName>t.firstName?1:0}}};function S(e){var t=e.values,n=e.children;return t.reduce((function(e,t){var n=Object(h.a)(t,2),a=n[0],r=n[1];return c.a.createElement(a.Provider,{value:r},e)}),n)}var x=Object(o.createContext)({}),L=Object(o.createContext)({isLoggedIn:void 0,profile:void 0,updateProfile:function(){return Promise.resolve()}}),M=Object(o.createContext)({isAuthed:void 0,authLevel:0}),R=Object(o.createContext)({}),P=Object(o.createContext)({}),B=Object(o.createContext)(Object.entries(C)),T=Object(o.createContext)((function(){return""})),A=Object(o.createContext)((function(){return null})),I=Object(o.createContext)((function(e){})),D=n(358),F=n.n(D),W=n(359),U=n(59),G=["BGD","BLZ","GBR","GIB","FJI"];function H(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[""].concat(t).join("/")}function z(e){return e?e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase():e}function V(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function q(e){if(!e)return null;var t=W[e],n=U.flags.replace("|",e);return G.includes(e)&&(n="/images/|.svg".replace("|",e)),c.a.createElement("img",{src:n,alt:e,title:t})}function K(e,t){return 0===t?function(e){var t=e-1;return String.fromCharCode(65+t%26).repeat(Math.floor(t/26)+1)}(e):1===t?e:2===t?function(e){if(isNaN(e))return NaN;var t=e.toString().split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],a="",r=3;for(;r--;){var i=parseInt(t.pop());a=(n[i+10*r]||"")+a}return Array(+t.join("")+1).join("M")+a}(e):e}function Y(){var e=document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)}function J(e){if(!e)return!1;var t=e.getBoundingClientRect();return!(window.innerHeight<t.top)&&!(t.y+t.height<0)}window.getDocumentHeight=Y,window.isVisible=J;var Q=n(360),X=n.n(Q);function Z(e){var t,n=Object.keys(e.sections).find((function(t){return e.section===t}))||Object.keys(e.sections)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:[X.a.switcher,null===(t=e.classNames)||void 0===t?void 0:t.switcher].join(" ")},Object.entries(e.sections).sort((function(e,t){var n,a;return(null!==(n=e[1].index)&&void 0!==n?n:1/0)-(null!==(a=t[1].index)&&void 0!==a?a:1/0)})).map((function(t,a){var r=Object(h.a)(t,2),i=r[0],o=r[1];return o.hide?null:e.loaded?c.a.createElement(v.b,{to:o.link,key:["header-button",a].join("."),className:["header-button",o.className,n===i?"selected":""].join(" ")},c.a.createElement("div",null,"string"===typeof o.icon?c.a.createElement("img",{src:o.icon,alt:o.name}):o.icon,o.name||z(i))):c.a.createElement("div",{className:["header-button"].join(" "),key:["header-button",a].join(" ")},"\u200b")}))))}var $=n(11),ee=n.n($);function te(e){var t=Object(o.useContext)(L).isLoggedIn,n=Object(o.useState)(""),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return t?null:i("/login")}),[t,i]);return r?c.a.createElement(p.a,{to:r}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Z,Object.assign({},e,{loaded:e.loaded.all,sections:{dashboard:{name:"Dashboard",link:"/t/".concat(e.id,"/dashboard"),icon:c.a.createElement(E.cb,null)},pairings:{name:"Pairings",link:"/t/".concat(e.id,"/pairings"),icon:c.a.createElement(E.a,null)},standings:{name:"Standings",link:"/t/".concat(e.id,"/standings"),icon:c.a.createElement(O.b,null),index:"knockout"===e.settings.pairingSystem?0:void 0},stats:{name:"Stats",link:"/t/".concat(e.id,"/stats"),icon:c.a.createElement(N.a,null)}}})),e.settings.allowRegistration&&"closed"!==e.settings.allowRegistration?c.a.createElement("div",{className:["header-button",ee.a.join].join(" "),onClick:l},c.a.createElement("div",null,c.a.createElement(E.T,null),"Join this tournament")):null)}var ne=n(145),ae=n.n(ne),re=n(18),ie=n(19),oe=new(n(379).a),ce=function(){function e(){Object(re.a)(this,e)}return Object(ie.a)(e,[{key:"getAll",value:function(){var e=oe.getAll();return Promise.resolve(e)}},{key:"get",value:function(e){return Promise.resolve(oe.get(e)||"")}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/",maxAge:604800};return Promise.resolve(oe.set(e,t,n))}},{key:"getLocal",value:function(e){if(!localStorage)return"";var t=localStorage.getItem(e)||"";return"true"===t||"false"!==t&&t}},{key:"setLocal",value:function(e,t){if(localStorage)return localStorage.setItem(e,t)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/"};return Promise.resolve(oe.remove(e,t))}}]),e}(),le=n(216),se=n.n(le),ue=function(){};console.log("isDev",!1);var me=U.prodServer,de=(U.prodDomain,U.lichess),fe=U.lichessCallback,he=ae.a.create({baseURL:me});window.axios=he;var ve=new ce;function pe(e){return e=Object.assign(e,{method:"GET"}),he(e).then((function(e){return e.data})).catch((function(e){throw console.error(e),e}))}function be(e){return e=Object.assign(e,{method:"POST",headers:{"Content-Type":"application/json"}}),he(e).then((function(e){return e.data})).catch((function(t){if(e.noCatch)throw t;throw t.response&&(400===t.response.status?ue("Error:",t.response.data):ue("".concat(t.response.status," ").concat(t.response.statusText,": /").concat(t.response.config.url.split("/").pop()),t.response.data)),t}))}function ge(e){e.preventDefault&&e.preventDefault(),e.persist&&e.persist();for(var t=e.target;"HTMLFormElement"!==t.constructor.name&&t.parentElement;)t=t.parentElement;if("HTMLFormElement"!==t.constructor.name)throw new Error("Couldn't find valid form");return be({data:Array.from(t).reduce((function(e,t){return t.name?("submit"===t.name||("number"===t.type?e[t.name]=Number(t.value):e[t.name]=t.value),e):e}),{}),url:t.action})}window.devCookies=ve,he.interceptors.request.use(function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.t1=t,e.t2=Object,e.t3=t.headers,e.t4=JSON,e.next=7,ve.getAll();case 7:return e.t5=e.sent,e.t6=e.t4.stringify.call(e.t4,e.t5),e.t7={Authorization:e.t6},e.t8=e.t2.assign.call(e.t2,e.t3,e.t7),e.t9={headers:e.t8},e.abrupt("return",e.t0.assign.call(e.t0,e.t1,e.t9));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Ee=se()(me,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:1e5,reconnectionAttempts:5});function _e(e){var t=Object(o.useState)([]),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useCallback)((function(){return pe({url:"tournament/".concat(e.id,"/fetchRounds")}).then(r)}),[e.id,r]);Object(o.useEffect)((function(){i()}),[i]);for(var l=e.loaded.status&&"pairings"===e.section&&e.round&&!e.status.active,s=e.loaded.status&&"standings"===e.section&&"team"===e.settings.competitors,u=[],m=e.settings.totalRounds===1/0||"Infinity"===e.settings.totalRounds?1:e.settings.totalRounds,d=1;d<m+1;d++){var f=a[d]?new Date(a[d]).toString():"";u.push(c.a.createElement(v.b,{className:["header-button",ee.a.pairingRound,e.round===d?ee.a.roundSelected:"",d>e.status.round?ee.a.nullRound:""].join(" "),to:"/t/".concat(e.id,"/").concat(e.section,"/").concat(d),key:["round",d].join(".")},c.a.createElement("div",{className:"full-text"},e.loaded.all?c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",null,l?"":"Round ",d),a[d]?c.a.createElement("h5",null,f.substring(0,11)+f.substring(16,21)):null):"\u200b")))}return l&&u.push(c.a.createElement(v.b,{className:["header-button",ee.a.pairingRound,e.round===m+1?ee.a.roundSelected:""].join(" "),to:"/t/".concat(e.id,"/").concat(e.section,"/results")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,"Results"),a[m+1]?c.a.createElement("h5",null,new Date(a[m+1]).toString().substring(0,11)+new Date(a[m+1]).toString().substring(16,21)):null))),s&&u.push(c.a.createElement(v.b,{className:["header-button",ee.a.pairingRound,e.round===m+1?ee.a.roundSelected:""].join(" "),to:["","t",e.id,e.section,"individual"].join("/")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,"Individual Scores")))),c.a.createElement("section",{className:["container","bodyContainer"].join(" ")},u.length?c.a.createElement("div",{className:"button-list"},u):null)}var je=function(){return c.a.createElement("div",{id:"main"},c.a.createElement("div",{className:"container",style:{display:"flex",flexDirection:"column",alignItems:"center",width:"max-content",alignSelf:"center"}},c.a.createElement("img",{src:"/logo512.png",style:{width:256,height:256},alt:"Not-Found"}),c.a.createElement("div",null,"PAGE NOT FOUND")),c.a.createElement("div",{className:"container"},"Think this is a mistake? Check out our ",c.a.createElement("a",{href:"https://twitter.com/scorchchess",rel:"noopener noreferrer",target:"_blank"},"Twitter page")," for the latest maintenance notices. Tweet ",c.a.createElement("a",{href:"https://twitter.com/scorchchess",rel:"noopener noreferrer",target:"_blank"},"@scorchchess")," if you think there's an error."))},ye=n(21),ke=n.n(ye),we=n(25),Oe=n.n(we),Ne={score:0,gamePoints:0,played:0,gamesPlayed:0,gameDifference:0,expectedScore:0,expectedGameScore:0,whiteTotal:0,wins:0,draws:0,losses:0,matchPercentage:0,gamePercentage:0,ratingDifference:0},Ce=function(){function e(t,n,a){Object(re.a)(this,e),this.round=n,this.settings=a,this.rounds=void 0,this.tournamentId=void 0,this.id=void 0,this.firstName=void 0,this.lastName=void 0,this.rating=void 0,this.nationality=void 0,this.score=void 0,this.gamePoints=void 0,this.played=void 0,this.expectedScore=void 0,this.expectedGameScore=void 0,this.whiteTotal=void 0,this.isPlaying=void 0,this.active=void 0,this.performanceRating=void 0,this.histories=void 0,this.bonuses=void 0,this.clashList=void 0,this.contact=void 0,this.lichess=void 0,this.chessCom=void 0,this.meta=void 0,this.teamId=void 0,this.pool=void 0,this.createdAt=void 0,this.updatedAt=void 0,this._netGamePoint=void 0,this._progressiveScore=void 0,this._oppRatingSum=void 0;for(var r=Object.keys(Ne),i=0,o=Object.keys(t);i<o.length;i++){var c=o[i];r.includes(c)||Object.defineProperty(this,c,{value:t[c]})}"bye"!==this.id&&this.compute(n,a)}return Object(ie.a)(e,[{key:"setRound",value:function(e){this.round=e,this.compute(e,this.settings)}},{key:"setSettings",value:function(e){this.settings=e,this.compute(this.round,e)}},{key:"setBonuses",value:function(e){var t=this;this.bonuses=e.filter((function(e){return e.id===t.id})),this.compute(this.round,this.settings)}},{key:"calcPool",value:function(e,t){var n=t?this.histories.slice(e,t):this.histories;return Number(function(e){var t=function(e){return e.reduce((function(e,t){if(null==t)return e;var n=t.toString();return n in e||(e[n]=0),e[n]++,e}),{})}(e);return(Object.entries(t).sort((function(e,t){return t[1]=e[1]}))[0]||[])[0]}(n.map((function(e){return null===e||void 0===e?void 0:e.pool}))))}},{key:"compute",value:function(e,t){for(var n=Object.assign({},Ne),a=1;a<e+1;a++){var r=this.histories[a];r&&(null!==r.match&&(n.played++,"bye"!==r.id&&r.played&&(n.gamesPlayed+=r.played),0===r.match?(n.score+=t.lossReward,n.losses++):.5===r.match?(n.score+=t.drawReward,n.draws++):1===r.match&&(n.score+=t.winReward,n.wins++),r.game&&(n.gamePoints+=r.game),n.expectedScore+=r.expected,n.expectedGameScore+=r.expected*r.played),"W"===r.colour&&n.whiteTotal++)}if(Object.assign(n,{gameDifference:2*n.gamePoints-n.gamesPlayed,matchPercentage:n.played?100*n.score/n.played:-1,gamePercentage:n.gamesPlayed?100*n.gamePoints/n.gamesPlayed:-1,ratingDifference:this.performanceRating-this.rating}),this.bonuses){var i,o=Object(y.a)(this.bonuses);try{for(o.s();!(i=o.n()).done;){var c=i.value;c.round>e||(c.MP&&(n.score+=c.MP),c.GP&&(n.gamePoints+=c.GP))}}catch(f){o.e(f)}finally{o.f()}}for(var l=0,s=Object.keys(n);l<s.length;l++){var u=s[l];Object.defineProperty(this,u,{value:n[u],configurable:!0})}for(var m=[""],d=1;d<this.histories.length;d++)d>e||!this.histories[d]?m[d]="":(null===this.histories[d].match||void 0===this.histories[d].match?m[d]="*":m[d]=this.histories[d].match.toString(),"bye"===this.histories[d].id&&(m[d]+="b"));return this.rounds=m,this}},{key:"hasPlayed",value:function(e){return!!this.histories&&this.histories.some((function(t){return t.id&&t.id===e}))}},{key:"scoreAgainst",value:function(e){return this.histories?this.histories.reduce((function(t,n){return n&&n.id===e&&n.match?t+=n.match:t}),0):0}},{key:"gameScoreAgainst",value:function(e){return this.histories?this.histories.reduce((function(t,n){return n&&n.id===e&&n.game?t+=n.game:t}),0):0}},{key:"rank",get:function(){return 0}},{key:"name",get:function(){return"individual"===this.settings.competitors?[this.firstName,this.lastName].join(" "):this.firstName}},{key:"netGamePoint",get:function(){if(this._netGamePoint)return this._netGamePoint;if(!this.histories)return 0;var e=0,t=0;return this.histories.forEach((function(n){n&&(e+=n.game||0,t+=n.played)})),this._netGamePoint=2*e-t}},{key:"progressiveScore",get:function(){if(this._progressiveScore)return this._progressiveScore;if(!this.histories)return 0;var e,t=0,n=Object(y.a)(this.histories);try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(a.match&&(t+=a.match))}}catch(r){n.e(r)}finally{n.f()}return this._progressiveScore=t}},{key:"oppRatingSum",get:function(){if(this._oppRatingSum)return this._oppRatingSum;if(!this.histories)return 0;var e,t=0,n=Object(y.a)(this.histories);try{for(n.s();!(e=n.n()).done;){var a=e.value;a&&(t+=a.oppRating)}}catch(r){n.e(r)}finally{n.f()}return this._oppRatingSum=t}}],[{key:"bye",value:function(t,n,a){return new e({id:"bye",tournamentId:t,rating:0,name:"BYE",firstName:"",lastName:"",histories:[]},n,a)}}]),e}(),Se=n(41),xe=n.n(Se),Le=[];function Me(e){var t=Object(o.useState)(!1),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)([]),c=Object(h.a)(i,2),l=c[0],s=c[1],u=Object(o.useCallback)((function(t,n){switch(n){case"props":return e.players.length?e.players.map((function(t){return new Ce(t,e.round,e.settings)})):t;case"round":if(!e.round)return t;if(!t.length)return t;var a,r=t.slice(0),i=Object(y.a)(r);try{for(i.s();!(a=i.n()).done;){a.value.setRound(e.round)}}catch(d){i.e(d)}finally{i.f()}return r;case"settings":return e.settings.winReward?e.players.map((function(t){return new Ce(t,e.round,e.settings)})):t;case"bonuses":if(!l.length)return t;if(!t.length)return t;var o,c=!1,s=t.slice(0),u=Object(y.a)(l);try{var m=function(){var e=o.value,t=s.findIndex((function(t){return t.id===e.id}));if(t<0)return"continue";s[t].bonuses||(s[t].setBonuses(l),c=!0)};for(u.s();!(o=u.n()).done;)m()}catch(d){u.e(d)}finally{u.f()}return c?s:t;default:return t}}),[e.players,e.round,e.settings,l]),m=Object(o.useReducer)(u,Le),d=Object(h.a)(m,2),f=d[0],v=d[1];Object(o.useEffect)((function(){v("props")}),[v,e.players]),Object(o.useEffect)((function(){v("settings")}),[v,e.settings]),Object(o.useEffect)((function(){v("round")}),[v,e.round]),Object(o.useEffect)((function(){l.length&&v("bonuses")}),[v,l]);var p=Object(o.useCallback)((function(){return e.status.id&&!a?pe({url:xe.a.resolve(me,["tournament",e.status.id,"fetchBonuses"].join("/"))}).then(s).finally((function(){return r(!0)})):null}),[e.status.id,s,r,a]);return Object(o.useEffect)((function(){a||p()}),[p,a,r]),a?f:Le}var Re={pre:{rank:{mobile:"Rank",name:"",className:"blank",sort:!1,postConvert:function(e,t){return(1+t).toString()}},nationality:{name:"Fed",mobile:"Federation",className:"flag",convert:q},name:{name:"Name",className:"playerName left",id:function(e,t,n){return["","individual"===n.competitors?"player":"team",e.id].join("/")},sort:function(e,t){return e>t?1:e<t?-1:0}},rating:{name:"Rating",className:"locked",show:function(e,t,n){return n.showRatings}}},roundColumn:{name:function(e,t){return e.slice(-1)},id:function(e,t,n){if(!e.histories||!e.histories[t]||null===e.histories[t].match)return"";var a=e.histories[t],r=a.colour;"W"===r?e.id:a.id,"W"===r?a.id:e.id;return["","t",n.vanityURL||e.tournamentId,"pairings",t].join("/")+"#"+a.resultId},title:function(e,t,n){if(!e.histories||!e.histories[t])return"";var a=e.histories[t],r=n.find((function(e){return e.id===a.id}));if(!r)return"";var i=null!==a.game&&void 0!==a.game?"\n"+[a.game,a.played-a.game].join("-"):"",o="";if(e.bonuses){var c,l=Object(y.a)(e.bonuses);try{for(l.s();!(c=l.n()).done;){c.value.round===t&&(o="\nBonus granted by organiser")}}catch(s){l.e(s)}finally{l.f()}}return r.name+i+o},className:function(e,t,n){return"*"===e?"edit":""===e?"unset":"playerName"},convert:function(e,t,n,a){if(""===e)return"";if("*"===e)return"*";var r=!1,i=Number(a.slice(-1));if(t.bonuses){var o,c=Object(y.a)(t.bonuses);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.round===i&&(e+=l.MP,r=!0)}}catch(m){c.e(m)}finally{c.f()}}var s,u=parseFloat(e);return s=.5===u?"\xbd":u.toString(),e.endsWith("b")&&(s="("+s+")"),r&&(s+="*"),s},sort:function(e,t){if(e===t)return 0;if(""===e)return 1;if(""===t)return-1;if("*"===e)return 1;if("*"===t)return-1;var n=[Number(e),Number(t)],a=n[0],r=n[1];return e.toString().endsWith("b")&&(a-=.001),t.toString().endsWith("b")&&(r-=.001),r-a}},post:{score:{mobile:"Match Points",name:"MP",className:"locked",convert:function(e,t){return Math.floor(e)===e?e.toFixed():.5===e?"\xbd":Math.floor(e).toFixed()+"\xbd"}},gamePoints:{mobile:"Game Points",name:"GP",className:"locked",convert:function(e,t){return Math.floor(e)===e?e.toFixed():.5===e?"\xbd":Math.floor(e).toFixed()+"\xbd"}},gameDifference:{mobile:"Game Point Difference",brief:"Game Point +/-",name:"G. +/-",className:"locked",convert:function(e){return e?e>0?"+"+e.toFixed(1):e.toFixed(1):""},more:!0},gamesPlayed:{mobile:"Games Played",name:"P",className:"locked",convert:function(e){return e.toString()},more:!0},matchPercentage:{mobile:"Match Point Percentage",brief:"Match Point +/-",name:"M. %",className:"rating",convert:function(e){return e.toFixed()},more:!0},gamePercentage:{mobile:"Game Point Percentage",brief:"Game Point %",name:"G. %",className:"rating",convert:function(e){return e.toFixed()},more:!0},performanceRating:{mobile:"Performance Rating",brief:"Perf. Rating",name:"Perf",className:"rating",convert:function(e){return e.toFixed()},show:function(e,t,n){return n.showRatings},more:!0},ratingDifference:{mobile:"Performance Rating Difference",brief:"Perf. Rating +/-",name:"P. +/-",className:"rating",convert:function(e){return e?e>0?"+"+e.toString():e.toString():""},show:function(e,t,n){return n.showRatings},more:!0},expectedScore:{mobile:"Expected Score",name:"Expected",className:"rating",convert:function(e,t){return e.toFixed(1)+" / "+t.played},show:function(e,t,n){return n.showRatings},more:!0},expectedDifference:{mobile:"Score to Expected",brief:"Expected +/-",name:"E. +/-",className:"rating",convert:function(e){return"undefined"===typeof e?"":e>0?"+"+e.toFixed(2):e.toFixed(2)},show:function(e,t,n){return n.showRatings},more:!0},wins:{mobile:"Wins",name:"W",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()},more:!0},draws:{mobile:"Draws",name:"D",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()},more:!0},losses:{mobile:"Losses",name:"L",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()},more:!0},played:{mobile:"Played",name:"P",className:"locked",show:function(e,t,n,a){return"results"!==a},convert:function(e){return e.toString()},more:!0}}},Pe=/chess\.com\/(?:live#tm=|club\/matches\/live\/(?:[a-z-]+\/)?)([0-9]+)/,Be=/(?:https:\/\/)?(?:www.)?(?:(twitch.tv|youtube.com))\/(.*)/,Te=/^(?:https:\/\/)?(?:www.)?([a-z.]+\.[a-z.]+)\/?(?:.*)?$/,Ae=/[a-z0-9]*/gi,Ie=[/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i],De=/^[a-z0-9][\w-]{0,28}[a-z0-9]$/i;function Fe(){var e=navigator.userAgent||navigator.vendor||"";return!!Ie[0].test(e)||!!Ie[1].test(e.substr(0,4))}var We=n(217),Ue=n.n(We);function Ge(e){var t=Object(o.useMemo)((function(){return null===e.upperLimit?null:void 0===e.upperLimit?10*window.innerHeight/100:e.upperLimit}),[e.upperLimit]),n=Object(o.useMemo)((function(){return null===e.lowerLimit?null:void 0===e.lowerLimit?275:e.lowerLimit}),[e.lowerLimit]),a=Object(o.useState)(null),r=Object(h.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)(void 0),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(o.useState)(void 0),v=Object(h.a)(f,2),p=v[0],b=v[1],g=Object(o.useState)(void 0),E=Object(h.a)(g,2),_=E[0],y=E[1],k=Object(o.useState)(void 0),O=Object(h.a)(k,2),N=O[0],C=O[1],S=Object(o.useCallback)((function(e){if(!i)return!1;var a=i.getBoundingClientRect();if(e){if(N&&C(void 0),n&&Y()-window.scrollY-a.height<n){var r=Y()-a.height-n,o=function(e){for(var t=e;t&&(t=t.parentElement);){if("static"!==window.getComputedStyle(t).position)return e.getBoundingClientRect().top-t.getBoundingClientRect().top}return 0}(i);return C(r),b(o),!1}return!(_&&window.scrollY<_)}if(N){if(window.scrollY<N)return!0}else if(_&&y(void 0),p&&b(void 0),null===t||a.top<t)return d(a.left),y(window.scrollY),!0;return!1}),[i,t,p,n,d,b,_,N,y,C]),x=Object(o.useReducer)(S,null===t),L=Object(h.a)(x,2),M=L[0],R=L[1];Object(o.useEffect)((function(){return window.addEventListener("scroll",R),function(){return window.removeEventListener("scroll",R)}}),[R]);var P=Object(o.useMemo)((function(){var n=Object.assign({},e.children.props.style);return M?Object.assign(n,{left:m},null===t?{top:"8vh"}:void 0,e.fixedStyles):Object.assign(n,e.absoluteStyles,p?{top:p}:void 0)}),[M,e.absoluteStyles,e.fixedStyles,e.children.props.style,p,m,t]);return c.a.cloneElement(e.children,{className:w()(e.children.props.className,Ue.a.sticky,Object(j.a)({},Ue.a.absolute,!M)),style:P,ref:l})}function He(e){var t=Me(e),n=Object(o.useState)(!1),a=Object(h.a)(n,2),r=a[0],i=(a[1],Object(o.useMemo)((function(){return e.finish?e.finish:e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds||e.settings.totalRounds===1/0?e.status.round:e.settings.totalRounds}),[e.finish,e.status.round,e.settings.totalRounds])),l=Object(o.useMemo)((function(){for(var t=[],n=null!==(a=e.start)&&void 0!==a?a:1;n<=i;n++){var a;t.push("round."+n.toString())}return t}),[i,e.start]),s=Object(o.useMemo)((function(){return[].concat(Object(u.a)(Object.keys(Re.pre)),Object(u.a)(l),Object(u.a)(Object.keys(Re.post)))}),[l]).filter((function(t,n){var a=Re.pre[t]||Re.post[t];return!a||!(a.show&&!a.show(null,n,e.settings))})),m=Object(o.useCallback)((function(e,t){return s.includes(t)?e[0]!==t?[t,0]:[t,e[1]+1]:["",0]}),[s]),d=Object(o.useReducer)(m,["score",0]),f=Object(h.a)(d,2),p=f[0],b=f[1],g=Object(o.useContext)(B),_=Object(o.useMemo)((function(){if(!t.length)return[];for(var n=[],a=function(a){var r,o=t[a];if((o.pool||e.pool)&&o.calcPool(e.start,i+1)!==e.pool)return"continue";if("bye"===o.id)return"continue";if(0!==e.searched.length&&!e.searched.find((function(e){return e.id===o.id})))return"continue";for(var c=[],l=0,s=Object.entries(Re.pre);l<s.length;l++){var m=Object(h.a)(s[l],2),d=m[0],f=m[1];f.show&&!f.show(o,a,e.settings)||c.push([o[d],f,o])}for(var v=o.rounds.slice(null!==(r=e.start)&&void 0!==r?r:1,i+1),p=v.length+1;p<=i;p++)v.push("");for(var b=v.map((function(e){return[e,Re.roundColumn,o]})),g=[],E=0,_=Object.entries(Re.post);E<_.length;E++){var j=Object(h.a)(_[E],2),y=j[0],k=j[1];k.show&&!k.show(o,a,e.settings)||g.push([o[y],k,o])}var w=[].concat(c,Object(u.a)(b),g);n.push(w)},o=0;o<t.length;o++)a(o);var l=function(e,t){return t-e},m=p[0].startsWith("round")?Re.roundColumn:Re.pre[p[0]]||Re.post[p[0]];if(m&&!1!==m.sort){m.sort&&(l=m.sort);var d=s.indexOf(p[0]);-1!==d&&(n=n.sort((function(t,n){var a;if(a=p[1]%2?l(n[d][0],t[d][0]):l(t[d][0],n[d][0]))return a;if(e.round===i)return e.state.indexOf(t[d][2].id)-e.state.indexOf(n[d][2].id);for(var r=g.slice(0),o=r.shift();o&&o[1];){var c=o[1].func(t[d][2],n[d][2]);if(c)return c;o=r.shift()}return 0})))}return n.map((function(n,a){return c.a.createElement("tr",{key:"row."+a,"data-aos":"fade-up","data-aos-once":!0,className:w()(Oe.a.tr,{even:a%2===0,odd:a%2})},n.map((function(n,i){var o,l=Object(h.a)(n,3),u=l[0],m=l[1],d=l[2],f=u?u.toString():"";m.convert?f=m.convert(u,d,e.settings,s[i]):m.postConvert&&(f=m.postConvert(f,a)),"undefined"!==typeof f&&""!==f||(f="\u200b");var p="function"===typeof m.className?m.className("string"===typeof f?f:"",i,e.settings):m.className,b="function"===typeof m.name?m.name((s[i]||"").toString(),i):m.name,g=m.id?m.id(d,parseInt(b),e.settings):"",E=m.title?m.title(d,parseInt(b),t):"";return c.a.createElement(c.a.Fragment,null,c.a.createElement("th",{className:[Oe.a.cell,Oe.a.headerCell].join(" "),key:["cellHeader",i].join(".")},c.a.createElement("div",null,m.mobile?m.mobile:b)),c.a.createElement("td",{key:["cellBody",i].join("."),className:w()(Oe.a.cell,(o={},Object(j.a)(o,Oe.a.moreHidden,!r&&m.more&&!Fe()),Object(j.a)(o,"hidden",!1),o))},f?g?c.a.createElement(v.b,{to:g,className:[Oe.a.cell,p,Oe.a[p]].join(" "),title:E},f):c.a.createElement("div",{key:[u,i].join("."),className:[Oe.a.cell,p,Oe.a[p]].join(" "),title:E},f):null))})),r&&!Fe()?c.a.createElement("td",{className:w()(Oe.a.cell,Oe.a.spacer)}):null)}))}),[t,p,s,e.round,e.state,i,e.settings,g,e.pool,r,e.searched,e.start,i]);return e.pool&&!_.length?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:Oe.a.container},e.pool?c.a.createElement("div",{className:Oe.a.pool},"Pool ",K(e.pool,e.settings.poolDisplay)):null,c.a.createElement("table",{className:w()("download-table full-width",Oe.a.table,"standings")},c.a.createElement("thead",null,c.a.createElement("tr",{"data-aos":"fade-up","data-aos-once":!0},s.map((function(e,t){var n,a=e.startsWith("round")?Re.roundColumn:Re.pre[e]||Re.post[e];return c.a.createElement("th",{scope:"column",key:["column",t].join("."),className:w()(Oe.a.th,(n={},Object(j.a)(n,Oe.a.round,e.startsWith("round")),Object(j.a)(n,Oe.a.moreHidden,!r&&a.more&&!Fe()),n)),id:e,onClick:function(){return b(e)}},c.a.createElement("div",{className:[Oe.a.cell,Oe.a.headerCell].join(" ")},"function"===typeof a.name?a.name(e,t):a.name))})),r&&!Fe()?c.a.createElement("th",{className:w()(Oe.a.cell,Oe.a.spacer)}):null)),c.a.createElement("tbody",null,_.length?_:c.a.createElement("tr",null,c.a.createElement("td",{colSpan:42},"No players entered yet")))),c.a.createElement(Ge,null,c.a.createElement("div",{className:Oe.a.col2},Fe()||r?null:c.a.createElement("div",{className:Oe.a.button},c.a.createElement(E.d,null))))))}var ze=n(55),Ve=n.n(ze);function qe(e,t,n){var a=Object(o.useMemo)(e,t);return Object(o.useDebugValue)(n),a}function Ke(e){var t=Object(o.useState)([]),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useCallback)((function(){pe({url:["","tournament",e.status.id,"getIndividualPlayers"].join("/")}).then(r)}),[e.status.id,r]);Object(o.useEffect)((function(){i()}),[i]);var l=Object(o.useReducer)((function(e){return!e}),!1),s=Object(h.a)(l,2),u=s[0],m=s[1],d=qe((function(){return{rank:{name:"",value:function(e,t){return t+1},convert:function(e){return"#"+e},bold:!0},nationality:{name:"",value:function(e){return e.nationality}},name:{name:"Name",class:"playerName",value:function(e){return e.name||e.userId},bold:!0},username:{name:"Username",value:function(e){return e.username}},team:{name:"Team",value:function(e){return e.team}},score:{name:"Score",value:function(e){return e.histories.reduce((function(e,t){return t?e+=t.score:e}),0)},bold:!0},averageBoard:{name:"Av. Board",value:function(e){return e.histories.reduce((function(e,t){return t?e+=t.board:e}),0)/e.histories.slice(1).length},convert:function(e){return e.toFixed(2)}},scorePercentage:{name:"Score %",value:function(e){return e.histories.reduce((function(e,t){return t?e+=t.score:e}),0)/e.histories.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.score)})).length*100},convert:function(e){return Math.round(e)}},wins:{name:"W",value:function(e){return e.histories.filter((function(e){return 1===(null===e||void 0===e?void 0:e.score)})).length}},draws:{name:"D",value:function(e){return e.histories.filter((function(e){return.5===(null===e||void 0===e?void 0:e.score)})).length}},losses:{name:"L",value:function(e){return e.histories.filter((function(e){return 0===(null===e||void 0===e?void 0:e.score)})).length}},played:{name:"P",value:function(e){return e.histories.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.score)})).length}}}}),[],"headers"),f=qe((function(){return a.filter((function(e){return u?e:e.userId})).sort((function(e,t){var n=d.score.value(t)-d.score.value(e);return 0!==n?n:d.averageBoard.value(e)-d.averageBoard.value(t)})).map((function(e,t){return c.a.createElement("tr",{key:w()("row",t)},Object.entries(d).map((function(n,a){var r=Object(h.a)(n,2),i=r[0],o=r[1];return c.a.createElement("td",{key:["cell",t,a].join("."),className:[Ve.a.th,o.bold?"bold":""].join(" ")},"name"===i&&e.userId?c.a.createElement(v.b,{to:"/@/"+e.userId,className:[Ve.a.cell,Ve.a.headerCell,o.class].join(" ")},o.convert?o.convert(o.value(e,t)):o.value(e,t)):c.a.createElement("div",{className:[Ve.a.cell,Ve.a.headerCell,o.class].join(" ")},o.convert?o.convert(o.value(e,t)):o.value(e,t)))})))}))}),[d,a,u],"rows");return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",null,c.a.createElement("div",{className:"optionsContainer container"},c.a.createElement("div",{className:["header-button",Ve.a.pairingRound,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,u?"Hide unregistered":"Show unregistered"),c.a.createElement("div",null,u?"Hide all users without an account (default)":"Show all users who have played a game")),c.a.createElement("div",{className:"toggleSwitch",onClick:m},c.a.createElement("input",{type:"checkbox",className:"check",checked:u}),c.a.createElement("div",{className:"toggleSlider round"}))))),c.a.createElement("section",{key:"standings.1"},c.a.createElement("table",{className:["download-table full-width",Ve.a.table,"standings"].join(" ")},c.a.createElement("thead",{className:Ve.a.headers},c.a.createElement("tr",null,Object.entries(d).map((function(e,t){var n=Object(h.a)(e,2),a=(n[0],n[1]);return c.a.createElement("th",{scope:"column",key:["column",t].join("."),className:[Ve.a.th].join(" ")},c.a.createElement("div",{className:[Ve.a.cell,Ve.a.headerCell].join(" ")},a.name))})))),c.a.createElement("tbody",null,f))),c.a.createElement("section",null,c.a.createElement("h5",null,"This feature is in beta. Please contact the tournament director if you believe are there any errors. These will be corrected when the functionality to do so has been added.")))}var Ye=n(23),Je=n.n(Ye);function Qe(e){var t=Object(o.useMemo)((function(){return e.results}),[e.results]),n=Object(o.useMemo)((function(){return"Infinity"===e.settings.totalRounds?t.reduce((function(e,t){return t.round>e?t.round:0}),0):e.settings.totalRounds}),[e.settings,t]),a=Object(o.useMemo)((function(){var t;return null!==(t=e.start)&&void 0!==t?t:1}),[e.start]),r=Object(o.useMemo)((function(){var t;return null!==(t=e.finish)&&void 0!==t?t:e.status.round}),[e.finish,e.status.round]),i=Object(o.useMemo)((function(){var e=[];if(!n)return e;for(var i=a;i<r+1;i++){e[i]||(e[i]=[]);var o,c=Object(y.a)(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;l.round===i&&e[i].push(l)}}catch(s){c.e(s)}finally{c.f()}}return e}),[t,a,r]),l=Object(o.useState)(null),s=Object(h.a)(l,2),u=s[0],m=s[1],d=Object(o.useContext)(T),f=Object(o.useReducer)((function(e,t){for(var n=0;n<t.length;n++){if(!e[n])return t;for(var a=0;a<t[n].length;a++){var r=e[n][a],i=t[n][a];if(!r)return t;if(r[0].x!==i[0].x)return t;if(r[0].y!==i[0].y)return t;if(r[1].x!==i[1].x)return t;if(r[1].y!==i[1].y)return t}}return e}),[]),v=Object(h.a)(f,2),p=v[0],b=v[1],g=Object(o.useState)(!1),_=Object(h.a)(g,2),k=_[0],O=_[1],N=Object(o.useCallback)((function(){if(!k&&t.length){for(var n=Array.from(document.getElementsByClassName(Je.a.winner)),a=[],r=[],i=0,o=Array.from(document.getElementsByClassName(Je.a.all));i<o.length;i++){var c=o[i],l=(c.getAttribute("data-svg")||"").split("."),s=Object(h.a)(l,3),u=s[0],m=s[1],d=s[2];Number(u)===e.stage&&(r[Number(m)]||(r[Number(m)]={}),r[Number(m)][d]=c)}for(var f=!1,v=0,p=n;v<p.length;v++){var g=p[v],E=(g.getAttribute("data-svg")||"").split("."),_=Object(h.a)(E,3),j=_[0],y=_[1],w=_[2];if(Number(j)===e.stage&&r[Number(y)]){var N=r[Number(y)][w];g&&N&&(a[Number(y)]||(a[Number(y)]=[]),a[Number(y)].push([g.getBoundingClientRect(),N.getBoundingClientRect()]),f||(f=!0))}}b(a),O(f)}}),[t.length,n,b,k,O,e.start,e.finish,e.stage]),C=Object(o.useMemo)((function(){return p.flat(2).reduce((function(e,t){return[t.left<e[0]?t.left:e[0],t.top<e[1]?t.top:e[1]]}),[1e5,1e5])}),[p]),S=Object(o.useMemo)((function(){return p.flat(2).reduce((function(e,t){return[t.left>e[0]?t.left:e[0],t.top>e[1]?t.top:e[1]]}),[0,0])}),[p]),x=Object(o.useReducer)((function(){if(!u)return[0,0];var e=u.getBoundingClientRect();return[e.left,e.top]}),[0,0]),L=Object(h.a)(x,2),M=L[0],R=L[1];Object(o.useEffect)((function(){N()})),Object(o.useEffect)((function(){R()}),[R,u]),Object(o.useEffect)((function(){var e=function(){R(),O(!1)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[O,R]),Object(o.useEffect)((function(){var e=function(){return window.dispatchEvent(new Event("resize"))};e();var t=setTimeout(e,1e3);return function(){return clearTimeout(t)}}),[u]),Object(o.useEffect)((function(){var e=document.getElementById("root");e&&(u?(e.style.overflowY="",e.style.maxHeight=""):(e.style.overflowY="hidden",e.style.maxHeight="100vh"))}),[u]);var P=Object(o.useCallback)((function(){if(!u)return[!1,!0];var e=!1,t=!1;return u.scrollLeft>10&&(e=!0),u.scrollLeft+u.offsetWidth<u.scrollWidth-10&&(t=!0),[e,t]}),[u]),B=Object(o.useReducer)(P,[!1,!0]),A=Object(h.a)(B,2),I=A[0],D=A[1];Object(o.useEffect)((function(){if(u)return D(),u.addEventListener("scroll",D),function(){return u.removeEventListener("scroll",D)}}),[u,D]);var F=Object(o.useCallback)((function(e){if(u){u.scrollBy({left:100*("left"===e?-1:1),behavior:"smooth"})}}),[u]),W=function(e){var t=e.settings;return{getScores:function(e){var n,a;return"match"===t.displayPoints?null!=e.matchW||null!=e.matchB?[e.matchW,e.matchB]:(null===(a=e.fetched)||void 0===a?void 0:a.scores)?e.fetched.scores:[null,null]:null!=e.resultWhite||null!=e.resultBlack?[e.resultWhite,e.resultBlack]:(null===(n=e.fetched)||void 0===n?void 0:n.scores)?e.fetched.scores:[null,null]}}}({settings:e.settings}).getScores;return c.a.createElement("section",{className:Je.a.container,"data-embed-id":"knockout"},c.a.createElement("div",{className:Je.a.scroll,id:Je.a.left,onClick:function(){return F("left")},style:{opacity:I[0]?void 0:0}},c.a.createElement(E.c,null)),c.a.createElement("div",{className:Je.a.scroll,id:Je.a.right,onClick:function(){return F("right")},style:{opacity:I[1]?void 0:0}},c.a.createElement(E.d,null)),c.a.createElement("div",{className:[Je.a.stage,"scrollable"].join(" "),ref:m},c.a.createElement("div",{className:Je.a.columns},i.map((function(t,n,i){if(!t)return null;var o=i.slice(0,n+1).filter((function(e){return e})).length,l=t.length?45*Math.pow(2,o-1)-45+"px":0;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Je.a.roundNumber},"Round ",n),c.a.createElement("div",{key:["column",n].join("."),className:Je.a.column,style:{paddingTop:l,paddingBottom:l}},t.map((function(i,l){var s,u;return c.a.createElement(c.a.Fragment,null,i.pool&&i.pool!==(null===(s=t[l-1])||void 0===s?void 0:s.pool)?c.a.createElement("div",{className:w()(Je.a.poolTitle,Object(j.a)({},Je.a.visible,o<=1))},e.poolNames&&null!==(u=e.poolNames[i.pool])&&void 0!==u?u:"Bracket "+i.pool):null,c.a.createElement("div",{key:["matchUp",l].join("."),className:Je.a.matchUp},c.a.createElement("div",{className:[Je.a.white].join(" ")},n>a?c.a.createElement("div",{"data-svg":[e.stage,n-1,i.idW].join("."),className:Je.a.all}):null,c.a.createElement(E.r,{style:{color:"white"}}),c.a.createElement("div",{className:["playerInfo",Je.a.playerInfo,"bye"===i.idW?Je.a.bye:""].join(" ")},d(i.idW)),c.a.createElement("div",{className:w()(Je.a.score,Object(j.a)({},Je.a.win,i.matchW))},W(i)[0]),i.matchW&&n<r?c.a.createElement("div",{"data-svg":[e.stage,n,i.idW].join("."),className:Je.a.winner}):null),c.a.createElement("div",{className:[Je.a.black].join(" ")},n>a?c.a.createElement("div",{"data-svg":[e.stage,n-1,i.idB].join("."),className:Je.a.all}):null,c.a.createElement(E.r,{style:{color:"black"}}),c.a.createElement("div",{className:["playerInfo",Je.a.playerInfo,"bye"===i.idB?Je.a.bye:""].join(" ")},d(i.idB)),c.a.createElement("div",{className:w()(Je.a.score,Object(j.a)({},Je.a.win,i.matchB))},W(i)[1]),i.matchB&&n<r?c.a.createElement("div",{"data-svg":[e.stage,n,i.idB].join("."),className:Je.a.winner}):null)),l<t.length-1?c.a.createElement("div",{className:Je.a.spacer}):null)}))))}))),c.a.createElement("svg",{className:Je.a.connectors,style:{left:C[0]-M[0]+2.5,top:C[1]-M[1]+2.5},width:S[0]<C[0]?0:S[0]-C[0],height:S[1]<C[1]?0:S[1]-C[1]},p.map((function(e,t){return c.a.createElement("g",{key:["lines",t].join("."),className:["ct-series","ct-series-"+String.fromCharCode(t+65-1)].join(" ")},e.map((function(e,t){var n=Object(h.a)(e,2),a=n[0],r=n[1],i=[a.left-C[0],a.top-C[1]],o=[r.left-C[0],r.top-C[1]],l=[(i[0]+o[0])/2,(i[1]+o[1])/2],s=(i[0],i[0],i[1],i[1],i[0],i[0],i[1],i[1],o[0],o[1],[i[0]+.5*(o[0]-i[0]),i[1]+0*(o[1]-i[1])]),u=[i[0]+1*(o[0]-i[0]),i[1]+.5*(o[1]-i[1])];return c.a.createElement("path",{key:["path",t].join("."),className:[Je.a.line,"ct-line"].join(" "),d:Object.entries({M:i.join(" "),C:[s,u,o].map((function(e){return e.join(" ")})).join(", ")}).map((function(e){var t=Object(h.a)(e,2);return t[0]+t[1]})).join(" ")})})))})))))}function Xe(e){return{getName:function(t){if(!t||!t.id)return"\u200b";if("bye"===t.id)return"BYE";var n=[];return"individual"===e.competitors?n.push([t.firstName,t.lastName].join(" ")):n.push(t.firstName),e.showRatings&&n.push("(".concat(t.rating,")")),n.join(" ")}}}var Ze=function(){function e(t,n){Object(re.a)(this,e),this.round=n,this.id=void 0,this.w=void 0,this.b=void 0,this.tournamentId=void 0,this.board=void 0,this.teamID=void 0,this.link=void 0,this.linkSource=void 0,this.type=void 0,this.scores=void 0,this.aborted=void 0,this.bodyStatus=void 0,this.metaStatus=void 0,this.registrationTime=void 0,this.startTime=void 0,this.endTime=void 0,this.players=void 0,this.scored=void 0,this.teams=void 0,this.pool=void 0,this.isFeatured=void 0,this.games=void 0,this.debugStatus=void 0;for(var a=0,r=Object.keys(t);a<r.length;a++){var i=r[a];Object.defineProperty(this,i,{value:t[i]})}this.debugStatus=this.status}return Object(ie.a)(e,[{key:"status",get:function(){if(this.aborted)return"aborted";for(var e=0,t=["Confirmed","Finished","Live","Registered","Scheduled"];e<t.length;e++){var n=t[e];if("is"+n in this&&this["is"+n])return n.toLowerCase()}return"pending"}},{key:"isConfirmed",get:function(){return!!this.scored}},{key:"isFinished",get:function(){return!!this.isConfirmed||("finished"===this.bodyStatus||Date.now()>(this.endTime||1/0))}},{key:"isLive",get:function(){return"In Progress"===this.metaStatus||("in_progress"===this.bodyStatus||!!(!this.isFinished&&this.startTime&&Date.now()>this.startTime))}},{key:"isRegistered",get:function(){return Date.now()>(this.registrationTime||1/0)||(!!this.players||(!!this.isLive||!!this.isFinished))}},{key:"isScheduled",get:function(){return Date.now()>(this.startTime||1/0)||(!!this.startTime||("scheduled"===this.bodyStatus||(!!this.isRegistered||!!this.isFinished)))}}]),e}(),$e=n(363),et=n.n($e),tt=n(30),nt=n.n(tt),at=(n(464),n(113)),rt=n(27),it=n(26),ot=n(364),ct=n.n(ot),lt=n(365),st=n.n(lt),ut=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],mt=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(ie.a)(n,[{key:"render",value:function(){var e=this.props.headerInfo;if(!e)return null;var t=e.Link,n=e.White,a=e.Black,r=e.WhiteTeam,i=e.BlackTeam,o=e.BlackElo,l=e.WhiteElo,s=e.Round,u=e.Game,m=e.Result,d=e.Event,f=e.Site,h=e.Date.split("."),v=h&&"".concat(h[2]," ").concat(ut[new Number(h[1])-1]," ").concat(h[0]),p=d&&f?" ".concat(d," | ").concat(f," | ").concat(m," "):null,b=v&&s&&u?" ".concat(v," | Round ").concat(s," | Game ").concat(u," "):null,g={fontWeight:"bold",marginBottom:"0.25rem"},E={fontSize:"14px"};return c.a.createElement("div",{className:"pgnHeader",style:{padding:"5px"}},t?c.a.createElement("a",{href:t,rel:"noopener noreferrer",target:"_blank",style:g},n," (",l,") vs. ",a," (",o,")"):c.a.createElement("div",{style:g},n," (",l,") vs. ",a," (",o,")"),r||i?c.a.createElement("div",{style:g},r," vs. ",i):null,c.a.createElement("div",{style:E},p),c.a.createElement("div",{style:E},b))}}]),n}(c.a.Component),dt=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;Object(re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleDownload=function(){var t=e.props.onDownload;"function"===typeof t&&t()},e}return Object(ie.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handleDownload,style:this.props.iconStyles},c.a.createElement(E.z,null))}}]),n}(c.a.Component),ft=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;Object(re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handlePreviousMove=function(){var t=e.props.onPreviousMove;"function"===typeof t&&t()},e}return Object(ie.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handlePreviousMove,style:this.props.iconStyles},c.a.createElement(E.c,null))}}]),n}(c.a.Component),ht=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;Object(re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleNextMove=function(){var t=e.props.onNextMove;"function"===typeof t&&t()},e}return Object(ie.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handleNextMove,style:this.props.iconStyles},c.a.createElement(E.d,null))}}]),n}(c.a.Component),vt=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;Object(re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleLastMove=function(){var t=e.props.onLastMove;"function"===typeof t&&t()},e}return Object(ie.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handleLastMove,style:this.props.iconStyles},c.a.createElement(E.ab,null))}}]),n}(c.a.Component),pt=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;Object(re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleReset=function(){var t=e.props.onReset;"function"===typeof t&&t()},e}return Object(ie.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handleReset,style:this.props.iconStyles},c.a.createElement(E.Z,null))}}]),n}(c.a.Component),bt=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;Object(re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleFlipBoard=function(){var t=e.props.onFlipBoard;"function"===typeof t&&t()},e}return Object(ie.a)(n,[{key:"render",value:function(){var e=this.props.iconStyles,t=JSON.parse(JSON.stringify(e));return c.a.createElement("div",{onClick:this._handleFlipBoard,style:t},c.a.createElement(E.kb,null))}}]),n}(c.a.Component),gt=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;Object(re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handlePlay=function(){var t=e.props.onPlay;"function"===typeof t&&t()},e}return Object(ie.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this._handlePlay,style:this.props.iconStyles},this.props.isPlaying?c.a.createElement(E.Q,null):c.a.createElement(E.S,null))}}]),n}(c.a.Component),Et=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){return Object(re.a)(this,n),t.apply(this,arguments)}return Object(ie.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onDownload,n=e.onNextMove,a=e.onPreviousMove,r=e.onReset,i=e.onFlipBoard,o=e.width,l=e.onLastMove,s=e.onPlay,u=e.isPlaying,m=e.fenMove,d={cursor:"pointer",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:o,paddingTop:"10px",paddingBottom:"5px"},f={paddingLeft:"20px"};return c.a.createElement("div",{className:"pgnViewerFooter",style:d},!m&&c.a.createElement(pt,{onReset:r,iconStyles:f}),!m&&c.a.createElement(ft,{onPreviousMove:a,iconStyles:f}),!m&&c.a.createElement(ht,{onNextMove:n,iconStyles:f}),!m&&c.a.createElement(vt,{onLastMove:l,iconStyles:f}),!m&&c.a.createElement(gt,{onPlay:s,iconStyles:f,isPlaying:u}),c.a.createElement(bt,{onFlipBoard:i,iconStyles:f}),c.a.createElement(dt,{onDownload:t,iconStyles:f}))}}]),n}(c.a.Component),_t=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;Object(re.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._handleChangeMove=function(){var t=e.props,n=t.onChangeMove,a=t.moveIndex;"function"===typeof n&&n(a)},e}return Object(ie.a)(n,[{key:"render",value:function(){var e=this.props,t=e.move,n=e.moveIndex,a=e.currentIndex,r=n%2!==0,i=Math.ceil(n/2)+".",o={cursor:"pointer",color:"black",display:"inline-block"};return a===n&&(o.fontWeight=700),c.a.createElement("span",{onClick:this._handleChangeMove,style:o},r&&i,"\xa0",t,"\xa0")}}]),n}(c.a.Component),jt=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(){var e;return Object(re.a)(this,n),(e=t.call(this)).moveList=Object(o.createRef)(),e}return Object(ie.a)(n,[{key:"componentDidUpdate",value:function(e){if(this.props.moves){var t=e.moves||[];this.props.moves.length!==t.length&&this.moveList&&this.moveList.current&&(this.moveList.current.scrollTop=this.moveList.current.scrollHeight)}}},{key:"componentDidMount",value:function(){this.moveList&&this.moveList.current&&(this.moveList.current.scrollTop=this.moveList.current.scrollHeight)}},{key:"render",value:function(){var e=this.props,t=e.result,n=e.moves,a=e.currentIndex,r=e.onChangeMove,i=e.startAtMove,o=e.endAtMove,l=e.fenMove;return n?c.a.createElement("div",{className:"pgnViewerMoveList",ref:this.moveList},!l&&n.map((function(e,t){return t<i-1||t>o-1?null:c.a.createElement(_t,{onChangeMove:r,key:t,currentIndex:a,move:e,moveIndex:t+1})})),l&&c.a.createElement("div",null,l%2===0?"White":"Black"," to move"),c.a.createElement("span",{className:"bold"},t)):null}}]),n}(c.a.Component),yt={base:{display:"flex",justifyContent:"center",flexDirection:"row"},wrapper:{width:500,background:"white"}},kt=function(e){var t,n=JSON.parse(JSON.stringify(yt)),a=Object(y.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.area][r.stylePair[0]]=r.stylePair[1]}}catch(i){a.e(i)}finally{a.f()}return n},wt=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e))._updateDimensions=function(){a.setState({windowWidth:window&&window.innerWidth})},a._makeIncreasingMoves=function(e){for(var t=e.numberOfMoves,n=e.reset,r=a.state,i=r.chess,o=r.moves,c=r.index,l=n?0:new Number(c),s=0;s<t;s++)i.move(o[l]),l++;a.setState({chess:i,index:l})},a._handleNextMove=function(){var e=a.state,t=e.moves,n=e.chess,r=e.index,i=e.endAtMove,o=new Number(r);if(o>=t.length||r===i)return a._handleReset();n.move(t[o]),o++,a.setState({chess:n,index:o})},a._handlePreviousMove=function(){var e=a.state,t=e.chess,n=e.index,r=e.startAtMove,i=new Number(n);i<=0||n===r||(t.undo(),i--,a.setState({chess:t,index:i}))},a._handleReset=function(){var e=a.state,t=e.chess,n=e.startAtMove;t.reset(),n?a._makeIncreasingMoves({numberOfMoves:n,reset:!0}):a.setState({chess:t,index:0})},a._handleLastMove=function(){var e=a.state,t=e.moves,n=e.index,r=e.endAtMove;if(!(n>=t.length||n===r)){var i=r?r-n:t.length-n;a._makeIncreasingMoves({numberOfMoves:i})}},a._handleFlipBoard=function(){a.setState({orientation:"w"===a.state.orientation?"b":"w"})},a._handlePlay=function(){var e=a.state,t=e.moves,n=(e.chess,e.index),r=e.isPlaying;r||(n>=t.length&&a._handleReset(),a._handleNextMove()),a.setState({isPlaying:!r})},a._handleChangeMove=function(e){var t=a.state,n=t.chess,r=t.index;if(e!==r)if(e<r){for(var i=0;i<r-e;i++)n.undo();a.setState({chess:n,index:e})}else{var o=e-r;a._makeIncreasingMoves({numberOfMoves:o})}},a._handleDownload=function(){var e=a.state,t=e.headerInfo,n=e.fenMove,r=e.chess,i=document.createElement("a"),o=n?r.fen():a.props.pgnInformation,c=n?"txt":"pgn",l=new Blob([o],{type:"text/plain"}),s=t.White.split(" ").pop(),u=t.Black.split(" ").pop();i.href=URL.createObjectURL(l),i.download="".concat(s,"_vs_").concat(u,"_").concat(t.Date,".").concat(c),i.click()},a.state={chess:null,moves:null,index:null,headerInfo:null,isPlaying:null,isLoaded:null,startAtMove:null,fenMove:null,endAtMove:null,windowWidth:window&&window.innerWidth,orientation:a.props.orientation},a}return Object(ie.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.pgnInformation,t=new ct.a,n=0,a=e.trim().replace(/\[/g,"");if(!a)return null;var r=a.split("]").map((function(e){return e.trim()}));t.load_pgn(e);for(var i=0;i<r.length-2;i++){var o=r[i].split(' "');o[1]?t.header(o[0].replace(/\"/g,""),o[1].replace(/\"/g,"")):t.header(o[0].replace(/\"/g,""))}var c=t.header(),l=t.history();t.reset();var s=2*c.StartAtMove-1,u=2*c.EndAtMove,m=c.Fen&&c.Fen.split(""),d=m&&"b"===m.pop(),f=m&&m.join(""),h=d?2*f:2*f-1;if(s)for(var v=0;v<s;v++)t.move(l[n]),n++;else if(m)for(var p=0;p<h;p++)t.move(l[n]),n++;if(this.props.startAtLatest)for(var b=0;b<l.length;b++)t.move(l[n]),n++;this.setState({chess:t,moves:l,index:n,startAtMove:s,endAtMove:u,fenMove:m?h:null,headerInfo:c}),this._updateDimensions(),window.addEventListener("resize",this._updateDimensions),window.addEventListener("load",this._updateDimensions),window.addEventListener("orientationchange",this._updateDimensions)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.isPlaying?this.timeoutID=setTimeout((function(){return e._handleNextMove()}),1e3):clearTimeout(this.timeoutID)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._updateDimensions),window.removeEventListener("load",this._updateDimensions),window.removeEventListener("orientationchange",this._updateDimensions)}},{key:"render",value:function(){var e=this.props,t=e.blackSquareColor,n=e.whiteSquareColor,a=e.width,r=e.backgroundColor,i=e.showCoordinates,o=this.state,l=o.chess,s=o.moves,u=o.index,m=o.headerInfo,d=o.orientation,f=o.isPlaying,h=o.windowWidth,v=o.startAtMove,p=o.endAtMove,b=o.fenMove,g=function(e){var t=e.windowWidth,n=e.backgroundColor,a=e.defaultWidth,r=t&&t<768,i=r?"100%":a,o=r?"column":"row",c=[];c.push({area:"base",stylePair:["width",i]}),c.push({area:"base",stylePair:["flexDirection",o]}),c.push({area:"wrapper",stylePair:["width",i]}),c.push({area:"wrapper",stylePair:["background",n]});var l=kt(c);return{width:i,isMobile:r,baseStyles:l.base,wrapperStyles:l.wrapper}}({windowWidth:h,backgroundColor:r,defaultWidth:a}),E=(g.baseStyles,g.wrapperStyles),_=g.isMobile,j=g.width,y=function(e,t){var n=(t-1)%2===0,a=null;if(e&&t)switch(e[t-1]){case"O-O":a=n?"g1":"g8";break;case"O-O-O":a=n?"c1":"c8";break;default:a=e[t-1].match(/[a-z][1-8]/gm)[0]}return a}(s,u);return c.a.createElement("div",{className:"pgnWrapper",style:E},m&&c.a.createElement(mt,{headerInfo:m,width:j}),c.a.createElement("div",{className:"pgnViewerMain",onWheel:function(e){e.stopPropagation()}},c.a.createElement(st.a,{blackSquareColour:t,fen:l&&l.fen()||"start",orientation:d,showCoordinates:i,activeSquare:y,style:{border:"2px solid lightgrey"},whiteSquareColour:n,width:_?j:2/3*j,height:_?j:2/3*j}),!_&&c.a.createElement(jt,{onChangeMove:this._handleChangeMove,currentIndex:u,moves:s,width:1/3*j,startAtMove:v,endAtMove:p,fenMove:b,result:m?m.Result:null})),c.a.createElement(Et,{isPlaying:f,onPlay:this._handlePlay,onDownload:this._handleDownload,onFlipBoard:this._handleFlipBoard,onNextMove:this._handleNextMove,onPreviousMove:this._handlePreviousMove,onReset:this._handleReset,fenMove:b,onLastMove:this._handleLastMove,width:j}),_&&c.a.createElement(jt,{onChangeMove:this._handleChangeMove,currentIndex:u,moves:s,width:j,startAtMove:v,endAtMove:p,fenMove:b,result:m?m.Result:null}))}}]),n}(c.a.Component),Ot=function(e){Object(rt.a)(n,e);var t=Object(it.a)(n);function n(e){var a;return Object(re.a)(this,n),(a=t.call(this,e)).makeViewer=function(e){var t=e.pgnInformation,n=a.props,r=n.blackSquareColor,i=n.whiteSquareColor,o=n.orientation,l=n.width,s=n.backgroundColor,u=n.showCoordinates,m=n.startAtLatest;return c.a.createElement(wt,{pgnInformation:t,blackSquareColor:r,whiteSquareColor:i,width:l,orientation:o,backgroundColor:s,showCoordinates:u,startAtLatest:m})},a.createInnerHtml=function(){return{__html:a.props.children}},a.additionalHTMLModification=function(){var e=a.props,t=e.nodeToModify,n=e.nodeModification,r=s.a.findDOMNode(Object(at.a)(a)).querySelectorAll(t);if("function"!==typeof n||!t)return null;for(var i=0;i<r.length;i++)n(r[i])},a.setPgn=function(e){for(var t=s.a.findDOMNode(Object(at.a)(a)).querySelectorAll("pgn"),n=0;n<t.length;n++)s.a.render(a.makeViewer({pgnInformation:e[n]}),t[n])},a.state={pgns:null},a}return Object(ie.a)(n,[{key:"componentDidMount",value:function(){for(var e=s.a.findDOMNode(this).querySelectorAll("pgn"),t=[],n=0;n<e.length;n++)t.push(e[n].innerHTML.slice(0));this.setState({pgns:t}),this.additionalHTMLModification(),this.setPgn(t)}},{key:"componentDidUpdate",value:function(){this.additionalHTMLModification(),this.setPgn(this.state.pgns)}},{key:"render",value:function(){var e=this.props,t=e.innerHTML,n=e.children;return c.a.createElement("div",null,t&&c.a.createElement("div",{dangerouslySetInnerHTML:this.createInnerHtml()}),!t&&c.a.createElement("div",null,this.makeViewer({pgnInformation:n})))}}]),n}(c.a.Component);Ot.defaultProps={backgroundColor:"#e1e5ed",blackSquareColor:"steelblue",orientation:"w",showCoordinates:!0,whiteSquareColor:"aliceblue",width:600};var Nt=Ot,Ct=n(146),St=n.n(Ct),xt={timeout:1,result:1,agreed:1},Lt={insufficient:1,agreed:1,repetition:1},Mt={win:1},Rt=new et.a({queue:!0});function Pt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){Rt.dispatch(Rt.getPlayer,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(e){return At.apply(this,arguments)}function At(){return(At=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){Rt.dispatch(Rt.getClub,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){Rt.dispatch(Rt.getTeamLiveMatchBoard,(function(t,n){if(n)return a(n);e(t.body)}),[t,n])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){Rt.dispatch(Rt.getTeamLiveMatch,(function(t,a){if(a)return n(a);e(t.body)}),[t])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e,t){if(e.chessCom){var n=e.chessCom.toLowerCase().split("/").pop(),a=t.url.toLowerCase().split("/").pop();if(n&&a&&n===a)return!0}var r,i=e.name||e.firstName;if(i&&function(e,t){var n=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(!n||!a)return 1;if(n===a)return 0;if(n.length>6){if(a.startsWith(n))return 0;if(a.endsWith(n))return 0;if(n.startsWith(a))return 0;if(n.endsWith(a))return 0}return F()(n,a)/n.length}(null===i||void 0===i?void 0:i.toLowerCase().replace("chess","").replace("club",""),null===(r=t.name)||void 0===r?void 0:r.replace("chess","").replace("club",""))<.45)return!0;return!1}function Gt(e){var t,n,a=function(e,t){var n=Object(o.useState)(e),a=Object(h.a)(n,2),r=a[0],i=a[1];return Object(o.useDebugValue)("".concat(t,": ").concat(r)),[r,i]}(20,"boards"),r=Object(h.a)(a,2),i=r[0],l=r[1];Object(o.useEffect)((function(){e.match.players?l("string"===typeof e.match.players?parseInt(e.match.players):e.match.players):e.enforceBoards&&l(e.enforceBoards)}),[e.enforceBoards,l,e.match.players]);var s=Object(o.useCallback)((function(){return e.match.games?(Array.isArray(e.match.games)?e.match.games:Object.values(e.match.games)).reduce((function(e,t,n,a){var r,i,o,c,l,s,u=[null===(r=t.w)||void 0===r?void 0:r.username.toLowerCase(),null===(i=t.b)||void 0===i?void 0:i.username.toLowerCase()],m=e.findIndex((function(e){var t,n,a=[null===(t=e.games[0].white)||void 0===t?void 0:t.username.toLowerCase(),null===(n=e.games[0].black)||void 0===n?void 0:n.username.toLowerCase()];return u[0]===a[0]&&u[1]===a[1]||u[0]===a[1]&&u[1]===a[0]})),d=null===(o=t.w)||void 0===o?void 0:o.username.toLowerCase(),f=null===(c=t.b)||void 0===c?void 0:c.username.toLowerCase(),h={white:t.w,black:t.b,pgn:t.pgn,team:(null===(l=t.w)||void 0===l?void 0:l.team)===(null===(s=a[0].w)||void 0===s?void 0:s.team)?0:1};if(-1!==m){var v,p;if(e[m].games.push(h),d in e[m].boardScores)e[m].boardScores[d]+=null===(v=t.w)||void 0===v?void 0:v.result;if(f in e[m].boardScores)e[m].boardScores[f]+=null===(p=t.b)||void 0===p?void 0:p.result}else{var b,g,E;e.push({boardScores:(E={},Object(j.a)(E,d,null===(b=t.w)||void 0===b?void 0:b.result),Object(j.a)(E,f,null===(g=t.b)||void 0===g?void 0:g.result),E),games:[h]})}return e}),[]):[]}),[e.match.games]),u=Object(o.useReducer)((function(e,t){if(Array.isArray(t))return t;var n=e.slice(0);return n[t.board-1]={boardScores:t.boardScores,games:Array.isArray(t.games)?t.games:Object.values(t.games)},n}),[]),m=Object(h.a)(u,2),p=m[0],b=m[1];Object(o.useEffect)((function(){b(s())}),[b,s]);var g=Object(o.useState)(0),_=Object(h.a)(g,2),k=_[0],w=_[1],N=qe((function(){var t,n;return e.teams.length?e.teams:e.match.games&&e.match.games[0]?[{name:null===(t=e.match.games[0].w)||void 0===t?void 0:t.team},{name:null===(n=e.match.games[0].b)||void 0===n?void 0:n.team}]:[]}),[e.teams,e.match.games],"teams"),C=qe((function(){var t={};if(!e.match.teams)return t;for(var n=0;n<e.match.teams.length;n++){var a,r=e.match.teams[n],i=Object(y.a)(r.players);try{for(i.s();!(a=i.n()).done;){t[a.value.username.toLowerCase()]=n}}catch(o){i.e(o)}finally{i.f()}}return t}),[e.match.teams],"teamDict"),S=qe((function(){return e.match.isFinished}),[e.match],"matchFinished"),x=Object(o.useReducer)((function(e,t){var n=e.slice(0);return n[t.board]=t.set,n}),[]),L=Object(h.a)(x,2),M=L[0],R=L[1],P=Object(o.useState)(0),B=Object(h.a)(P,2),T=B[0],A=B[1],I=Object(o.useCallback)(Object(f.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.match.link){t.next=2;break}return t.abrupt("return");case 2:if(n=e.match.link.match(Pe)){t.next=5;break}return t.abrupt("return",console.error("Invalid URL: ",e.match.link));case 5:if(a=Number(n[1])){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,Ft(a).catch((function(e){return e&&console.error(e),{}})).then((function(t){if(t&&t.teams){var n,r,i=Object.values(t.teams);if(((null===(n=e.match.w)||void 0===n?void 0:n.chessCom)||(null===(r=e.match.b)||void 0===r?void 0:r.chessCom))&&(Ut(e.match.w,i[1])||Ut(e.match.b,i[0]))&&i.reverse(),t.start_time&&Date.now()<1e3*t.start_time||"finished"===t.status){w(a);var o=e.match.scores;return e.match.endTime||(o=i.map((function(e){return e.score}))),e.setMatch(Object.assign(e.match,{bodyStatus:t.status,startTime:1e3*t.start_time,endTime:t.end_time?1e3*t.end_time:void 0,players:t.boards,teams:i,scores:o})),Promise.reject()}}return t})).then((function(t){pe({url:"/tournament/"+e.match.tournamentId+"/scrapeChessComTeamPage",params:{url:e.match.link}}).then((function(n){var r,i;if(!n.Teams)throw null;var o=Object.values(n.Teams);if(((null===(r=e.match.w)||void 0===r?void 0:r.chessCom)||(null===(i=e.match.b)||void 0===i?void 0:i.chessCom))&&(Ut(e.match.w,o[1])||Ut(e.match.b,o[0]))&&o.reverse(),!n["Registration Open"]&&!n["Start Time"]&&!n["Finished On"])throw null;var c,l,s=Object.values(t.teams||{});!(t.teams&&s[0]&&s[0].players.length)||o[0]&&o[0].players.length||(o[0].players=(null===(c=s.find((function(e){return e["@id"]===o[0]["@id"]})))||void 0===c?void 0:c.players)||[],o[1].players=(null===(l=s.find((function(e){return e["@id"]===o[1]["@id"]})))||void 0===l?void 0:l.players)||[]);w(a);var u=e.match.scores;e.match.endTime||(u=o.map((function(e){return e.score})));var m=n["Players per Team"];e.setMatch(Object.assign(e.match,{registrationTime:n["Registration Open"]?new Date(n["Registration Open"]).valueOf():void 0,metaStatus:n.Status,startTime:t&&t.start_time?1e3*t.start_time:n["Start Time"]?new Date(n["Start Time"]).valueOf():void 0,endTime:n["Finished On"]?new Date(n["Finished On"]).valueOf():void 0,players:"1-10000"===m?void 0:m,teams:o,scores:u}))})).catch((function(t){t&&console.error(t),e.setMatch(Object.assign(e.match,{aborted:!0})),e.setFinished(e.match.id)}))})).catch((function(e){e&&console.error(e)}));case 10:case"end":return t.stop()}}),t)}))),[k,e.setMatch,e.match,w,e.setFinished]);Object(o.useEffect)((function(){k||(e.fetch&&I(),e.match.isFinished&&e.match.games||e.expanded&&I())}),[I,e.expanded,e.fetch,k,e.match]);var D=Object(o.useCallback)(Object(f.a)(d.a.mark((function t(){var n,a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k){t.next=2;break}return t.abrupt("return");case 2:n=d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M[n]){t.next=2;break}return t.abrupt("return","continue");case 2:if(a=It(k,n).then((function(t){b({games:t.games.map((function(t,a){return t.pgn=Vt(t,C,e.teams.map((function(e){return e.name})),e.match.round,n,a+1),t})),boardScores:t.board_scores,board:n});var a=t.games[t.games.length-1];if(!a)throw new Error("No game data given");return t.games.length>T&&A(t.games.length),a.end_time&&R({board:n,set:!0}),!0})).catch((function(e){if(e.status)switch(e.status){case 429:return}if(1!==n||p.length>2){if(i<n)return!0;if(2!==n||p.length)return l(n-1),!1;l(n-2)}return!0})),t.t0=!e.enforceBoards&&!e.match.players,!t.t0){t.next=9;break}return t.next=7,a;case 7:t.t1=t.sent,t.t0=!1===t.t1;case 9:if(!t.t0){t.next=11;break}return t.abrupt("return","break");case 11:case"end":return t.stop()}}),t)})),a=1;case 4:if(!(a<i+1)){t.next=15;break}return t.delegateYield(n(a),"t0",6);case 6:r=t.t0,t.t1=r,t.next="continue"===t.t1?10:"break"===t.t1?11:12;break;case 10:return t.abrupt("continue",12);case 11:return t.abrupt("break",15);case 12:a++,t.next=4;break;case 15:case"end":return t.stop()}}),t)}))),[k,i,M,p.length,T,A,e.enforceBoards,e.match.players,e.teams,C]),F=Object(o.useCallback)(Object(f.a)(d.a.mark((function t(){var n,a,r,i,o,c,l,s,u,m,f,h,v,b,g,E,_,j,y;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.match,t.next=3,St.a.hash([null===(n=c.w)||void 0===n?void 0:n.id,null===(a=c.b)||void 0===a?void 0:a.id,c.tournamentId,e.round].join("."),10);case 3:l=t.sent,s=[],u=0;case 6:if(!(u<p.length)){t.next=13;break}if(p[u]&&p[u].games){t.next=9;break}return t.abrupt("continue",10);case 9:for(m=0;m<p[u].games.length;m++)s.push({board:u,game:m+1,pgn:p[u].games[m].pgn,w:{username:null===(f=p[u].games[m].white)||void 0===f?void 0:f.username,result:zt(null===(h=p[u].games[m].white)||void 0===h?void 0:h.result),team:null===(v=c.teams[C[null===(b=p[u].games[m].white)||void 0===b?void 0:b.username.toLowerCase()]])||void 0===v?void 0:v.name},b:{username:null===(g=p[u].games[m].black)||void 0===g?void 0:g.username,result:zt(null===(E=p[u].games[m].black)||void 0===E?void 0:E.result),team:null===(_=c.teams[C[null===(j=p[u].games[m].black)||void 0===j?void 0:j.username.toLowerCase()]])||void 0===_?void 0:_.name}});case 10:u++,t.next=6;break;case 13:return y={idW:null===(r=c.w)||void 0===r?void 0:r.id,idB:null===(i=c.b)||void 0===i?void 0:i.id,tournamentId:c.tournamentId,round:e.round,key:l,fetched:{startTime:c.startTime||c.registrationTime,endTime:c.endTime,scores:(null===(o=c.teams)||void 0===o?void 0:o.map((function(e){return e.score})))||[],isFinished:c.isFinished||c.isConfirmed},games:s},t.next=16,be({url:"/submit/game",data:y,noCatch:!0});case 16:e.setFinished(c.id),e.sync(!1);case 18:case"end":return t.stop()}}),t)}))),[p,e.match,e.round,e.setFinished,C,e.sync]),W=Object(o.useMemo)((function(){return p.filter((function(e){return e&&e})).length}),[p]);Object(o.useEffect)((function(){e.match.aborted?F():i?W>=i&&F():F()}),[e.match.aborted,W,i]),Object(o.useEffect)((function(){if(!S||!p.length||i){var e=setInterval(D,1e3);return function(){return clearInterval(e)}}}),[k,D,S,p.length,i]);var U=Object(o.useCallback)((function(t,n){var a,r,i=t.games,o=t.boardScores,l=i[i.length-1];if(!l)return null;var s=("team"in l?0===l.team:0===C[null===(a=l.white)||void 0===a?void 0:a.username.toLowerCase()])?l.white:l.black,u=("team"in l?0===l.team:1===C[null===(r=l.black)||void 0===r?void 0:r.username.toLowerCase()])?l.black:l.white;return s?[c.a.createElement("div",{key:"usernameW",className:nt.a.username},s.username),c.a.createElement("div",{key:"scoreW",className:nt.a.score},o[s.username.toLowerCase()]),c.a.createElement("a",{key:"board",href:"#".concat(e.id,".").concat(n+1)},"#"+(n+1)),c.a.createElement("div",{key:"scoreB",className:nt.a.score},o[u.username.toLowerCase()]),c.a.createElement("div",{key:"usernameB",className:nt.a.username},u.username)]:[]}),[C,e.id]),G=Object(o.useState)(0),H=Object(h.a)(G,2),z=H[0],V=H[1],q=p.length?{}:{gridTemplateColumns:"1fr"};if(!e.match.games){if(!p.length&&!i)return c.a.createElement("div",null,"Match has not yet started!");if(!p.filter((function(e){return e&&e.games.length})).length&&!i)return c.a.createElement("div",null,"Still waiting for data from Chess.com. Check back later.");if(!p.length)return c.a.createElement("div",{className:nt.a.loading},c.a.createElement(O.a,null));if(!e.expanded)return null}return c.a.createElement("div",{className:nt.a.container,style:q},c.a.createElement("div",{className:nt.a.results},c.a.createElement("table",{className:"download-table"},c.a.createElement("thead",null,e.match.games||Object.keys(C).length?null:c.a.createElement("tr",null,c.a.createElement("th",{colSpan:5},c.a.createElement(E.C,null)," Couldn't fetch player-team identifying data from Chess.com for this match",c.a.createElement("br",null),"Check back later or contact a dev if this problem persists.")),c.a.createElement("tr",null,c.a.createElement("th",{style:{width:"40%"}},(null===(t=N[0])||void 0===t?void 0:t.name)?N[0].name:""),c.a.createElement("th",{style:{width:"5%"}}),c.a.createElement("th",{style:{width:"10%"}}," "),c.a.createElement("th",{style:{width:"5%"}}),c.a.createElement("th",{style:{width:"40%"}},(null===(n=N[1])||void 0===n?void 0:n.name)?N[1].name:""))),c.a.createElement("tbody",null,p.map((function(e,t){var n;return c.a.createElement("tr",{key:["row",t].join(".")},null===(n=U(e,t))||void 0===n?void 0:n.map((function(e,n){return c.a.createElement("td",{key:["cell",t,n].join(".")},e)})))}))))),!1!==e.showButtons?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:[nt.a.button,"button"].join(" "),onClick:function(){return e.sync()}},c.a.createElement(E.bb,null),"Sync"),c.a.createElement(v.b,{to:["","g",e.match.id].join("/"),className:[nt.a.button,"button"].join(" ")},c.a.createElement(E.o,null),"Analysis")):null,e.showBoards?p.map((function(t,n){return c.a.createElement(Ht,{id:e.id,key:["game",n].join("."),pairing:t,teamDict:C,teams:e.teams.map((function(e){return e.name})),round:e.round,board:n+1,focused:z===n,setFocused:function(){return V(n)}})})):null)}function Ht(e){var t,n=Object(o.useMemo)((function(){return Object.entries(e.pairing.boardScores)}),[e.pairing.boardScores]),a=Object(o.useState)(e.pairing.games.length-1),r=Object(h.a)(a,2),i=r[0],l=r[1],s=Object(o.useRef)(null),u=Object(o.useMemo)((function(){return e.pairing.games.map((function(e,t){return c.a.createElement(qt,{key:w()("singleGame",t),g:e})}))}),[e.pairing.games]),m=e.pairing.games[i],d=m&&e.teamDict[null===(t=m.black)||void 0===t?void 0:t.username.toLowerCase()]?n.reverse():n;Object(o.useEffect)((function(){window.dispatchEvent(new Event("resize"))}),[]);var f=Object(o.useMemo)((function(){var e=s.current;return e?Array.from(e.querySelectorAll(".visible .pgnViewerFooter > div")):[]}),[s]),v=(Object(o.useCallback)((function(e){var t=e;if(t.deltaY<0){var n=f[1];if(!n)return;n.click(),t.preventDefault()}else if(t.deltaY>0){var a=f[2];if(!a)return;a.click(),t.preventDefault()}}),[f]),Object(o.useCallback)((function(e){switch(e.keyCode){case 37:var t=f[1];if(!t)break;t.click(),e.preventDefault();break;case 39:var n=f[2];if(!n)break;n.click(),e.preventDefault();break;case 38:var a=f[0];if(!a)break;a.click(),e.preventDefault();break;case 40:var r=f[3];if(!r)break;r.click(),e.preventDefault();break;case 32:var i=f[4];if(!i)break;i.click(),s.current&&s.current.scrollIntoView({behavior:"smooth"}),e.preventDefault();break;case 70:var o=f[5];if(!o)break;o.click();break;case 68:var c=f[6];if(!c)break;c.click(),e.preventDefault()}}),[s,f]));Object(o.useEffect)((function(){if(e.focused)return document.addEventListener("keydown",v),function(){return document.removeEventListener("keydown",v)}}),[e.focused,v]);var p=Object(o.useCallback)((function(){s.current&&e.setFocused()}),[s,e.setFocused]);return i<0?null:c.a.createElement("div",{id:[e.id,e.board].join("."),className:nt.a.wrapper,onClick:p,ref:s},c.a.createElement("div",{className:nt.a.boardLabel},c.a.createElement(E.c,{className:[nt.a.pan,i?nt.a.active:nt.a.null].join(" "),onClick:function(){return i?l(i-1):null}}),c.a.createElement("span",{className:"bold"},d[0][1]),c.a.createElement("a",{href:"https://www.chess.com/live/game/"+m.url.split("/").pop(),target:"_blank",rel:"noopener noreferrer"},c.a.createElement(E.o,null)),c.a.createElement("span",{className:"bold"},d[1][1]),c.a.createElement(E.d,{className:[nt.a.pan,i===e.pairing.games.length-1?nt.a.null:nt.a.active].join(" "),onClick:function(){return i<e.pairing.games.length-1?l(i+1):null}})),u.map((function(e,t){return c.a.createElement("div",{key:[nt.a.gameViewWrapper,t].join("."),className:[nt.a.gameViewWrapper,t===i?"visible":"hidden"].join(" ")},e)})))}function zt(e){return Object.keys(Mt).includes(e)?1:Object.keys(Lt).includes(e)?.5:(Object.keys(xt).includes(e),0)}function Vt(e,t,n,a,r,i){var o,c=t[null===(o=e.black)||void 0===o?void 0:o.username.toLowerCase()];return['[WhiteTeam "'.concat(c?n[0]:n[1],'"]'),'[BlackTeam "'.concat(c?n[1]:n[0],'"]'),'[Board "'.concat(r,'"]'),'[Game "'.concat(i+1,'"]'),e.pgn.replace('[Round "-"]','[Round "'.concat(a,'"]'))].join("\n")}function qt(e){var t=e.g,n=Object(o.useState)(""),a=Object(h.a)(n,2),r=a[0],i=a[1];return Object(o.useEffect)((function(){i(""),t.pgn&&i(t.pgn)}),[t,i]),r?c.a.createElement(Nt,{innerHTML:!1,showCoordinates:!0,width:"100%",startAtLatest:!0},r):null}function Kt(e){var t=e.playerDict,n=e.results,a=e.settings,r=Object(o.useReducer)((function(e,t){var n=Object.assign({},e);if(null===t.scored)return n[t.id]=null,n;var a=t;return n[t.id]=new Ze(a,a.round),n}),{}),i=Object(h.a)(r,2),c=i[0],l=i[1],s=Object(o.useMemo)((function(){return Object.values(c)}),[c]),u=Object(o.useCallback)(function(){var e=Object(f.a)(d.a.mark((function e(n,a){var r,i,o,c,s,u,m,f,v,p,b,g,E,_,j,k,w,O,N,C,S,x,L,M;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(y.a)(n),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=18;break}if(v=i.value,p=v.id,b=v.idW,g=v.idB,E=v.fetched,v.board,v.pool,_=t.get(b.trim()),j=t.get(g.trim()),_||j){e.next=11;break}return l({id:p,scored:null}),e.abrupt("continue",16);case 11:k=Yt(v,v.linkSource,v.type),w=Object(h.a)(k,2),O=w[0],N=w[1],C=v.fetched||{},S=C.startTime,x=C.endTime,L=Boolean((null===_||void 0===_||null===(o=_.histories[a])||void 0===o?void 0:o.match)||(null===j||void 0===j||null===(c=j.histories[a])||void 0===c?void 0:c.match)),M=Object.assign({},v,{teamID:N,link:O,w:_,b:j,scored:L,startTime:S,endTime:x,scores:(null===_||void 0===_||null===(s=_.histories[a])||void 0===s?void 0:s.game)||(null===j||void 0===j||null===(u=j.histories[a])||void 0===u?void 0:u.game)?[(null===_||void 0===_?void 0:_.histories)?null===_||void 0===_||null===(m=_.histories[a])||void 0===m?void 0:m.game:null,(null===j||void 0===j?void 0:j.histories)?null===j||void 0===j||null===(f=j.histories[a])||void 0===f?void 0:f.game:null]:(null===E||void 0===E?void 0:E.scores)||[null,null],bodyStatus:(null===E||void 0===E?void 0:E.isFinished)?"finished":""}),l(M);case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}(),[l,t]),m=Object(o.useMemo)((function(){return"chessCom"===a.source&&"team"===a.competitors?Rt.clearQueue.bind(Rt):function(){}}),[a]),v=Object(o.useState)(null),p=Object(h.a)(v,2),b=p[0],g=p[1],E=Object(o.useReducer)((function(e,t){var n=e.slice(0);return n.push(t),n}),[]),_=Object(h.a)(E,2),j=_[0],k=_[1],w=Object(o.useMemo)((function(){var e=Object.values(c).length;return!!e&&(!!n.length&&!(e<n.length))}),[c,n]),O=Object(o.useCallback)((function(){if(w){if(b&&!j.includes(b.id))return g(b);var e=function(e){for(var t,n,a=e.length;0!==a;)n=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[n],e[n]=t;return e}(Object.values(c)).find((function(e){return!!e&&(!!e.link&&(!j.includes(e.id)&&(!e.startTime&&!e.endTime||(!(!e.games||Array.isArray(e.games))||(e.endTime?!(e.scores&&!e.scores.every((function(e){return!e})))||Math.random()<.01:!e.startTime||(Date.now()>e.startTime?Math.random()<.25:Math.random()<.01))))))}));g(e||null)}}),[c,b,g,j,w]);return{matches:s,matchDict:c,setMatch:l,populatematchDict:u,fetchedMatch:b,fetchNext:O,hasFetched:k,beforeSetResults:m}}function Yt(e,t,n){if("0aeed607"===e.id&&console.log(t,n),"chessCom"===t&&"team"===n){var a,r=null===(a=e.link)||void 0===a?void 0:a.match(Pe);return r?["https://www.chess.com/club/matches/live/"+r[1].trim(),r[1]]:[void 0,void 0]}return[void 0,void 0]}function Jt(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)("all"),i=Object(h.a)(r,2),c=i[0],l=i[1],s=Object(o.useReducer)((function(e,t){if(Array.isArray(t))return t;var n=e.slice(0)||[];return e.includes(t)?n.splice(n.indexOf(t),1):n.push(t),n}),[decodeURIComponent(window.location.hash.slice(1).split(".").slice(0,2).join("."))]),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(o.useState)(!1),v=Object(h.a)(f,2),p=v[0],b=v[1];return Object(o.useEffect)((function(){if(!p&&window.location.hash){var e=window.location.hash.slice(1),t=document.getElementById(e);t&&(t.scrollIntoView({behavior:"auto"}),b(!0))}})),{searched:n,setSearched:a,expanded:m,setExpanded:d,visible:c,setVisible:l}}function Qt(e){var t,n,a=Object(o.createRef)(),r=Object(o.useState)(null),i=Object(h.a)(r,2),l=i[0],s=i[1],u=Object(o.useState)(!1),m=Object(h.a)(u,2),d=m[0];m[1];Object(o.useEffect)((function(){d&&a.current&&a.current.focus()}),[a,d]);var f=Object(o.useCallback)((function(){l&&e.onSubmit(l)}),[l,e.onSubmit]),v=Object(o.useCallback)((function(e){switch(e.keyCode){case 13:l&&(e.target.value="",f()),e.preventDefault()}}),[l,f]),p=Object(o.useCallback)((function(t){var n=t.nativeEvent,a=t.target,r=a.value,i=r.length,o=e.options.filter((function(t){return e.convert(t).toLowerCase().startsWith(r.toLowerCase())}));if(e.onChange(o),n.data)if(r.trim()){var c=o[0];if(s(c),c){var l=e.convert(c);a.value=l,a.select(),a.setSelectionRange(i,l.length,"forward")}}else s(null)}),[e.options]);return c.a.createElement("div",{className:null===(t=e.styles)||void 0===t?void 0:t.scoreSection},c.a.createElement("input",{type:"text",className:[null===(n=e.styles)||void 0===n?void 0:n.input].join(" "),name:"value",required:!0,placeholder:e.placeholder||"Search",onInput:p,onKeyDown:v,onSubmit:f,autoComplete:"off"}))}function Xt(e){var t=e.players,n=e.settings,a=e.status,r=e.state,i=e.rProps,l=(e.direction,Xe(n).getName),s=Object(o.useState)([]),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(o.useMemo)((function(){return c.a.createElement("section",{className:Oe.a.container},c.a.createElement("div",{className:Oe.a.searchBarDiv},c.a.createElement("div",{className:Oe.a.searchBar},c.a.createElement(E.W,null),c.a.createElement(Qt,{onChange:d,onSubmit:Promise.resolve,action:"",options:t,convert:l,styles:Oe.a,placeholder:"Search"}))))}),[d,t,l]),v=function(e){var t=e.status,n=Object(o.useState)([]),a=Object(h.a)(n,2),r=a[0],i=a[1];return{results:r,updateResults:Object(o.useCallback)((function(){if(t.id&&t.round)return pe({url:"/tournament/"+t.id+"/getPairings",params:{round:null,withResults:!0}}).then(i)}),[i,t.id,t.round])}}({status:a}),b=v.results,g=v.updateResults;if(Object(o.useEffect)((function(){("knockout"===n.pairingSystem||a.systems.some((function(e){return"knockout"===e.system})))&&g()}),[g,n,a]),"final"===i.match.params.round)return c.a.createElement(p.a,{push:!0,to:{pathname:(i.match.url+(i.match.url.endsWith("/")?"":"/")).split("/").slice(0,-2).join("/")+"/"+n.totalRounds,state:i.history.location.state}});if("individual"===i.match.params.round)return c.a.createElement(Ke,{status:a});var _=parseInt(i.match.params.round);return isNaN(_)||_<0||_>n.totalRounds?null:(a.systems.length||a.systems.push({from:1,to:a.round+1,system:n.pairingSystem}),c.a.createElement(c.a.Fragment,null,a.systems.slice(0).reverse().map((function(e,i,o){var l=e.from,s=e.to,u=e.system,d=e.poolNames;if("knockout"===u)return c.a.createElement(Qe,Object.assign({key:w()("knockout",i+1)},{status:a,settings:n},{stage:i+1,start:l,finish:s-1,results:b.filter((function(e){return!(e.round<l)&&!(e.round>s)})),poolNames:d}));var h=t.reduce((function(e,t){var n=t.pool||0;return e[n]||(e[n]=0),e[n]++,e}),[]);return c.a.createElement(c.a.Fragment,null,o.findIndex((function(e){return"knockout"!==e.system}))===i?f:null,h.map((function(e,i){return e?c.a.createElement(He,Object.assign({key:w()("standings",i),pool:i,start:l,finish:s-1},{status:a,players:t,settings:n,state:r,round:_,searched:m})):null})))}))))}var Zt=n(12),$t=n.n(Zt);function en(e){var t;return c.a.createElement("div",{className:[$t.a.logo,null===(t=e.classNames)||void 0===t?void 0:t.logo].join(" ")},c.a.createElement("img",{className:$t.a.staticLogo,src:"/favicon.png",alt:"swiss-logo.png"}))}function tn(e){var t,n=Object(o.useState)(e.mode),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useState)(""),s=Object(h.a)(l,2),u=s[0],m=s[1],v=e.setSession,b=Object(o.useState)(""),g=Object(h.a)(b,2),_=g[0],j=g[1],y=Object(o.useCallback)(function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.set("sessionID",t);case 2:v(t),setTimeout((function(){return j("/me")}),2e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,j]);Object(o.useEffect)((function(){"register"!==r&&"login"!==r&&"reset/password"!==r||window.history.pushState("",document.title,"/"+r+window.location.search)}),[r]);var k=Object(o.useCallback)((function(e){ge(e).then(y).catch((function(e){e&&e.response&&e.response.data&&m(e.response.data),console.error(e)}))}),[m,y]),w=Object(o.useContext)(I),O=Object(o.useCallback)((function(e){var t=e.style;return c.a.createElement("div",{className:$t.a.forgottenContainer,style:t},c.a.createElement("div",{className:["input",$t.a.forgotten].join(" "),onClick:function(){return i("reminder")}},"username reminder"),c.a.createElement("div",{className:["input",$t.a.forgotten].join(" "),onClick:function(){return i("reset")}},"password reset"))}),[i]),N=Object(o.useCallback)((function(){var t,n,a=Object(o.useState)(""),r=Object(h.a)(a,2),i=r[0],l=r[1],s=null===(t=e.location.search.slice(1).split("&").find((function(e){return e.startsWith("code=")})))||void 0===t?void 0:t.slice("code=".length);return Object(o.useEffect)((function(){s&&pe({url:"exchangeSession",params:{sid:s}}).then(l)}),[s]),s?c.a.createElement("form",{className:$t.a.form,method:"POST",action:xe.a.resolve(me,"triggerPasswordReset"),onSubmit:function(e){var t=e.target;if(t.password.value!==t.passwordRepeat.value)return w({title:"Password reset",message:"Passwords must match!",type:"error"}),e.preventDefault();ge(e).then((function(){return j("/login")}))}},c.a.createElement("div",{className:["input",$t.a.input,$t.a.text].join(" ")},i),c.a.createElement("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,placeholder:"new password",className:["input",$t.a.input].join(" ")}),c.a.createElement("input",{type:"password",name:"passwordRepeat",required:!0,placeholder:"repeat password",className:["input",$t.a.input].join(" ")}),c.a.createElement("input",{type:"hidden",name:"sid",required:!0,value:null===(n=e.location.search.slice(1).split("&").find((function(e){return e.startsWith("code=")})))||void 0===n?void 0:n.slice("code=".length)}),c.a.createElement("button",{type:"submit",className:["input",$t.a.submit].join(" ")},"RESET PASSWORD")):(j("/login"),null)}),[w,e.location.search,j]),C=Object(o.useMemo)((function(){return c.a.createElement("form",{className:$t.a.form,method:"POST",action:xe.a.resolve(me,"requestPasswordReset"),onSubmit:function(e){return ge(e).then((function(){return w({title:"Password reset",message:"Successfully sent a password reset link to the email on file. Check your inbox!"})}))}},c.a.createElement("div",{className:["input",$t.a.input,$t.a.back].join(" "),onClick:function(){return i("login")}},"BACK"),c.a.createElement("input",{type:"text",name:"username",autoComplete:"username",required:!0,placeholder:"username",className:["input",$t.a.input].join(" ")}),c.a.createElement(O,null),c.a.createElement("button",{type:"submit",className:["input",$t.a.submit].join(" ")},"REQUEST PASSWORD RESET"))}),[i,w]),S=Object(o.useMemo)((function(){return c.a.createElement("form",{className:$t.a.form,method:"POST",action:xe.a.resolve(me,"requestUsernameReminder"),onSubmit:function(e){return ge(e).then((function(){return w({title:"Username reminder",message:"Successfully sent a username reminder. Check your inbox!"})}))}},c.a.createElement("div",{className:["input",$t.a.input,$t.a.back].join(" "),onClick:function(){return i("login")}},"BACK"),c.a.createElement("input",{type:"email",name:"email",autoComplete:"email",required:!0,placeholder:"email",className:["input",$t.a.input].join(" ")}),c.a.createElement(O,null),c.a.createElement("button",{type:"submit",className:["input",$t.a.submit].join(" ")},"REQUEST USERNAME REMINDER"))}),[i]),x=Object(o.useMemo)((function(){return c.a.createElement("form",{className:$t.a.form,method:"POST",onSubmit:k,action:xe.a.resolve(me,"login")},c.a.createElement("input",{type:"text",name:"username",autoComplete:"username",required:!0,placeholder:"username",className:["input",$t.a.input].join(" ")}),c.a.createElement("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,placeholder:"password",className:["input",$t.a.input].join(" ")}),c.a.createElement(O,null),c.a.createElement("button",{type:"submit",className:["input",$t.a.submit].join(" ")},"LOGIN"))}),[k]),L=Object(o.useMemo)((function(){return c.a.createElement("form",{className:$t.a.form,method:"POST",onSubmit:k,action:xe.a.resolve(me,"register")},c.a.createElement("input",{type:"text",minLength:4,name:"username",required:!0,placeholder:"username",className:["input",$t.a.input].join(" ")}),c.a.createElement("input",{type:"password",name:"password",required:!0,placeholder:"password",minLength:8,className:["input",$t.a.input].join(" ")}),c.a.createElement("input",{type:"email",name:"email",autoComplete:"email",required:!0,placeholder:"email",className:["input",$t.a.input].join(" ")}),c.a.createElement("button",{type:"submit",className:["input",$t.a.submit].join(" "),onSubmit:function(e){e.target.parentElement.requestSubmit()}},"REGISTER"))}),[k]),M=Object(o.useMemo)((function(){return c.a.createElement(en,null)}),[]),R=Object(o.useMemo)((function(){return c.a.createElement("div",{className:[$t.a.loginSection,$t.a.initialiseButton].join(" ")},c.a.createElement("div",{className:[$t.a.flip,$t.a.loginButton].join(" "),onClick:function(){i("reset/password"===e.mode?"reset/password":"login"),m("")}},c.a.createElement("div",null,"LOGIN"),c.a.createElement("div",null,Fe()?c.a.createElement(E.e,null):c.a.createElement(E.c,null))),c.a.createElement("div",{className:["container",$t.a.foreground,"register"===r?$t.a.registerForeground:$t.a.loginForeground].join(" ")},M,"register"===r?L:"login"===r?x:"reminder"===r?S:"reset"===r?C:"reset/password"===r?c.a.createElement(N,null):null),c.a.createElement("div",{className:[$t.a.flip,$t.a.registerButton].join(" "),onClick:function(){i("register"),m("")}},c.a.createElement("div",null,"REGISTER"),c.a.createElement("div",null,Fe()?c.a.createElement(E.b,null):c.a.createElement(E.d,null))))}),[r,i,m,x,L,S,C,M,e.mode,N]);return _?("/login"===_&&(i("login"),j("")),c.a.createElement(p.a,{to:_})):c.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},c.a.createElement("div",{className:[$t.a.column].join(" ")},c.a.createElement("div",{className:[$t.a.frame,"container"].join(" ")},R),c.a.createElement("div",{className:$t.a.messageBar},u||"\u200b")))}var nn=n(284),an=n.n(nn),rn=(n(285),n(286),n(287)),on=n.n(rn),cn=n(288),ln=n.n(cn),sn=(n(289),n(290),n(291)),un=n.n(sn),mn=[];function dn(e){var t,n,a,r,i,l,s,u=e.match,m=e.data,d=e.pool,f=Object(o.useState)(u.isLive),p=Object(h.a)(f,2),b=p[0],g=p[1];Object(o.useEffect)((function(){e.expanded&&!b&&g(!0)}),[e.expanded,b,g]);var _=Object(o.useReducer)((function(e,t){return"undefined"===typeof t||t}),!1),j=Object(h.a)(_,2),y=j[0],k=j[1];return u?u.round!==e.round||(u.pool||d)&&u.pool!==d?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("tr",{id:u.id,className:w()(ee.a.row,{odd:e.i%2,even:e.i%2===0,collapsed:e.hidden,highlighted:e.highlight}),style:{visibility:e.hidden?"collapse":void 0}},c.a.createElement("td",null,c.a.createElement("div",{className:ee.a.flag},q(m[6]))),c.a.createElement("td",{id:null===(t=u.w)||void 0===t?void 0:t.id},"bye"===(null===(n=u.w)||void 0===n?void 0:n.id)?c.a.createElement("div",null,m[0]):c.a.createElement(v.b,{to:["","individual"===e.settings.competitors?"player":"team",null===(a=u.w)||void 0===a?void 0:a.id].join("/"),className:"playerName"},m[0])),c.a.createElement("td",{className:ee.a.inner,id:null===(r=u.link)||void 0===r?void 0:r.split("/").slice(-1).join("/")},u.link?c.a.createElement("a",{className:"button",href:u.link,target:"_blank",rel:"noopener noreferrer"},c.a.createElement(E.M,null),c.a.createElement("div",null,"chess.com")):null),c.a.createElement("td",{className:ee.a.inner},c.a.createElement("div",{className:[ee.a.score,ee.a[u.status],u.status].join(" ")},u.isFinished||u.isLive?m[1]:null)),c.a.createElement("td",{style:{whiteSpace:"pre-line"}},m[4]||"-"),c.a.createElement("td",{className:ee.a.inner},c.a.createElement("div",{className:[ee.a.score,ee.a[u.status],u.status].join(" ")},u.isFinished||u.isLive?m[3]:null)),c.a.createElement("td",{className:ee.a.inner},u.link&&u.isScheduled?c.a.createElement("div",{className:["button",u.isLive?ee.a.watchLive:""].join(" "),onClick:function(){var t;u.isFinished&&((null===(t=u.games)||void 0===t?void 0:t.length)?e.setExpanded(u.id):e.fetchGames([u.id]).then((function(){return e.setExpanded(u.id)})),window.location.hash&&decodeURIComponent(window.location.hash).includes(u.id)?window.history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="#"+u.id)}},u.isFinished?c.a.createElement("div",null,"Scores"):c.a.createElement(c.a.Fragment,null,u.isLive?c.a.createElement("img",{className:"icon",src:an.a,alt:"Watch games"}):c.a.createElement(E.o,null),c.a.createElement("a",{className:ee.a.watchButton,href:"https://www.chess.com/live#tm="+u.teamID,target:"_blank",rel:"noopener noreferrer"},u.isLive?"Watch live":"Join Game"))):null),c.a.createElement("td",{id:null===(i=u.b)||void 0===i?void 0:i.id},"bye"===(null===(l=u.b)||void 0===l?void 0:l.id)?c.a.createElement("div",null,m[2]):c.a.createElement(v.b,{to:["","individual"===e.settings.competitors?"player":"team",null===(s=u.b)||void 0===s?void 0:s.id].join("/"),className:"playerName"},m[2])),c.a.createElement("td",null,c.a.createElement("div",{className:ee.a.flag},q(m[7])))),u.link?c.a.createElement("tr",{key:["row","dropdown"].join("."),className:[e.hidden||!e.expanded?"collapsed":""].join(" "),style:e.hidden||!e.expanded?{visibility:"collapse"}:{}},c.a.createElement("td",{colSpan:100},"chessCom"===u.linkSource&&"team"===u.type?c.a.createElement(Gt,{id:u.id,match:u,setMatch:e.setMatch,setFinished:e.setFinished,sync:k,fetch:e.fetch||y,expanded:e.expanded,enforceBoards:u.players?parseInt(u.players):0,round:e.round,teams:u.teams||mn}):null)):null):null}var fn=n(72),hn=n.n(fn),vn=n(50),pn=n.n(vn),bn=n(94),gn=n.n(bn);function En(e){var t=Object(o.useReducer)((function(e){return!e}),!!e.expanded),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)(0),l=Object(h.a)(i,2),s=l[0],u=l[1],m=Object(o.useRef)(),d=Object(o.useCallback)((function(){m.current&&u(a?m.current.getBoundingClientRect().height:0)}),[u,a,m]);return Object(o.useEffect)((function(){d()}),[d]),c.a.createElement("div",{className:[gn.a.container,e.className].join(" ")},c.a.createElement("div",{className:["button",gn.a.header].join(" "),onClick:function(){return r()}},e.headerIcon,z(e.current),c.a.createElement(E.c,{className:gn.a.toggle,style:{transform:a?"rotate(-90deg)":"rotate(0deg)"}})),c.a.createElement("div",{className:gn.a.wrapper,style:{height:s}},c.a.createElement("ul",{className:gn.a.list,ref:m},e.options.map((function(t,n){return c.a.createElement("li",{key:[t,n].join("."),onClick:function(){e.resolve(t),r()}},z(t))})))))}var _n=n(147),jn=n.n(_n),yn=n(68),kn=n.n(yn),wn={aborted:0,pending:0,scheduled:0,registered:0,live:0,finished:0,confirmed:0};function On(e){var t=Object(o.useMemo)((function(){if(!e.matches)return wn;var t=Object.assign({},wn,{pending:e.total});return Object.values(e.matches).forEach((function(n){n&&n.round===e.round&&(t[n.status]++,t.pending--)})),t}),[e.matches,e.round,e.total]),n=Object(o.useMemo)((function(){return c.a.createElement(jn.a,{type:"Pie",data:{labels:Object.entries(t).map((function(t){var n=Object(h.a)(t,2),a=n[0],r=n[1];return"".concat(a," ").concat(Math.round(100*r/e.total),"% (").concat(r,")")})),series:Object.entries(t).map((function(e){var t=Object(h.a)(e,2);return{meta:t[0],value:t[1]}}))},options:{donut:!0,donutSolid:!0,donutWidth:e.donutWidth||60,startAngle:270,total:2*e.total,height:e.height||400,ignoreEmptyValues:!0,showLabel:!0,labelPosition:"inside"},listener:{draw:function(e){if("slice"===e.type){var t=e.element._node.getTotalLength(),n={"stroke-dashoffset":{id:"anim"+e.index,dur:1e3,from:-t+"px",to:"0px",easing:yn.Svg.Easing.easeOutQuint,fill:"freeze",begin:void 0}};0!==e.index&&(n["stroke-dashoffset"].begin="anim"+(e.index-1)+".end"),e.element.attr({"stroke-dashoffset":-t+"px"}),e.element.animate(n,!1)}}}})}),[t,e.total]);return c.a.createElement("div",{className:"gauge"},n)}var Nn=n(366),Cn=n.n(Nn),Sn=n(212),xn=new(n.n(Sn).a.ProcessNodeDefinitions)(c.a),Ln=Cn()({isValidNode:function(e){return"script"!==e.type},processingInstructions:[{shouldProcessNode:function(e){return!0},processNode:xn.processDefaultNode}]});function Mn(e){return Te.test(e.href)?c.a.createElement("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.stopPropagation()}},e.children):e.href.startsWith("https://results.scorchapp.co.uk")?c.a.createElement(v.b,{to:e.href.slice("https://results.scorchapp.co.uk".length)},e.children):c.a.createElement(v.b,{to:e.href},e.children)}var Rn=n(148),Pn=n(34),Bn=n.n(Pn);function Tn(e){var t=e.ref,n=e.width,a=e.height;n||(n="100%");var r=Object(o.useRef)();t||(t=r);var i=Object(o.useContext)(P).channel,l=Object(o.useMemo)((function(){if(!i)return null;if(!n){var e,r;if(!(null===(e=t)||void 0===e?void 0:e.current))return null;var o=null===(r=t)||void 0===r?void 0:r.current.getBoundingClientRect();n=o.width}return c.a.createElement(Rn.b,Object.assign({id:Bn.a.twitchPlayer,autoplay:!1},{channel:i,width:n,height:a}))}),[i,a,n,t]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:Bn.a.twitchPlayer,ref:t,className:Bn.a.player,style:{width:n,height:a}}),c.a.createElement("div",{className:"hidden"},l))}function An(e){var t,n,a=e.id,r=e.playerDict,i=e.fetchGames,l=e.matches,s=e.round,u=e.matchDict,m=e.results,d=e.announcements,f=e.getName,h=e.title,p=e.expanded,b=e.setExpanded,g=e.visible,_=e.setSearched,j=e.setVisible,y=(e.settings,Object(o.useContext)(L).isLoggedIn),k=d[d.length-1],w=Object(o.useMemo)((function(){return c.a.createElement(On,{matches:u,round:s,total:m.length,donutWidth:30,height:200})}),[u,s,m.length]),O=Object(o.useMemo)((function(){return c.a.createElement(En,{current:g,options:["all","aborted","pending","scheduled","registered","live","finished","confirmed"].filter((function(e){return"all"===e||l.some((function(t){return t&&t.round===s&&t.status===e}))})),resolve:j,className:pn.a.statusPicker,headerIcon:c.a.createElement(E.G,null)})}),[g,l,j,s]),N=Object(o.useContext)(P).isLive;return c.a.createElement(Ge,{absoluteStyles:{top:"400px"},fixedStyles:{top:"8vh"},upperLimit:10*window.innerHeight/100,lowerLimit:275},c.a.createElement("div",{className:pn.a.sidebar},c.a.createElement("div",{className:pn.a.name},h),N?c.a.createElement(Tn,{height:"200px"}):null,k?c.a.createElement("div",{className:pn.a.announcement},c.a.createElement(v.b,{to:["","t",a,"announcements"].join("/")+"#latest",className:pn.a.title},c.a.createElement(E.j,null),"Latest News"),c.a.createElement("div",{className:pn.a.body},k?c.a.createElement(hn.a,{source:(t=k.announcement.trim().split("*").join("").split("\n").map((function(e){return e.trim()})).join(" "),n=200,!t.length||n<1?t:t.length>n?t.substring(0,n-3)+"...":t),escapeHtml:!1,astPlugins:[Ln],renderers:{link:Mn}}):null),c.a.createElement("div",{className:pn.a.dates},new Date(k.createdAt).toString().slice(0,21)),c.a.createElement(v.b,{to:["","t",a,"announcements"].join("/"),className:pn.a.more},"View all",c.a.createElement(E.d,null))):null,w,O,c.a.createElement("div",{className:pn.a.searchBar},c.a.createElement(E.W,null),c.a.createElement(Qt,{onChange:_,onSubmit:Promise.resolve,action:"",options:Array.from(r.values()),convert:f,styles:pn.a,placeholder:"Search"})),c.a.createElement("div",{className:["button",pn.a.expandAll].join(" "),onClick:function(){l.length===p.length&&b([]),i().then((function(){return b(l.map((function(e){return e.id})))}))}},c.a.createElement(E.D,null),l.length===p.length?"Hide":"View"," all scores"),y?c.a.createElement("div",{className:["button",pn.a.jumpTo].join(" "),onClick:function(){return document.getElementsByClassName("highlighted")[0].scrollIntoView()}},c.a.createElement(E.b,null),"Find my pairing"):null,c.a.createElement("div",{className:["jumpToTop"].join(" "),onClick:function(){window.scrollTo(0,0),window.dispatchEvent(new Event("scroll"))}},c.a.createElement(E.e,null))))}var In=["White","White score","Black","Black score","Game link","Time"];function Dn(e){var t=Object(o.useState)(!1),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)([]),l=Object(h.a)(i,2),s=l[0],u=l[1],m=Object(o.useRef)(),v=Object(o.useReducer)((function(){var e,t;return(null!==(e=null===(t=m.current)||void 0===t?void 0:t.getBoundingClientRect().top)&&void 0!==e?e:1/0)<250}),!1),p=Object(h.a)(v,2),b=p[0],g=p[1];Object(o.useEffect)((function(){return window.addEventListener("scroll",g),function(){return window.removeEventListener("scroll",g)}}),[g]);var _=Xe(e.settings).getName,y=Kt({playerDict:e.playerDict,results:s,settings:e.settings}),k=y.matches,O=y.matchDict,N=y.setMatch,C=y.populatematchDict,S=y.fetchedMatch,x=y.fetchNext,M=y.hasFetched,R=y.beforeSetResults,P=Jt(),B=P.searched,T=P.expanded,A=P.visible,I=P.setSearched,D=P.setExpanded,F=P.setVisible,W=Object(o.useState)({}),U=Object(h.a)(W,2),G=U[0],z=U[1],V=Object(o.useCallback)((function(t){return pe({url:["","tournament",e.id,"getPairings"].join("/"),params:{round:e.round,ids:null===t||void 0===t?void 0:t.join(","),games:!0}}).then((function(e){return z(e.reduce((function(e,t){return e[t.id]=t.games,e}),{}))}))}),[e.id,e.round,z]);Object(o.useEffect)((function(){pe({url:H("tournament",e.id,"getPairings"),params:{round:e.round}}).then((function(e){return u(e),console.log(e[3],e[3].link),r(!0),e})).then((function(t){window.location.hash||(e.round,e.status.round)})).catch((function(){}))}),[u,e.round,e.id,V,e.status.round]);var q=Object(o.useContext)(L).isLoggedIn,Y=Object(o.useState)(void 0),J=Object(h.a)(Y,2),Q=J[0],X=J[1],Z=qe((function(){return Object.values(O).sort((function(e,t){return e?t?e.board-t.board:1:-1})).map((function(t,n){var a,r,i,o,c,l;if(!t)return null;if(t.round!==e.round)return null;t.id in G&&(t.games=G[t.id]);var s=t.startTime||t.registrationTime,u=new Date(s||0).toString();return[_(t.w),null!==(a=t.scores[0])&&void 0!==a?a:(t.isLive||t.isFinished)&&t.teams&&((null===(r=t.w)||void 0===r?void 0:r.chessCom)||(null===(i=t.b)||void 0===i?void 0:i.chessCom))?t.teams[0].score:"",_(t.b),null!==(o=t.scores[1])&&void 0!==o?o:(t.isLive||t.isFinished)&&t.teams&&((null===(c=t.w)||void 0===c?void 0:c.chessCom)||(null===(l=t.b)||void 0===l?void 0:l.chessCom))?t.teams[1].score:"",s?u.slice(0,10)+"\n"+u.slice(16,21):"",t.link,t.w?t.w.nationality:"",t.b?t.b.nationality:""]}))}),[G,_,O,e.round],"csv");Object(o.useEffect)((function(){R(),u([])}),[u,R,e.round]),Object(o.useEffect)((function(){C(s,e.round)}),[C,s]),Object(o.useEffect)((function(){x()}),[x]);var $=Object(o.useCallback)(Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(De.test(e.profile.username)){t.next=2;break}return t.abrupt("return",X(null));case 2:e.profile.username&&pe({url:"/user/"+e.profile.username}).then(X);case 3:case"end":return t.stop()}}),t)}))),[X,e.profile.username]);Object(o.useEffect)((function(){q&&$()}),[$,q]);var te=Object(o.useCallback)((function(t){return Object.values(O).sort((function(e,t){return e?t?e.board-t.board:1:-1})).map((function(n,a){var r,i,o,l,s,u,m;if(!n)return null;n.id in G&&(n.games=G[n.id]);var d=n.startTime||n.registrationTime,f=new Date(d||0).toString(),h=[_(n.w),null!==(r=n.scores[0])&&void 0!==r?r:(n.isLive||n.isFinished)&&n.teams&&((null===(i=n.w)||void 0===i?void 0:i.chessCom)||(null===(o=n.b)||void 0===o?void 0:o.chessCom))?n.teams[0].score:"",_(n.b),null!==(l=n.scores[1])&&void 0!==l?l:(n.isLive||n.isFinished)&&n.teams&&((null===(s=n.w)||void 0===s?void 0:s.chessCom)||(null===(u=n.b)||void 0===u?void 0:u.chessCom))?n.teams[1].score:"",d?f.slice(0,10)+"\n"+f.slice(16,21):"",n.link,n.w?n.w.nationality:"",n.b?n.b.nationality:""];return c.a.createElement(dn,Object.assign({key:["row",n.board].join("."),i:a},{data:h,match:n,pool:t,setMatch:N,setExpanded:D,fetchGames:V},{setFinished:M,round:e.round,fetch:!!S&&S.id===n.id,expanded:T.includes(n.id),highlight:q&&n.w&&n.b&&(n.w.id===(null===Q||void 0===Q?void 0:Q.username)||n.b.id===(null===Q||void 0===Q?void 0:Q.username)||(null===Q||void 0===Q||null===(m=Q.teams)||void 0===m?void 0:m.some((function(e){return e&&(e.id===n.w.teamId||e.id===n.b.teamId)})))),hidden:"all"!==A&&n.status!==A||!!B.length&&!B.some((function(e){var t,a;return e.id===(null===(t=n.w)||void 0===t?void 0:t.id)||e.id===(null===(a=n.b)||void 0===a?void 0:a.id)})),settings:e.settings}))}))}),[G,_,S,D,T,B,O,M,A,V,N,e.round,e.settings,Q,q]),ne=Object(o.useCallback)((function(){var t=document.createElement("a"),n=In.join(",")+"\n"+Z.map((function(e){return e.join(",")})).join("\n"),a=new Blob([n],{type:"text/csv"}),r=(e.status.name.match(Ae)||[]).join(""),i=new Date(Date.now()).toString().slice(4,15);t.href=URL.createObjectURL(a),t.download="".concat(r,"_").concat(i,"_").concat([e.round],".").concat("csv"),t.click()}),[Z,e.round,e.status.name]),ae=Object(o.useMemo)((function(){return s.reduce((function(e,t){var n=t.pool||0;return e[n]||(e[n]=0),e[n]++,e}),[])}),[s]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{style:{display:s.length?void 0:"none"},"data-aos":"zoom-in","data-aos-once":!0},c.a.createElement("div",{className:ee.a.pieMatrix},c.a.createElement("div",{className:["button",ee.a.timezone].join(" ")},c.a.createElement(E.s,null),new Date(Date.now()).toString().slice(25)),c.a.createElement("div",{className:ee.a.pie},c.a.createElement(On,{matches:O,round:e.round,total:s.length})),c.a.createElement("div",{className:["button",ee.a.download].join(" "),onClick:ne},c.a.createElement(E.z,null),"Download"))),c.a.createElement(An,{id:e.id,playerDict:e.playerDict,showSidebar:b,fetchGames:V,matches:k,title:e.status.name,round:e.round,matchDict:O,results:s,announcements:e.announcements,getName:_,visible:A,setVisible:F,expanded:T,setExpanded:D,setSearched:I,settings:e.settings}),function(){for(var t=[],n=!1,r=0;r<ae.length;r++)ae[r]&&(t.push(c.a.createElement("section",{key:["table",r].join("."),className:w()(Object(j.a)({still:B.length},"animated-"+e.direction,s.length),ee.a.table)},r?c.a.createElement("div",{className:ee.a.pool},"Pool ",K(r,e.settings.poolDisplay)):null,c.a.createElement("table",{className:w()("download-table","full-width","pairings")},c.a.createElement("thead",null,c.a.createElement("tr",{ref:n?null:m},c.a.createElement("td",{style:{width:"5%"}},"Fed"),c.a.createElement("td",{style:{width:"22.5%"}},"White"),c.a.createElement("td",{style:{width:"12.5%"}},"Link"),c.a.createElement("td",{style:{width:"5%"}}),c.a.createElement("td",{style:{width:"10%"}},"Start Time"),c.a.createElement("td",{style:{width:"5%"}}),c.a.createElement("td",{style:{width:"12.5%"}},"Watch Live"),c.a.createElement("td",{style:{width:"22.5%"}},"Black"),c.a.createElement("td",{style:{width:"5%"}},"Fed"))),c.a.createElement("tbody",null,a&&!s.length?c.a.createElement("tr",null,c.a.createElement("td",{colSpan:100},"Draw has not yet taken place!")):null,te(r))))),n=!0);return t}())}var Fn=n(69);function Wn(e){var t=e.pop,n=Object(o.useRef)(null),a=Object(o.useCallback)((function(){n.current&&t(n.current)}),[t,n]),r=Object(o.useContext)(P),i=r.site,l=r.channel,s=Object(o.useMemo)((function(){return Math.min(window.innerWidth-40,1132)*(e.screenWidthProportion||1)}),[e.screenWidthProportion]);return e.streamURL?c.a.createElement(c.a.Fragment,null,"twitch"===i?c.a.createElement("section",{className:[Bn.a.container].join(" ")},c.a.createElement("div",{className:Bn.a.streamHeader},c.a.createElement(E.ib,null),c.a.createElement("span",{className:"bold"},l),c.a.createElement("div",{className:w()("button",Bn.a.popOut),onClick:a},"Pop-out",c.a.createElement(Fn.b,null))),c.a.createElement("div",{className:Bn.a.streamContainer},c.a.createElement(Tn,{ref:n,width:.66*s,height:.66*s*3/4}),c.a.createElement("div",{id:Bn.a.twitchChat,className:Bn.a.chat,style:{height:.66*s*3/4}},c.a.createElement(Rn.a,{channel:l,width:.31*s,height:.66*s*3/4})))):null,"youtube"===i?c.a.createElement("section",{className:[Bn.a.container].join(" ")},c.a.createElement("div",{className:Bn.a.streamHeader},c.a.createElement(E.pb,null),c.a.createElement("span",{className:"bold"},"chess-england")),c.a.createElement("div",{className:Bn.a.streamContainer},c.a.createElement("div",{id:Bn.a.youtubePlayer,className:Bn.a.player},c.a.createElement("iframe",{title:"youtubePlayer",width:.66*s,height:s/2.73,src:"https://www.youtube.com/embed/R2v-XSRMOFo",frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),c.a.createElement("div",{id:Bn.a.youtubeChat,className:[Bn.a.chat,Bn.a.youtubeChat].join(" ")},c.a.createElement("iframe",{title:"youtubeChat",width:.31*s,height:"315",src:"https://www.youtube.com/live_chat?v=R2v-XSRMOFo&embed_domain=localhost",frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})))):null,c.a.createElement("section",{className:Bn.a.footer},"(Live-Stream) If you're having problems viewing this player, try disabling any extensions or Brave Shields if you have them enabled.")):null}var Un=n(367),Gn=n.n(Un),Hn=n(368),zn=n.n(Hn),Vn=(n(316),n(86)),qn=n.n(Vn),Kn=n(371),Yn=n(66),Jn=n(152),Qn=n.n(Jn);n(330);function Xn(e){var t=Object(o.useState)(!1),n=Object(h.a)(t,2),a=n[0],r=n[1],i=e.useState||[a,r],l=Object(h.a)(i,2),s=l[0],u=l[1],m=Object(o.createRef)();return s?c.a.createElement(Yn.b,null,c.a.createElement(Yn.a,{onClose:function(){return u(!1)}},c.a.createElement("div",{className:["chartContainer","rankings",Qn.a.container,e.className].join(" "),ref:m},c.a.createElement("div",{className:[Qn.a.fullScreenHeader,"header--isModal css-111ute9 css-1ycyyax"].join(" ")},c.a.createElement("span",null),c.a.createElement("span",null,c.a.createElement("button",{type:"button",title:"Enter fullscreen (f)",className:"header_button __header_button--fullscreen css-m6j0xf css-1ycyyax",onClick:function(){return!document.fullscreenElement&&m.current?m.current.requestFullscreen():document.exitFullscreen()}},c.a.createElement("svg",{role:"presentation",viewBox:"0 0 24 24",className:"css-1rkjyjh"},c.a.createElement("path",{d:"M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z"}))),c.a.createElement("button",{type:"button",title:"Close (esc)",className:"react-images__header_button react-images__header_button--close css-m6j0xf css-1ycyyax",onClick:function(){return u(!1)}},c.a.createElement("svg",{role:"presentation",viewBox:"0 0 24 24",className:"css-1rkjyjh"},c.a.createElement("path",{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"}))))),c.a.createElement("div",{className:Qn.a.stage},e.children)))):null}function Zn(e){var t=Object(o.useState)(15),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Me(e),l=Object(o.useMemo)((function(){return{rating:{mobile:"Rating",name:"Rating",value:function(e){return e.rating},show:function(e){return!1}},score:{mobile:"Match Points",name:"MP",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.match?e+=t.match||0:e}),0)}},gamePoints:{mobile:"Game Points",name:"GP",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.match?e+=t.game||0:e}),0)},show:function(e){return 1!==e.gamePointTotal}},gameDifference:{mobile:"Game Point Difference",name:"G. +/-",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.game||0,a+=null!==n?e.played:0)})),2*n-a},show:function(e){return 1!==e.gamePointTotal}},matchPercentage:{mobile:"Match Point Percentage",name:"M. %",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.match||0,a+=1)})),0===a?-1:100*n/a}},gamePercentage:{mobile:"Game Point Percentage",name:"G. %",value:function(e,t){var n=0,a=0;return e.histories.slice(1,t+1).forEach((function(e){e&&(n+=e.game||0,a+=e.played||0)})),0===a?-1:100*n/a},show:function(e){return 1!==e.gamePointTotal}},performanceRating:{mobile:"Performance Rating",name:"Perf",value:function(e){return e.performanceRating},show:function(e){return!1}},ratingDifference:{mobile:"Performance Rating Difference",name:"P. +/-",value:function(e){return e.performanceRating?e.performanceRating-e.rating:0},show:function(e){return!1}},expectedScore:{mobile:"Expected Score",name:"Expected",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.expected?e+=t.expected||0:e}),0)},show:function(e){return!1}},expectedDifference:{mobile:"Score to Expected",name:"E. +/-",value:function(e,t){return e.histories.slice(1,t+1).reduce((function(e,t){return t&&"number"===typeof t.expected&&"number"===typeof t.match?e+=t.match-t.expected||0:e}),0)},show:function(e){return e.showRatings}}}}),[]),s=Object(o.useMemo)((function(){return e.status.round>e.settings.totalRounds||"Infinity"===e.settings.totalRounds?e.status.round:e.settings.totalRounds}),[e.status.round,e.settings.totalRounds]),u=Object(o.useReducer)((function(e,t){for(var n=[],a=0;a<Math.max(e.length,t.length);a++)t[a]?n.push(t[a]):e[a]&&n.push(e[a]);return n}),[]),m=Object(h.a)(u,2),d=m[0],f=m[1],v=Object(o.useMemo)((function(){for(var e={},t=new Array(s+1),n=i.filter((function(e){return"bye"!==e.id})),a=0;a<n.length;a++)for(var r=n[a],o=0,c=Object.entries(l);o<c.length;o++){var u=Object(h.a)(c[o],2),m=u[0],d=u[1];e[m]||(e[m]=[]);for(var v=[],p=1;p<s+1;p++)t[p-1]=p.toString(),p>=r.histories.length?v.push(void 0):v[p]=d.value(r,p);e[m][a]=v}return f(t),e}),[i,l,s]),p=Object(o.useContext)(B),b=Object(o.useState)(!0),g=Object(h.a)(b,2),_=g[0],j=g[1],y=Object(o.useState)(!0),k=Object(h.a)(y,2),w=k[0],O=k[1],N=Object(o.useState)(!1),C=Object(h.a)(N,2),S=C[0],x=C[1],L=Object(o.useCallback)((function(e,t){for(var n=e[0].length,a=[],r=[],o=1;o<n;o++){a[o]=[];for(var c=0;c<e.length;c++)a[o][c]={meta:i[c],value:e[c][o]};a[o]=a[o].sort((function(e,t){if(void 0===e.value)return 1;if(void 0===t.value)return-1;if(e.value!==t.value)return t.value-e.value;for(var n=p.slice(0),a=n.shift();a&&a[1];){var r=a[1].func(e.meta,t.meta);if(r)return r;a=n.shift()}return 0})),r[o]=a[o].map((function(e){return void 0!==e.value?[e.meta.id,e.value]:["",void 0]}))}for(var l=[],s=0;s<e.length;s++){l[s]=[];for(var u=function(e){var n=i[s],a=r[e].findIndex((function(e){return e[0]===n.id}));l[s][e-1]={meta:n.firstName+" "+n.lastName,value:n.histories[e]&&"number"===typeof n.histories[e].match&&a>=0?t?-a-1:r[e][a][1]:void 0}},m=1;m<n;m++)u(m)}return l}),[i,p]),M=Object(o.useState)([]),R=Object(h.a)(M,2),P=R[0],T=R[1],A=Object(o.useState)(!0),I=Object(h.a)(A,2),D=I[0],F=I[1],W=Object(o.useState)(1),U=Object(h.a)(W,2),G=U[0],H=U[1],z=Object(o.useState)("score"),q=Object(h.a)(z,2),K=q[0],Y=q[1],J=Object(o.useMemo)((function(){return Object.entries(l).map((function(t,n){var a=Object(h.a)(t,2),r=a[0],i=a[1];return i.show&&!i.show(e.settings)?null:c.a.createElement("div",{className:["header-button",ee.a.pairingRound,K===r?ee.a.roundSelected:""].join(" "),onClick:function(){return Y(r)},key:["round",n].join(".")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,i.mobile)))}))}),[l,K,Y,e.settings]),Q=Object(o.useMemo)((function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:["header-button",ee.a.pairingRound,D?ee.a.roundSelected:""].join(" "),onClick:function(){return F(!0)},key:["round","order"].join(".")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,"Ranking"))),c.a.createElement("div",{className:["header-button",ee.a.pairingRound,D?"":ee.a.roundSelected].join(" "),onClick:function(){return F(!1)},key:["round","unorder"].join(".")},c.a.createElement("div",{className:"full-text"},c.a.createElement("h4",null,"Points"))))}),[D,F]),X=Object(o.useCallback)((function(e,t){return[e,D?"#"+(-Number(t)).toString():""].join("\n")}),[D]),Z=Object(o.useMemo)((function(){var t=K;if(!v[t])return null;for(var n=L(v[t],D),r=Math.ceil(n.length/2),i=function(t){if(n.reduce((function(n,a,r){var i,o;return t<e.status.round&&(null===(i=a[t-1])||void 0===i||i.value),"number"===typeof(null===(o=a[t])||void 0===o?void 0:o.value)?n+=1:n}),0)>r)return H(t),"break"},o=s;o>=0;o--){if("break"===i(o))break}var l=n.sort((function(e,t){var n,a;return((null===(n=t[G])||void 0===n?void 0:n.value)||-1/0)-((null===(a=e[G])||void 0===a?void 0:a.value)||-1/0)})).map((function(t,n){var a,r,i,o,l,s,u,m,d;if(!D)return c.a.createElement(c.a.Fragment,null,null===(a=t[G])||void 0===a?void 0:a.meta);if(!G)return c.a.createElement(c.a.Fragment,null,null===(r=t[G])||void 0===r?void 0:r.meta);if(G===e.status.round)return c.a.createElement(c.a.Fragment,null,"#",n," ",null===(i=t[G])||void 0===i?void 0:i.meta);if(void 0===(null===(o=t[G])||void 0===o?void 0:o.value)||void 0===(null===(l=t[G])||void 0===l?void 0:l.value))return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:["chartArrow"].join(" ")},c.a.createElement("div",null,"\u200b"),c.a.createElement("div",null,"\u200b")),null===(s=t[G])||void 0===s?void 0:s.meta);var f=(null===(u=t[G])||void 0===u?void 0:u.value)-(null===(m=t[G-1])||void 0===m?void 0:m.value),h=f>0?c.a.createElement(E.l,null):f<0?c.a.createElement(E.k,null):c.a.createElement(E.N,null);return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:["chartArrow",f>0?"chartPositive":f<0?"chartNegative":"chartNeutral"].join(" ")},c.a.createElement("div",null,Math.abs(f)||"\u200b"),h),null===(d=t[G])||void 0===d?void 0:d.meta)}));return T(l),D&&n.push([{meta:"placeholder",value:-n.length}]),Gn()({tooltipFnc:X}),kn.a.plugins.tooltip({tooltipFnc:X}),zn()(),c.a.createElement(jn.a,{data:{labels:d,series:n},options:{fullWidth:!0,divisor:.5,axisY:{offset:25,onlyInteger:D,labelInterpolationFnc:function(e){return D?e?"#"+(-e).toString():"":e}},width:S?.8*window.innerWidth:"100%",height:S?window.innerHeight-150:D&&_?a*(v[t].length+(a<21.7?4.2:0)):.8*window.innerHeight,plugins:[kn.a.plugins.tooltip({tooltipFnc:X}),kn.a.plugins.ctAxisTitle({axisX:{axisTitle:"Round",axisClass:"ct-axis-title",textAnchor:"middle"}})]},type:"Line"})}),[v,K,G,L,d,s,D,X,e.status.round,a,_,S]),$=Object(o.useMemo)((function(){for(var e="",t="p".charCodeAt(0);t<"z".charCodeAt(0)+1;t++){var n=V(0,65536).toString(16);e+=".ct-series.ct-series-".concat(String.fromCharCode(t)," {\n\t\t\t\tstroke: #").concat("0".repeat(6-n.length)).concat(n,";\n\t\t\t}"),e+=".ct-series.ct-series-".concat(String.fromCharCode(t)," > path {\n\t\t\t\tstroke: #").concat("0".repeat(6-n.length)).concat(n,";\n\t\t\t}")}return e}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:["container","bodyContainer","animated-"+e.direction].join(" ")},c.a.createElement("div",{className:"button-list"},J)),c.a.createElement("section",{className:["container","bodyContainer","animated-"+e.direction].join(" ")},c.a.createElement("div",{className:"button-list"},Q)),c.a.createElement("section",{className:"animated-"+e.direction},c.a.createElement("style",null,$),c.a.createElement("div",{className:ee.a.description},"This chart shows the rankings for each team throughout the rounds, beginning with round 1 on the left.",c.a.createElement("br",null),"Switch to 'Points' above to see each team's points progression.",c.a.createElement("br",null)),c.a.createElement("div",{className:"sliderContainer container"},c.a.createElement("div",null,"Size"),c.a.createElement(Kn.a,{className:ee.a.slider,thumbClassName:ee.a.thumb,trackClassName:ee.a.track,min:5,max:_&&D?Math.max(30,window.innerHeight/i.length):void 0,step:w?.5:5,value:_&&D?a:.8*window.innerHeight/i.length,disabled:!_||!D,onChange:function(e){return"number"===typeof e?r(e):null},renderThumb:function(e,t){return c.a.createElement("div",e,t.valueNow)}}),c.a.createElement("div",{className:"increment",onClick:function(){return a>=6?r(a-1):null}},c.a.createElement(E.b,null)),c.a.createElement("div",{className:"increment",onClick:function(){return a<=29?r(a+1):null}},c.a.createElement(E.e,null))),c.a.createElement("div",{className:"optionsContainer container"},c.a.createElement("div",{className:["header-button",ee.a.pairingRound,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,_&&D?"Detailed":"Fit"),c.a.createElement("div",null,_&&D?"Switch off to view on one screen":D?"Switch to view player names":"Detailed view is only available with Ranking")),c.a.createElement("div",{className:"toggleSwitch",onClick:function(){return j(!_)}},c.a.createElement("input",{type:"checkbox",className:"check",checked:_&&D}),c.a.createElement("div",{className:"toggleSlider round"}))),c.a.createElement("div",{className:["header-button",ee.a.pairingRound,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,w?"High":"Low"," Performance"),c.a.createElement("div",null,"Switch off if slow on Size change")),c.a.createElement("div",{className:"toggleSwitch",onClick:function(){return O(!w)}},c.a.createElement("input",{type:"checkbox",className:"check",checked:w}),c.a.createElement("div",{className:"toggleSlider round"}))),c.a.createElement("div",{className:["header-button",ee.a.pairingRound,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,"Full Screen")),c.a.createElement("div",{className:"toggleSwitch",onClick:function(){return x(!S)}},c.a.createElement("input",{type:"checkbox",className:"check",checked:S}),c.a.createElement("div",{className:"toggleSlider round"})))),c.a.createElement("div",{className:ee.a.description},"Hover to view team names."),c.a.createElement("div",{className:["chartContainer","rankings"].join(" ")},Z,D&&_?c.a.createElement("div",{className:"chartKey",style:Fe()?{}:{visibility:a<10?"hidden":"visible",gridTemplateRows:"repeat(".concat(P.length,", ").concat(a,"px)"),left:"calc(".concat((G+0)/(s-1)," * 100%)"),fontSize:Math.min(a,25)-3+"px",marginTop:a>21.7?"2px":a+6+"px"}},P.map((function(e,t){return c.a.createElement("div",{key:["id",t].join("."),className:"playerLabel"},c.a.createElement("hr",{style:{display:Fe()||G>=s-1?"none":"block",width:.8/(s+2)*(window.innerWidth-60)}}),c.a.createElement("div",null,e))}))):null)),c.a.createElement(Xn,{className:qn.a.fsChart,useState:[S,x]},c.a.createElement("div",{className:qn.a.header},c.a.createElement("div",{className:qn.a.title},e.status.name),c.a.createElement("div",{className:qn.a.subtitle},l[K].mobile)),Z,D&&_&&a>15?c.a.createElement("div",{className:"chartKey",style:Fe()?{}:{visibility:a<10?"hidden":"visible",gridTemplateRows:"repeat(".concat(P.length,", ").concat(a,"px)"),left:"calc(".concat((G+0)/(s-1)," * 100%)"),fontSize:Math.min(a,25)-3+"px",marginTop:a>21.7?"2px":a+6+"px"}},P.map((function(e,t){return c.a.createElement("div",{key:["id",t].join("."),className:"playerLabel"},c.a.createElement("hr",{style:{display:Fe()||G>=s-1?"none":"block",width:.8/(s+2)*(window.innerWidth-60)}}),c.a.createElement("div",null,e))}))):null,c.a.createElement("div",{className:qn.a.name},"Results by ScorchChess"),c.a.createElement("div",{className:qn.a.url},"https://scorchapp.co.uk")))}var $n=n(75),ea=n.n($n),ta=n(28),na=n.n(ta),aa={reddit:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.reddit},link:"https://reddit.com/r/|",icon:["svg",c.a.createElement(E.U,{key:"reddit"})]},lichess:{name:"Lichess.org",value:function(e){return e.lichess},link:"https://lichess.org/@/|",icon:["img",ln.a],authMessage:"Authentication via lichess.org is available to any admins of a linked lichess.org team account",canLink:!0},chessCom:{name:"Chess.com",value:function(e){return e.chessCom},link:"https://chess.com/club/|",idLink:"https://chess.com/members/|",icon:["img",on.a],authMessage:"Authentication via chess.com is available to any admins of a linked chess.com club account",canLink:!0},zoom:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.zoom},link:"https://us02web.zoom.us/user/|/profile",icon:["img",un.a]},skype:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.skype},icon:["svg",c.a.createElement(E.Y,{key:"skype"})]},facebook:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.facebook},link:"https://facebook.com/|",icon:["svg",c.a.createElement(E.E,{key:"facebook"})],authMessage:"Authentication via Facebook is not available at this time",canLink:!0},twitter:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.facebook},link:"https://twitter.com/|",icon:["svg",c.a.createElement(E.jb,{key:"twitter"})]},phone:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.phone},icon:["svg",c.a.createElement(E.R,{key:"phone"})]},email:{value:function(e){var t;return null===(t=e.contact)||void 0===t?void 0:t.email},icon:["svg",c.a.createElement(E.B,{key:"envelope"})],link:"mailto:|",permanent:!0,authMessage:"Authentication via email requires a matching verified email address",canLink:!0}};function ra(e){switch(e){case"chess.com":return c.a.createElement("img",{src:aa.chessCom.icon[1],alt:"chessCom",className:na.a.icon});case"facebook.com":return c.a.createElement(E.E,{style:{color:"#3b5998"}});case"twitter.com":return c.a.createElement(E.jb,{style:{color:"#00aced"}});case"twitch.tv":return c.a.createElement(E.ib,{style:{color:"#6441a5"}});case"github.com":return c.a.createElement(E.I,{style:{color:"#333"}});default:return c.a.createElement(Fn.a,null)}}function ia(e){var t,n,a,r,i,l,s,u=Object(o.useContext)(I),m=Object(o.useCallback)((function(e){return u({title:"",message:e})}),[u]),d=Object(o.useReducer)((function(e){return!e}),!1),f=Object(h.a)(d,2),v=f[0],p=f[1],b=Object(o.useRef)(null),g=Object(o.useCallback)((function(){var t,n,a;if("confirm"===e.type&&e.resolve)return e.resolve("");var r=null===(t=b.current)||void 0===t?void 0:t.value.trim();if(r||(null===(n=e.prompt)||void 0===n?void 0:n.allowNull)){if((null===(a=e.prompt)||void 0===a?void 0:a.validate)&&!e.prompt.validate(r))return p();"prompt"===e.type&&e.resolve&&e.resolve(r),m("")}}),[b,e,m]),_=Object(o.useCallback)((function(e){var t;switch(e.keyCode){case 27:(null===(t=b.current)||void 0===t?void 0:t.value)&&(b.current.value="");break;case 13:g()}}),[g,b]);if(!e.message)return null;var j=(e.link||"").match(Te),y="string"!==typeof e.icon?e.icon:e.icon?ra(e.icon):j?ra(j[1]):null;return c.a.createElement("div",{className:na.a.shade,onClick:function(){return m("")}},c.a.createElement("div",{className:[na.a.section].join(" ")},c.a.createElement("div",{className:[na.a.lightBoxTitle,"error"===e.type?na.a.error:""].join(" "),onClick:function(){return m("")}},c.a.createElement("div",null,e.link?c.a.createElement("a",{className:na.a.iconLink,href:e.link,rel:"noopener noreferrer",target:"_blank"},y):c.a.createElement("div",null,y)),c.a.createElement("div",null,e.title)),c.a.createElement("div",{className:na.a.lightBoxContent,onClick:function(e){return e.stopPropagation()}},e.message,e.link?c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:e.link,rel:"noopener noreferrer",target:"_blank"},e.link)):null,"prompt"===e.type?"textarea"===(null===(t=e.prompt)||void 0===t?void 0:t.type)?c.a.createElement("textarea",Object.assign({ref:b,onKeyDown:_,autoFocus:!0,defaultValue:null===(n=e.prompt)||void 0===n?void 0:n.defaultValue},null===(a=e.prompt)||void 0===a?void 0:a.additionalInputProps)):c.a.createElement("input",Object.assign({ref:b,onKeyDown:_,type:(null===(r=e.prompt)||void 0===r?void 0:r.type)||"text",autoFocus:!0,defaultValue:null===(i=e.prompt)||void 0===i?void 0:i.defaultValue},null===(l=e.prompt)||void 0===l?void 0:l.additionalInputProps)):null,v?c.a.createElement("div",{className:na.a.error},null===(s=e.prompt)||void 0===s?void 0:s.errorMessage):null),"confirm"===e.type||"prompt"===e.type?c.a.createElement("div",{className:na.a.dateTime,onClick:function(e){return e.stopPropagation()}},c.a.createElement("div",{className:na.a.reject,onClick:function(){e.reject&&e.reject(),m("")}},c.a.createElement(E.fb,null)),c.a.createElement("div",{className:na.a.resolve,onClick:g},c.a.createElement(E.m,null))):c.a.createElement("div",{className:na.a.dateTime},c.a.createElement("div",{className:na.a.footer},new Date(Date.now()).toString().slice(0,21)))))}function oa(e){return e.notif.content?c.a.createElement("div",{className:na.a.shade,onClick:function(){return e.select({})}},c.a.createElement("div",{className:[na.a.section].join(" ")},c.a.createElement(ca,Object.assign({},e,{styles:na.a})))):null}function ca(e){var t=e.styles||na.a,n=e.notif;if(!n.content)return null;var a=c.a.createElement(Fn.a,null),r=(n.link||"").match(Te);return r&&(a=ra(r[1])),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:w()(t.lightBoxTitle,t.title)},c.a.createElement("div",null,n.link?c.a.createElement("a",{className:t.iconLink,href:n.link,rel:"noopener noreferrer",target:"_blank"},a):c.a.createElement("div",null,a)),c.a.createElement("div",null,n.title)),c.a.createElement("div",{className:t.lightBoxContent,onClick:function(e){return e.stopPropagation()}},c.a.createElement(hn.a,{source:n.content.trim()+(n.link?"\n\n[".concat(n.link,"](").concat(n.link,")"):""),escapeHtml:!1,astPlugins:[Ln],renderers:{link:Mn}})),c.a.createElement("div",{className:t.dateTime},c.a.createElement("div",{className:t.footer},z(n.role)," Announcement | ",new Date(n.createdAt).toString().slice(0,21))))}function la(e){var t=e.announcements;return Object(o.useEffect)((function(){t.length&&window.location.hash&&"#latest"===window.location.hash&&(window.location.hash="#"+t[0].createdAt)}),[t]),c.a.createElement("div",{className:ea.a.container},t.length?c.a.createElement("div",{className:[ea.a.nav].join(" ")},c.a.createElement("div",{className:[].join(" ")},t.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e,t){return c.a.createElement("a",{key:w()("announcement",t),href:"#"+e.createdAt,className:ea.a.date},new Date(e.createdAt).toString().slice(0,21))})))):null,t.length?t.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e){Fn.a;var t=(e.link||"").match(Te);return t&&ra(t[1]),c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:ea.a.announcement,id:new Date(e.createdAt).valueOf().toString(),"data-aos":"fade-right"},c.a.createElement(ca,{notif:e,select:function(){},styles:ea.a})),c.a.createElement("hr",{className:ea.a.divider,"data-aos":"fade"}))})):c.a.createElement("section",{className:ea.a.announcement},"This tournament has no announcements at this time."))}var sa=n(31),ua=n.n(sa),ma=(n(741),n(114));function da(e){var t=Object(o.useContext)(T);function n(t){var n=t.id,a=e.playerDict.get(n);return a?c.a.createElement("div",{className:ua.a.table},a&&a.nationality?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:ua.a.key},"Nationality"),c.a.createElement("div",{className:[ua.a.flag,ua.a.value].join(" ")},q(a.nationality))):null,Object.entries(Re.post).map((function(t,n){var r,i=Object(h.a)(t,2),o=i[0],l=i[1];return l.show&&!l.show(a,n,e.settings,"results")?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:ua.a.key},l.mobile),c.a.createElement("div",{className:ua.a.value},l.convert?l.convert(a[o],a,e.settings,"results"):null===(r=a[o])||void 0===r?void 0:r.toString()))}))):null}return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:[ua.a.fireworksSection,"animated-"+e.direction].join(" ")},c.a.createElement("div",{className:"pyro"},c.a.createElement("div",{className:"before"}),c.a.createElement("div",{className:"after"})),c.a.createElement("div",{className:ua.a.resultsScreen},c.a.createElement("div",{id:"first",className:ua.a.place},c.a.createElement(ma.c,null),c.a.createElement("div",{className:ua.a.position},"1",c.a.createElement("sup",null,"st")),c.a.createElement("div",{className:ua.a.teamName},t(e.state[0])),c.a.createElement(n,{id:e.state[0]})),c.a.createElement("div",{id:"second",className:ua.a.place},c.a.createElement(ma.b,null),c.a.createElement("div",{className:ua.a.position},"2",c.a.createElement("sup",null,"nd")),c.a.createElement("div",{className:ua.a.teamName},t(e.state[1])),c.a.createElement(n,{id:e.state[1]})),c.a.createElement("div",{id:"third",className:ua.a.place},c.a.createElement(N.b,null),c.a.createElement("div",{className:ua.a.position},"3",c.a.createElement("sup",null,"rd")),c.a.createElement("div",{className:ua.a.teamName},t(e.state[2])),c.a.createElement(n,{id:e.state[2]})))),c.a.createElement("section",null,c.a.createElement("div",{className:["container",ua.a.links].join(" ")},"team"===e.settings.competitors?c.a.createElement(v.b,{to:"/t/".concat(e.id,"/standings/individual"),className:["header-button",ua.a.standingsButton].join(" ")},"View Individual Results"):null,c.a.createElement(v.b,{to:"/t/".concat(e.id,"/standings/final"),className:["header-button",ua.a.standingsButton].join(" ")},"View Final Standings"))))}var fa=n(24),ha=n.n(fa),va=n(6),pa=n.n(va);function ba(e){var t=Object(o.useContext)(I);function n(e){return a.apply(this,arguments)}function a(){return(a=Object(f.a)(d.a.mark((function t(n){var a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Pt(n.trim());case 4:if(r=t.sent){t.next=7;break}return t.abrupt("return",console.error("Invalid username to link"));case 7:be({url:"/profile/chessCom/link",data:{username:n,name:r.name,nationality:null===(a=r.country)||void 0===a?void 0:a.split("/").pop(),title:r.title}}).then(e.updateProfile);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{href:function(){t({title:"Link Chess.com account",message:"Enter Chess.com account to link:",type:"prompt",icon:"chess.com",resolve:n})},setWindow:function(){}}}var ga={"@id":"",name:""},Ea={};function _a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.elem,n=Object(o.useState)(""),a=Object(h.a)(n,2),r=a[0],i=a[1],c=Object(o.useState)(ga),l=Object(h.a)(c,2),s=l[0],u=l[1],m=Object(o.useState)(!1),d=Object(h.a)(m,2),f=d[0],v=d[1],b=Object(o.useCallback)((function(e,t){if(t.name)return t.name;if(t.username)return t.username;if(t.id)return t.id;if("chessCom"!==e.id)return z(e.id);if(s.name)return s.name;if(t.link){if(r in Ea)return Ea[r];!r&&f&&i(t.link)}return z(e.id)}),[r,s.name,i,f]);Object(o.useEffect)((function(){v(J(t))}),[v,t]),Object(o.useEffect)((function(){var e=function(){return v(J(t))};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[v,t]);var g=Object(p.g)();return Object(o.useEffect)((function(){return g.listen((function(e){e.pathname.startsWith("/teams")||Rt.clearQueue()}))}),[g]),Object(o.useEffect)((function(){r&&Tt(r.split("/").pop()).then(u)}),[r]),{getClubName:b,chessComClub:s}}function ja(e){var t=Object(o.useContext)(I),n=Object(o.useState)(""),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return pe({url:"/profile/chessCom/token"}).then(i)}),[i]),s=(e.profile.chessCom||{}).username;return Object(o.useEffect)((function(){s&&(r||l())}),[r,l,s]),function(){var n=Object(f.a)(d.a.mark((function n(){var a,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(a=e.profile.chessCom)||void 0===a?void 0:a.verified)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,be({url:"/profile/chessCom/verify"}).then(e.updateProfile).catch((function(){}));case 4:t({title:"Verify your chess.com account",icon:c.a.createElement("img",{src:aa.chessCom.icon[1],alt:"chessCom"}),link:aa.chessCom.idLink.replace("|",(null===(i=e.profile.chessCom)||void 0===i?void 0:i.username)||""),message:c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Head to your chess.com profile and click 'Enter a status here'. Copy and paste the following code into your status. Don't worry! You can change it back afterwards!"),c.a.createElement("span",{className:"mono"},"SCORCH_TOKEN=",r),c.a.createElement("p",null,"Click ",c.a.createElement("button",{onClick:function(){return be({url:"/profile/chessCom/verify"}).then((function(){return t({title:"",message:""})})).then(e.updateProfile)}},"here")," when done."))});case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}function ya(e){var t=e.profile,n=e.showVerified,a=e.validate,r=void 0===a?function(){return!0}:a,i=e.forceFacebook,l=_a({elem:e.elem}).getClubName,s=Object(o.useMemo)((function(){return t?Object.entries(aa).map((function(e,n){var a=Object(h.a)(e,2),i=a[0],o=a[1];if(!(o=Object.assign(aa[i],{id:i})))return null;var c=t[i];return"email"===i&&"string"===typeof t.email&&(c=t.email?Object.assign({},t.emailMeta,{id:t.email}):void 0),c&&"object"===typeof c&&r(c)?[o,c]:null})).filter((function(e){return e})):[]}),[t,r]),u=Object(o.useMemo)((function(){return s.map((function(e,t){var a=Object(h.a)(e,2),r=a[0],o=a[1];return o.link||r.idLink||r.link?c.a.createElement("a",{id:r.id,href:o.link||("facebook"!==r.id||i?(r.idLink||r.link).replace("|",o.username||o.id||""):void 0),className:["button","link",pa.a.account].join(" "),rel:"noopener noreferrer",target:"_blank",key:["a",t].join(".")},"string"===typeof r.icon[1]?c.a.createElement("img",{src:r.icon[1],alt:r.id,className:pa.a.icon}):c.a.cloneElement(r.icon[1],{className:pa.a.icon}),l(r,o),!1!==n&&o.verified?c.a.createElement(E.m,{className:"verified"}):null):c.a.createElement("div",{id:r.id,key:["div",t].join("."),className:["button","link",pa.a.account].join(" ")},"string"===typeof r.icon[1]?c.a.createElement("img",{src:r.icon[1],alt:r.id,className:pa.a.icon}):c.a.cloneElement(r.icon[1],{className:pa.a.icon}),l(r,o).length>20?"":l(r,o),!1!==n&&o.verified?c.a.createElement(E.m,{className:"verified"}):null)}))}),[l,s,n,i]);return{fields:s,links:u}}function ka(e){var t,n,a,r,i,l,s,u,m,p,b,g,y,k,O,N=!e.updateProfile&&!1!==e.small,C=Object(o.useContext)(L).isLoggedIn,S=Object(o.useContext)(M).isAuthed,x=Object(o.useRef)(),R=ya({profile:e.profile,validate:function(t){return"user"===e.type||!t.verified},elem:x.current}),P=R.fields,B=R.links,T=function(e){var t=Object(o.useContext)(I),n=_a(),a=n.getClubName,r=n.chessComClub,i=e.fields,l=Object(o.useCallback)((function(){t({title:"",message:""}),be({url:[e.type,e.id,"create"].join("/")}).then(e.updateProfile)}),[e.id,e.type,e.updateProfile,t]),s=Object(o.useRef)(null),u=Object(o.useCallback)((function(){var n;return s.current?be({url:H(e.type,e.id,"createCode"),data:{code:null===(n=s.current)||void 0===n?void 0:n.value}}).then(e.updateProfile).then((function(){return t({title:"",message:""})})):Promise.resolve()}),[s,e.id,e.type,e.updateProfile,t]),m=Object(o.useCallback)((function(e){var t;switch(e.keyCode){case 27:(null===(t=s.current)||void 0===t?void 0:t.value)&&(s.current.value="");break;case 13:u()}}),[u,s]),p=Object(o.useCallback)(Object(f.a)(d.a.mark((function n(){var o,f;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(f=!1,e.profile){n.next=3;break}return n.abrupt("return");case 3:t({title:"Claim "+e.type,message:c.a.createElement(c.a.Fragment,null,z(e.type)," ",c.a.createElement("b",null,e.profile.name)," has the following available authentication methods:",c.a.createElement("div",{className:pa.a.auth},c.a.createElement("input",{ref:s,onKeyDown:m,autoFocus:!0,spellCheck:!1,placeholder:"xxxx-xxxx"}),c.a.createElement("div",{className:w()("button","link",pa.a.submit,pa.a.account,Object(j.a)({},pa.a.null,null===(o=s.current)||void 0===o?void 0:o.value)),onClick:u},c.a.createElement(E.t,{className:pa.a.icon}),"Claim via code",c.a.createElement(E.d,null)),i.map((function(n,i){var o=Object(h.a)(n,2),s=o[0],u=o[1],m=e.profile&&e.profile["email"===s.id?"emailMeta":s.id],d=a(s,u),p=function(){var e;return m?!(!u.id||u.id!==m.id)||(!(!u.username||u.username.toLowerCase()!==(null===(e=m.username)||void 0===e?void 0:e.toLowerCase()))||!!("chessCom"===s.id&&r&&r.admin&&r.admin.some((function(e){var t;return e.split("/").pop()===(null===m||void 0===m||null===(t=m.username)||void 0===t?void 0:t.toLowerCase())})))):null}();return!1!==p&&(f=!0),null===p?c.a.createElement(c.a.Fragment,null,c.a.createElement(v.b,{to:"/me/accounts",id:s.id,className:["button","link",pa.a.account].join(" "),onClick:function(){return t({title:"",message:""})}},"string"===typeof s.icon[1]?c.a.createElement("img",{src:s.icon[1],alt:s.id,className:pa.a.icon}):c.a.cloneElement(s.icon[1],{className:pa.a.icon}),"Link ",s.name||z(s.id)," account",c.a.createElement(E.d,null)),c.a.createElement("div",null)):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:s.id,className:["button","link",pa.a.account,!1===p?pa.a.null:""].join(" "),onClick:p?l:function(){}},"string"===typeof s.icon[1]?c.a.createElement("img",{src:s.icon[1],alt:s.id,className:pa.a.icon}):c.a.cloneElement(s.icon[1],{className:pa.a.icon}),p?c.a.createElement(c.a.Fragment,null,"Claim via ",s.name||z(s.id)):d,p?c.a.createElement(E.d,null):c.a.createElement(E.f,null)),c.a.createElement("div",{className:pa.a.authMessage},p?null:!1===p?c.a.createElement("small",null,s.authMessage):c.a.createElement("small",null,"You need to link your ",s.name||z(s.id)," account to use it as an authentication method here.")))}))),f?null:Object.values(i).length?c.a.createElement(c.a.Fragment,null,"You do not have any available authentication methods for this ",e.type,".",c.a.createElement("br",null),"Do you definitely own it?"):c.a.createElement(c.a.Fragment,null,"There are no available authentication methods for this ",e.type,".",c.a.createElement("br",null),"Submit a request to your Tournament director."))});case 4:case"end":return n.stop()}}),n)}))),[l,i,e,u,a,t,r,m,s]),b=Object(o.useState)(!1),g=Object(h.a)(b,2),_=g[0],y=g[1];return Object(o.useEffect)((function(){if(window.location.search){var e=new URLSearchParams(window.location.search).get("claim");e&&(_||(p(),s.current&&(s.current.value=e,y(!0))))}}),[p,s,_,y]),{handleCreate:p,fields:i}}(Object(_.a)({},e,{fields:P})).handleCreate,A=Object(o.useMemo)((function(){var t;return Object.entries((null===(t=e.profile)||void 0===t?void 0:t.meta)||{}).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return a?(n=n.trim()).startsWith("_")?null:(n.endsWith("?")&&(n=n.slice(0,-1)),"boolean"===typeof a?n:(n+=": ")+a.toString()):null})).filter((function(e){return e}))}),[e.profile]),D=Object(o.useMemo)((function(){return A.map((function(e,t){return e?c.a.createElement("div",{className:pa.a.notes},c.a.createElement("div",{key:["line",t].join(".")},e)):null}))}),[A]),F=Object(o.useMemo)((function(){var t,n,a,r,i,o,l;return c.a.createElement(c.a.Fragment,null,"user"===e.type?c.a.createElement("div",{className:[ha.a.status,(null===(t=e.profile)||void 0===t?void 0:t.online)?ha.a.online:""].join(" ")},(null===(n=e.profile)||void 0===n?void 0:n.isLicensed)?c.a.createElement(E.y,{title:"Licensed"}):c.a.createElement(E.r,{style:{fontSize:"0.5em"},title:(null===(a=e.profile)||void 0===a?void 0:a.online)?"Online":"Offline"})):null,c.a.createElement(v.b,{to:H("user"===e.type?"@":e.type,(null===(r=e.profile)||void 0===r?void 0:r.username)||"")},c.a.createElement("h1",null,(null===(i=e.profile)||void 0===i?void 0:i.username)||(null===(o=e.profile)||void 0===o?void 0:o.name),(null===(l=e.profile)||void 0===l?void 0:l.verified)?c.a.createElement(E.m,{className:"verified"}):null)))}),[e.profile,e.type]);return e.profile||!1!==e.renderNull?c.a.createElement("div",{"data-aos":"fade-left","data-aos-delay":e.i?e.i%Math.min(4,Math.floor(window.innerWidth/300))*100:void 0,className:w()("container",ha.a.info,Object(j.a)({},ha.a.small,N),e.className),ref:x},c.a.createElement("div",{className:ha.a.flag},(null===(t=e.profile)||void 0===t?void 0:t.nationality)?q(null===(n=e.profile)||void 0===n?void 0:n.nationality):null),N||e.showLinks?c.a.createElement(v.b,{className:ha.a.name,to:["","user"===e.type?"@":e.type,null===(a=e.profile)||void 0===a?void 0:a.id].join("/")},F):c.a.createElement("div",{className:ha.a.name},F),(null===(r=e.profile)||void 0===r?void 0:r.bio)?c.a.createElement("div",{className:ha.a.bio},null===(i=e.profile)||void 0===i?void 0:i.bio):S?c.a.createElement("div",{className:["button","link",ha.a.account].join(" "),onClick:e.updateBio},"Add a ","team"!==e.type?"bio":"description","?",c.a.createElement(E.d,null)):c.a.createElement("div",{className:ha.a.bio}),c.a.createElement("div",{className:ha.a.cols},c.a.createElement("div",{className:ha.a.details},"team"===e.type&&(null===(l=e.profile)||void 0===l?void 0:l.founder)?c.a.createElement("div",{className:ha.a.detail},c.a.createElement("div",{className:ha.a.title},"Founder"),c.a.createElement(v.b,{to:"/@/"+(null===(s=e.profile)||void 0===s?void 0:s.founder),className:"playerName"},null===(u=e.profile)||void 0===u?void 0:u.founder)):null,"team"===e.type&&(null===(m=e.profile)||void 0===m?void 0:m.users)?c.a.createElement("div",{className:ha.a.detail},c.a.createElement("div",{className:ha.a.title},"Size"),c.a.createElement(v.b,{to:["","team",e.id,"members"].join("/"),className:"playerName"},null===(p=e.profile)||void 0===p?void 0:p.users.length)):null,c.a.createElement("div",{className:ha.a.detail},c.a.createElement("div",{className:ha.a.title},"team"===e.type?"Created":"Joined"),c.a.createElement("div",null,e.profile?new Date(e.profile.createdAt).toString().slice(0,15):null))),c.a.createElement("div",{className:ha.a.buttons},e.updateProfile&&C&&!S&&"user"!==e.type?"team"===e.type&&!(null===(b=e.profile)||void 0===b?void 0:b.teamId)||"player"===e.type&&!(null===(g=e.profile)||void 0===g?void 0:g.userId)?c.a.createElement("div",{className:["button","link",ha.a.account].join(" "),onClick:T},"This ",e.type," is unclaimed. Register ",e.type,"?",c.a.createElement(E.d,null)):c.a.createElement("div",{className:["button","link",ha.a.account,ha.a.claim].join(" ")},"Registered"):null,C?Object.values(P).length||N?B:c.a.createElement("div",{className:ha.a.row},"No contact details registered"):c.a.createElement("div",{className:ha.a.row},c.a.createElement(v.b,{to:"/login",className:["button","link"].join(" ")},"Sign in to view contact details","team"===e.type?" and members":"")),N?null:D.length&&D.some((function(e){return e}))?D.map((function(e,t){return c.a.createElement("div",{key:w()("note",t),className:ha.a.row},e)})):null)),(null===(y=e.profile)||void 0===y?void 0:y.users)?c.a.createElement("div",{className:ha.a.detail},c.a.createElement("div",{className:ha.a.title},"Members"),c.a.createElement("div",{className:ha.a.memberBox},null===(k=e.profile)||void 0===k?void 0:k.users.map((function(t,n){var a;return c.a.createElement(v.b,{to:"/@/"+(null===(a=e.profile)||void 0===a?void 0:a.founder),className:"playerName",key:w()("user",n.toString())},t.username)})))):null,N||e.showLinks?c.a.createElement(v.b,{className:["button",ha.a.more].join(" "),to:["","user"===e.type?"@":e.type,null===(O=e.profile)||void 0===O?void 0:O.id].join("/")},"Profile ",c.a.createElement(E.d,null)):null):null}var wa=n(116),Oa=n.n(wa);function Na(e){var t;if(!e.loaded.all)return null;var n=(t={format:z(e.settings.pairingSystem),created:new Date(e.status.createdAt).toString().slice(4,15),type:z(e.settings.competitors)+"s"},Object(j.a)(t,z("team"===e.settings.competitors?"Teams":"Players"),e.status.players),Object(j.a)(t,"games",1===e.settings.gamePointTotal?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,Math.ceil(e.players.reduce((function(e,t){return e+t.histories.reduce((function(e,t){return t?e+=t.played:e}),0)}),0)/2)))),Object(j.a)(t,"location",e.settings.location),Object(j.a)(t,"Time control",e.settings.timeControl),Object(j.a)(t,"status",!1!==e.status.active?"Live":e.status.round?"Finished":"Not yet started"),t),a=Object.entries(n).map((function(e,t){var n=Object(h.a)(e,2),a=n[0],r=n[1];return r?c.a.createElement(c.a.Fragment,{key:w()(a,t)},c.a.createElement("div",{className:Oa.a.infoKey},z(a),":"),c.a.createElement("div",{className:Oa.a.infoValue},r)):null}));return c.a.createElement("div",{className:Oa.a.tournament_info},c.a.createElement("div",null,a),e.settings.prizes?c.a.createElement("div",{className:Oa.a.tieBreakLink,onClick:function(){return e.setFloat("prizes")}},"Prizes"):null)}var Ca=n(39),Sa=n.n(Ca);function xa(e){var t=Object(o.useState)(0),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useCallback)((function(){r(Math.trunc(e.height/36)-3)}),[e.height,r]);Object(o.useEffect)((function(){i()}),[i]);var l=Object(o.useRef)(null),s=Object(o.useCallback)((function(e){return l.current?(l.current.focus(),!e):!e}),[]),u=Object(o.useReducer)(s,!1),m=Object(h.a)(u,2),d=m[0],f=m[1];Object(o.useEffect)((function(){l.current&&(l.current.focus(),console.log(document.activeElement),console.log(l.current),console.log("focused",d))}),[f]);var p=Object(o.useState)(!1),b=Object(h.a)(p,2),g=b[0];b[1];Object(o.useEffect)((function(){return window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[i]);var _=Object(o.useMemo)((function(){if(!e.players.length)return[];for(var t=[],n=e.players.length<a||d?e.players.length:a,r=0;r<n;r++){var i=e.players[r];"bye"!==i.id&&t.push([i.nationality,i.firstName,i.id?"/team/"+i.id:""])}return t.map((function(e,t,n){var a,r,i,o=Object(h.a)(e,3),s=o[0],u=o[1],m=o[2];return c.a.createElement("tr",{key:t,id:t!==n.length-1||d?void 0:Sa.a.rowLast,ref:t!==n.length-1||d?void 0:l,className:w()(Sa.a.tr,{even:t%2===0,odd:t%2})},c.a.createElement("td",{className:w()(Sa.a.cell,(a={},Object(j.a)(a,Sa.a.moreHidden,!g&&!Fe()),Object(j.a)(a,"hidden",!1),a))},t+1),c.a.createElement("td",{className:w()(Sa.a.cell,Sa.a.flag,(r={},Object(j.a)(r,Sa.a.moreHidden,!g&&!Fe()),Object(j.a)(r,"hidden",!1),r))},q(s)||s),c.a.createElement("td",{className:w()(Sa.a.cell,(i={},Object(j.a)(i,Sa.a.moreHidden,!g&&!Fe()),Object(j.a)(i,"hidden",!1),i))},c.a.createElement(v.b,{to:m},u)))}))}),[e.players,a,d]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("table",{className:w()("download-table full-width",Sa.a.table,"standings")},c.a.createElement("thead",null,c.a.createElement("tr",null,["Rank","Fed","Team"].map((function(e,t){return c.a.createElement("th",{scope:"column",key:["column",t].join("."),className:w()(Sa.a.th,Sa.a.stickyheader),id:e},c.a.createElement("div",{className:[Sa.a.cell,Sa.a.headerCell].join(" ")},e))})),g&&!Fe()?c.a.createElement("th",{className:w()(Sa.a.cell,Sa.a.spacer)}):null)),c.a.createElement("tbody",null,e.players.length?_:c.a.createElement("tr",null,c.a.createElement("td",{colSpan:42},"No players entered yet")))),e.players.length>a?c.a.createElement("button",{onMouseDown:function(){console.log(document.activeElement),f()},className:Sa.a.showAllButton},d?c.a.createElement(E.e,null):c.a.createElement(E.b,null)):null)}var La=n(56),Ma=n.n(La);function Ra(e){var t=Xe(e.settings).getName,n=Object(o.useState)([]),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useState)({}),s=Object(h.a)(l,2),u=s[0],m=s[1],d=Object(o.useContext)(L).isLoggedIn,f=Object(o.useState)(!1),v=Object(h.a)(f,2),p=v[0],b=v[1],g=Object(o.useRef)(),_=Kt({playerDict:e.playerDict,results:r,settings:e.settings}),j=(_.matches,_.matchDict),y=_.setMatch,k=_.populatematchDict,O=_.fetchedMatch,N=_.fetchNext,C=_.hasFetched,S=_.beforeSetResults,x=Jt(),M=x.searched,R=x.expanded,P=x.visible,B=(x.setSearched,x.setExpanded),T=(x.setVisible,Object(o.useCallback)((function(t){return pe({url:H("tournament",e.id,"getPairings"),params:{round:e.round,ids:null===t||void 0===t?void 0:t.join(","),games:!0}}).then((function(e){return m(e.reduce((function(e,t){return e[t.id]=t.games,e}),{}))}))}),[e.id,e.round,m]));Object(o.useEffect)((function(){S(),i([])}),[i,S,e.round]),Object(o.useEffect)((function(){k(r,e.round)}),[k,r]),Object(o.useEffect)((function(){N()}),[N]),Object(o.useEffect)((function(){pe({url:"/tournament/"+e.id+"/getPairings",params:{round:e.round}}).then((function(e){return i(e),b(!0),e})).then((function(t){window.location.hash||(e.round,e.status.round)})).catch((function(){}))}),[i,e.round,e.id,T,e.status.round]);var A=Object(o.useMemo)((function(){return r.reduce((function(e,t){var n=t.pool||0;return e[n]||(e[n]=0),e[n]++,e}),[])}),[r]),I=Object(o.useReducer)((function(e){return!e}),!1),D=Object(h.a)(I,2),F=D[0],W=D[1],U=Object(o.useState)(0),G=Object(h.a)(U,2),V=G[0],q=G[1],Y=Object(o.useMemo)((function(){return Object.values(j).filter((function(e){return!!e&&!e.isFinished})).sort((function(e,t){return e?t?e.board-t.board:1:-1}))}),[j]),J=Object(o.useCallback)((function(n){var a=n.pool;return c.a.createElement(c.a.Fragment,null,Y.map((function(n,r){var i,o,l,s,m,f,h,v,p,b;if(1===V&&!n.isFeatured)return null;if(!F&&r>10)return null;n.id in u&&(n.games=u[n.id]);var g=n.startTime||n.registrationTime,E=new Date(g||0).toString(),_=[t(n.w),null!==(i=n.scores[0])&&void 0!==i?i:(n.isLive||n.isFinished)&&n.teams&&((null===(o=n.w)||void 0===o?void 0:o.chessCom)||(null===(l=n.b)||void 0===l?void 0:l.chessCom))?n.teams[0].score:"",t(n.b),null!==(s=n.scores[1])&&void 0!==s?s:(n.isLive||n.isFinished)&&n.teams&&((null===(m=n.w)||void 0===m?void 0:m.chessCom)||(null===(f=n.b)||void 0===f?void 0:f.chessCom))?n.teams[1].score:"",g?E.slice(0,10)+"\n"+E.slice(16,21):"",n.link,n.w?n.w.nationality:"",n.b?n.b.nationality:""];return c.a.createElement(dn,Object.assign({key:["row",n.board].join("."),i:r},{data:_,match:n,pool:a,setMatch:y,setExpanded:B,fetchGames:T},{setFinished:C,round:e.round,fetch:!!O&&O.id===n.id,expanded:R.includes(n.id),highlight:d&&n.w&&n.b&&(n.w.id===(null===(h=e.profile)||void 0===h?void 0:h.username)||n.b.id===(null===(v=e.profile)||void 0===v?void 0:v.username)||(null===(p=e.profile)||void 0===p||null===(b=p.teams)||void 0===b?void 0:b.some((function(e){return e&&(e.id===n.w.teamId||e.id===n.b.teamId)})))),hidden:"all"!==P&&n.status!==P||!!M.length&&!M.some((function(e){var t,a;return e.id===(null===(t=n.w)||void 0===t?void 0:t.id)||e.id===(null===(a=n.b)||void 0===a?void 0:a.id)})),settings:e.settings}))})))}),[V,u,t,O,B,R,M,j,C,P,T,y,e.round,e.settings,e.profile,d]),Q=[["Fed","5%"],["White","22.5%"],["Link","12.5%"],["","5%"],["Start Time","10%"],["","5%"],["Watch Live","12.5%"],["Black","22.5%"],["Fed","5%"]],X=["upcoming","featured"],Z=Object(o.useMemo)((function(){return c.a.createElement(c.a.Fragment,null,X.map((function(e,t){return c.a.createElement("div",{key:t,onClick:function(){return q(t)},className:["header-button",Ma.a.menuItems,V===t?Ma.a.selectedItem:""].join(" ")},z(e))})))}),[q,V]);return Y.length?0===Object.keys(j).length||j.constructor!==Object?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Ma.a.featured},c.a.createElement("div",{className:["container","bodyContainer",Ma.a.headingContainer].join(" ")},c.a.createElement("div",{className:[Ma.a.headerItems,"button-list"].join(" ")},Z)),function(){for(var t=[],n=!1,a=0;a<A.length;a++)A[a]&&(t.push(c.a.createElement("div",{key:["table",a].join("."),className:w()(Ma.a.table,{still:M.length})},a?c.a.createElement("div",{className:Ma.a.pool},"Pool ",K(a,e.settings.poolDisplay)):null,c.a.createElement("table",{className:w()("download-table","full-width","pairings",Ma.a.featured_table)},c.a.createElement("thead",null,c.a.createElement("tr",{ref:n?null:g},Q.map((function(e,t){return c.a.createElement("td",{key:t,className:Ma.a.stickyheader,style:{width:e[1]}},e[0])})))),c.a.createElement("tbody",{className:Ma.a.tbody},p&&!r.length?c.a.createElement("tr",null,c.a.createElement("td",{colSpan:100},"Draw has not yet taken place!")):null,c.a.createElement(J,{pool:a}))),Y.length>=10?c.a.createElement("button",{onClick:function(){return W()},className:Ma.a.showAllButton},F?c.a.createElement(E.e,null):c.a.createElement(E.b,null)):null)),n=!0);return t}())):null}var Pa=n(43),Ba=n.n(Pa);function Ta(e){var t=e.profile,n=e.updateProfile,a=Object(o.useContext)(I),r=Object(o.useCallback)((function(e,t){return be({url:"/profile/updateAccount",data:{account:e,data:t}}).then(n)}),[n]);return{updateBio:Object(o.useCallback)((function(){a({title:"Add a description",message:"Keep it short and sweet. Maximum length 280 characters.",type:"prompt",prompt:{type:"textarea",defaultValue:(null===t||void 0===t?void 0:t.bio)||"",allowNull:!0,additionalInputProps:{maxLength:280}},resolve:function(e){return r("bio",e)}})}),[a,r,t])}}function Aa(){var e=Object(o.useContext)(x);return{tieBreaks:Object(o.useMemo)((function(){var t=Object.entries(C);if(e.tieBreaks){var n=e.tieBreaks.split(",");t=t.sort((function(e,t){return n.indexOf(e[0])-n.indexOf(t[0])}))}return t}),[e])}}function Ia(e){var t=Object(o.useState)(null),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useCallback)(Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(De.test(e.status.user)){t.next=2;break}return t.abrupt("return",r(null));case 2:pe({url:H("user",e.status.user)}).then(r).catch((function(){return r(null)}));case 3:case"end":return t.stop()}}),t)}))),[e.status.user,r]);Object(o.useEffect)((function(){i()}),[i]);var l=Ta({profile:a,updateProfile:i}).updateBio,s=Object(o.useReducer)((function(e,t){return e===t?"":t}),""),u=Object(h.a)(s,2),m=(u[0],u[1]),v=Aa().tieBreaks;Object(o.useEffect)((function(){i()}),[i]);var p=Object(o.useRef)(null),b=Object(o.useState)(0),g=Object(h.a)(b,2),E=g[0],j=g[1],y=Object(o.useCallback)((function(){if(p.current){var e=p.current.getBoundingClientRect().height;j(e)}}),[p,j]);Object(o.useEffect)((function(){y()}));var k=Object(o.useRef)(null),O=Object(o.useState)(0),N=Object(h.a)(O,2),C=N[0],S=N[1];Object(o.useEffect)((function(){if(k.current&&e.announcements.length){var t=k.current.getBoundingClientRect().height;S(t)}}),[e.announcements,k,S]);var x=Object(o.useState)(0),L=Object(h.a)(x,2),M=L[0],R=L[1];Object(o.useEffect)((function(){R(E-C)}),[C,E]);var P=Object(o.useMemo)((function(){return c.a.createElement(c.a.Fragment,null,e.settings.description?c.a.createElement("div",{className:w()("container",Ba.a.description)},e.settings.description):null,c.a.createElement("div",{className:Ba.a.info_organiser_container},c.a.createElement(Na,Object.assign({},e,{setFloat:m})),c.a.createElement(ka,{type:"user",id:e.status.user,profile:a,updateProfile:i,updateBio:l,className:Ba.a.organiser_container})),c.a.createElement("section",{className:Ba.a.tieBreakSection},c.a.createElement("div",{className:w()("container",Ba.a.tieBreakContainer)},c.a.createElement("div",null,c.a.createElement("div",{className:Ba.a.tieBreakTitle},"Tie Breaks"),c.a.createElement("div",{className:Ba.a.tieBreaks},v.slice(0,v.findIndex((function(e){return null===Object(h.a)(e,2)[1]}))).map((function(e,t){var n=Object(h.a)(e,2)[1];return n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:[n,t,"1"].join(" ")},"#",t+1),c.a.createElement("div",{key:[n,t,"2"].join(" ")},n.name)):null})))))),c.a.createElement(Ra,{playerDict:e.playerDict,settings:e.settings,id:e.id,round:e.round,status:e.status,profile:a,direction:e.direction}),c.a.createElement("div",{id:"live",className:Ba.a.live},c.a.createElement(Wn,{streamURL:e.settings.streamURL,pop:e.pop,isLive:e.isLive,screenWidthProportion:5/8})))}),[e.status.user,a,i,l,e.status,e.settings,e.players,e.loaded]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:Ba.a.container},c.a.createElement("div",{className:Ba.a.left_column,ref:p},P),c.a.createElement("div",{className:Ba.a.teams_announcements},c.a.createElement("h1",{className:Ba.a.header},"Registered Players"),c.a.createElement("div",{className:w()(Ba.a.teams_list)},c.a.createElement(xa,{players:e.players,height:M})),e.announcements.length?c.a.createElement("div",{className:Ba.a.announcements,ref:k},c.a.createElement("div",{className:Ba.a.header}," Announcements "),c.a.createElement(la,{announcements:e.announcements.map((function(t,n){return Object(_.a)({},t,{content:t.announcement,id:n.toString(),tournamentId:e.status.id,author:"",role:"director",title:"",link:""})}))})):null)))}function Da(e){var t=Object(o.useState)(10),n=Object(h.a)(t,2),a=n[0];n[1];return e.children?c.a.createElement("div",{className:["popped",na.a.draggable].join(" "),style:{bottom:a}},e.children):null}n(378),n(372);function Fa(e){var t=Object(o.useState)(!1),n=Object(h.a)(t,2),a=n[0],r=n[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("img",Object.assign({},e,{onClick:function(){return r(!a)},style:{cursor:"pointer"}})),c.a.createElement(Yn.b,null,a?c.a.createElement(Yn.a,{onClose:function(){return r(!1)}},c.a.createElement(Yn.c,{currentIndex:0,views:[Object.assign({},e,{source:e.src})]})):null))}function Wa(e){return c.a.createElement("div",{style:{transform:"scale(".concat(e.diameter/254,")"),width:254,height:254},className:e.className},c.a.createElement("svg",{width:254,height:254},c.a.createElement("linearGradient",{id:"linearColors1",x1:"0",y1:"0",x2:"1",y2:"1"},c.a.createElement("stop",{offset:"0%",stopColor:"#01E400"}),c.a.createElement("stop",{offset:"100%",stopColor:"#FEFF01"})),c.a.createElement("linearGradient",{id:"linearColors2",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},c.a.createElement("stop",{offset:"0%",stopColor:"#FEFF01"}),c.a.createElement("stop",{offset:"100%",stopColor:"#FF7E00"})),c.a.createElement("linearGradient",{id:"linearColors3",x1:"1",y1:"0",x2:"0",y2:"1"},c.a.createElement("stop",{offset:"0%",stopColor:"#FF7E00"}),c.a.createElement("stop",{offset:"100%",stopColor:"#FB0300"})),c.a.createElement("linearGradient",{id:"linearColors4",x1:"1",y1:"1",x2:"0",y2:"0"},c.a.createElement("stop",{offset:"0%",stopColor:"#FB0300"}),c.a.createElement("stop",{offset:"100%",stopColor:"#9B004A"})),c.a.createElement("linearGradient",{id:"linearColors5",x1:"0.5",y1:"1",x2:"0.5",y2:"0"},c.a.createElement("stop",{offset:"0%",stopColor:"#9B004A"}),c.a.createElement("stop",{offset:"100%",stopColor:"#7D0022"})),c.a.createElement("linearGradient",{id:"linearColors6",x1:"0",y1:"1",x2:"1",y2:"0"},c.a.createElement("stop",{offset:"0%",stopColor:"#7D0022"}),c.a.createElement("stop",{offset:"100%",stopColor:"#01E400"})),c.a.createElement("path",{d:"M126 10 a120 120 0 0 1 103.9230 60",fill:"none",stroke:"url(#linearColors1)",strokeWidth:e.width}),c.a.createElement("path",{d:"M229.9230 70 a120 120 0 0 1 0 120",fill:"none",stroke:"url(#linearColors2)",strokeWidth:e.width}),c.a.createElement("path",{d:"M229.9230 190 a120 120 0 0 1 -103.9230 60",fill:"none",stroke:"url(#linearColors3)",strokeWidth:e.width}),c.a.createElement("path",{d:"M126 250 a120 120 0 0 1 -103.9230 -60",fill:"none",stroke:"url(#linearColors4)",strokeWidth:e.width}),c.a.createElement("path",{d:"M22.077 190 a120 120 0 0 1 0 -120",fill:"none",stroke:"url(#linearColors5)",strokeWidth:e.width}),c.a.createElement("path",{d:"M22.077 70 a120 120 0 0 1 103.9230 -60",fill:"none",stroke:"url(#linearColors6)",strokeWidth:e.width})))}var Ua=n(373),Ga=n.n(Ua),Ha=n(22),za=n.n(Ha);function Va(e){return!e.to||Te.test(e.to)||e.to.startsWith("#")?c.a.createElement("a",Object.assign({href:e.to||void 0,rel:"noopener noreferrer",target:"_blank"},e),e.children):c.a.createElement(v.b,Object.assign({},e,{href:e.to}),e.children)}var qa=/^(?:rgb)?([0-9]{1,3})[,\s]+\s?([0-9]{1,3})[,\s]+?([0-9]{1,3})$/,Ka=function(){function e(t){Object(re.a)(this,e),this.arr=t}return Object(ie.a)(e,[{key:"fromRGB",value:function(e){var t=e.match(qa);return t?this.arr=t.slice(1).map((function(e){return Number(e)})):null}},{key:"fromHex",value:function(e){var t=e.match(qa);if(!t)return null;var n=t[1],a=[n.slice(-6,-4),n.slice(-4,-2),n.slice(-2,0)];return this.arr=a.map((function(e){return parseInt(e,16)}))}},{key:"byDecimal",value:function(e){if(e<0||e>16777215)throw new RangeError("Numbers must be within 0 to 1677777215 range");return this.fromHex(e.toString(16))}},{key:"getText",value:function(){return this.arr&&this.arr.reduce((function(e,t){return e+t}),0)/3<127.5?"white":"black"}},{key:"toDecimal",value:function(){return this.arr?parseInt(this.arr.map((function(e){return e.toString(16)})).join(""),16):0}}],[{key:"randDecimal",value:function(){return parseInt(e.randHex().join(""),16)}},{key:"randHex",value:function(){return e.randRGB().map((function(e){return e.toString()}))}},{key:"randRGB",value:function(){for(var e=[],t=0;t<2;t++)e[t]=V(0,255);return e}}]),e}();function Ya(){return"dark"===ve.getLocal("theme")}function Ja(){ve.setLocal("theme",Ya()?"light":"dark"),window.dispatchEvent(new Event("theme"))}function Qa(e){var t=e.tournaments,n=Object(o.useState)({}),a=Object(h.a)(n,2),r=a[0],i=a[1],c=Object(o.useCallback)((function(){if(t.length){var e,n=[],a=[],r=Object(y.a)(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.logoURL&&(o.name&&(n.push(Ga.a.from(o.logoURL).getPalette().catch((function(){}))),a.push(o.id)))}}catch(c){r.e(c)}finally{r.f()}Promise.all(n).then((function(e){return e})).then((function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];r&&(t[a[n]]=r)}i(t)}))}}),[t,i]);Object(o.useEffect)((function(){c()}),[c]);var l=Object(o.useMemo)((function(){for(var e={},t=0,n=Object.entries(r);t<n.length;t++){var a,i,o,c,l=Object(h.a)(n[t],2),s=l[0],u=l[1],m=[null===(a=u.DarkVibrant)||void 0===a?void 0:a.hex,null===(i=u.DarkMuted)||void 0===i?void 0:i.hex,null===(o=u.Vibrant)||void 0===o?void 0:o.hex,null===(c=u.Muted)||void 0===c?void 0:c.hex];e[s]="linear-gradient(160deg, ".concat(m.filter((function(e){return e})).join(", "),")")}return e}),[r]);return{palettes:r,gradients:l}}function Xa(e){var t,n,a,r=e.id,i=e.gradients,o=e.withContainer,l=e.style,s=e.img;e.faded;return s?c.a.createElement("div",{className:w()(za.a.parent,(t={},Object(j.a)(t,za.a.fixed,o),Object(j.a)(t,za.a.lighter,!Ya()),t)),style:Object(_.a)({},l)},c.a.createElement("div",{className:w()(za.a.logoBackground,Object(j.a)({},za.a.lighter,!Ya()))},c.a.createElement("img",{src:s,alt:"\\u200b"})),c.a.createElement("div",{className:w()(za.a.background,(n={},Object(j.a)(n,za.a.faded,za.a.faded),Object(j.a)(n,za.a.fixed,o),Object(j.a)(n,za.a.lighter,!Ya()),n)),style:{backgroundImage:i[r]}})):c.a.createElement("div",{className:w()(za.a.parent,za.a.background,(a={},Object(j.a)(a,za.a.faded,za.a.faded),Object(j.a)(a,za.a.fixed,o),Object(j.a)(a,za.a.lighter,!Ya()),a)),style:Object(_.a)({backgroundImage:i[r]},l)})}function Za(e){var t=e.tournaments,n=e.gradients,a=e.palettes,r=Object(o.useReducer)((function(e,t){return null!==t&&void 0!==t?t:e+1}),0),i=Object(h.a)(r,2),l=i[0],s=i[1];return t.length?c.a.createElement(c.a.Fragment,null,c.a.createElement($a,{key:"background",className:za.a.backContainer,index:l,showDots:!1},Object.keys(n).map((function(e,a){var r=t.find((function(t){return t.id===e}));return r&&r.active?c.a.createElement(Xa,{key:["background",a].join("."),id:e,gradients:n}):null}))),c.a.createElement($a,{key:"foreground",setIndex:s,autoAdvance:8e3},Object.keys(n).map((function(e,n){var r,i,o,l,s,u,m,d,f,h=t.find((function(t){return t.id===e}));return h?c.a.createElement(c.a.Fragment,{key:w()("foreground",n)},c.a.createElement("div",{className:za.a.curr},c.a.createElement("div",{className:za.a.description},h.description?'"'.concat(h.description,'"'):"".concat(h.round," round").concat(1!==h.round?"s":"",". ").concat(h.players," player").concat(1!==h.players?"s":"",".")),c.a.createElement("div",{className:za.a.title},h.name),c.a.createElement("div",{className:za.a.palette},c.a.createElement("div",{className:za.a.box,style:{backgroundColor:null===(r=a[e].Vibrant)||void 0===r?void 0:r.hex}}),[null===(i=a[e].DarkVibrant)||void 0===i?void 0:i.hex,null===(o=a[e].DarkMuted)||void 0===o?void 0:o.hex,null===(l=a[e].Vibrant)||void 0===l?void 0:l.hex,null===(s=a[e].Muted)||void 0===s?void 0:s.hex,null===(u=a[e].LightVibrant)||void 0===u?void 0:u.hex,null===(m=a[e].LightMuted)||void 0===m?void 0:m.hex].map((function(e,t){return e?c.a.createElement("div",{key:["box",t].join("."),className:za.a.box,style:{backgroundColor:e}}):null}))),c.a.createElement(Va,{to:h.href||["","t",h.id].join("/"),className:za.a.frame},c.a.createElement("img",{src:h.logoURL,alt:h.name,className:za.a.logo}))),c.a.createElement(Va,{to:h.href||["","t",h.id].join("/"),style:{backgroundColor:null===(d=a[e].Vibrant)||void 0===d?void 0:d.hex,color:new Ka(null===(f=a[e].Vibrant)||void 0===f?void 0:f.rgb).getText()},className:w()("button",za.a.new)},h.button||"View Tournament",c.a.createElement(E.d,null))):null})))):null}function $a(e){var t,n=e.setIndex,a=Object(o.useReducer)((function(e,t){return null!==t&&void 0!==t?t:e+1}),0),r=Object(h.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)(!1),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(o.useState)(0),v=Object(h.a)(f,2),p=v[0],b=v[1];Object(o.useEffect)((function(){if(m&&void 0===e.index){var t=setTimeout((function(){return d(!1)}),5*(e.autoAdvance||1e4));return function(){return clearTimeout(t)}}}),[e.autoAdvance,e.index,m,d]);var g=e.children?e.children.length:0,E=Object(o.useMemo)((function(){for(var e=[],t=function(t){e.push(c.a.createElement("span",{key:["textGallery","dot",t].join("."),className:w()(za.a.dot,Object(j.a)({},za.a.dotSelected,t===i%g)),onClick:function(){l(t),n&&n(t),d(!0)}}))},a=0;a<g;a++)t(a);return e}),[l,n,g,i,d]),_=Object(o.useCallback)((function(){if(e.autoAdvance){var t;return m||(t=setInterval((function(){l(void 0),n&&n(void 0)}),e.autoAdvance)),function(){return clearInterval(t)}}}),[e.autoAdvance,m,l,n]);Object(o.useEffect)(_,[_]),Object(o.useEffect)((function(){if(e.children){var t=Math.floor(V(0,e.children.length));l(t),n&&n(t)}}),[e.children,l,n]);var y=Object(o.useRef)(),k=Object(o.useCallback)((function(){y.current&&b(y.current.getBoundingClientRect().left)}),[y,b]);Object(o.useEffect)((function(){return k(),window.addEventListener("resize",k),function(){return window.removeEventListener("resize",k)}}),[k]);var O=Object(o.useMemo)((function(){var t;return"calc((-100vw * ".concat((null!==(t=e.index)&&void 0!==t?t:i)%g,") - ").concat(p,"px)")}),[e.index,i,g,p]);return c.a.createElement("div",{className:w()(za.a.rotator,e.className),ref:y},c.a.createElement("div",{className:za.a.stage,style:{left:O}},null===(t=e.children)||void 0===t?void 0:t.map((function(e,t){return c.a.createElement("div",{className:za.a.child,key:w()("textGallery","child",t)},e)}))),!1!==e.showDots?c.a.createElement("div",{className:za.a.selection},E):null)}var er=n(76),tr=n.n(er),nr=function(){if(window.innerWidth<1080)return[window.innerWidth/(window.innerWidth*Math.pow(2,.5)),window.innerWidth];var e=.68*window.innerWidth;return[e/Math.pow(2,.5),e]}(),ar=Object(h.a)(nr,2),rr=ar[0],ir=ar[1];function or(e){var t=parseInt(window.location.hash.slice(1)),n=Object(o.useReducer)((function(e,t){return"decrement"===t?(window.location.hash="#"+(e-1).toString(),e-1):"increment"===t?(window.location.hash="#"+(e+1).toString(),e+1):e}),isNaN(t)?1:t),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useMemo)((function(){var t=e.settings.rulesURL;return t?t.startsWith("https")?t:t.replace("http://","https://s3.eu-west-2.amazonaws.com/"):""}),[e.settings.rulesURL]);return c.a.createElement("section",{className:tr.a.columns},c.a.createElement("embed",{key:r,src:l+(r?"#page="+r:""),type:"application/pdf",title:"UK University Chess League Rules",height:rr,width:ir}),c.a.createElement("div",{className:tr.a.controls},c.a.createElement("div",{className:tr.a.title},"Quick Navigation"),c.a.createElement("div",{className:tr.a.arrows},c.a.createElement("div",{className:tr.a.arrow,onClick:function(){return i("decrement")}},c.a.createElement(E.c,null)),c.a.createElement("div",{className:tr.a.arrow,onClick:function(){return i("increment")}},c.a.createElement(E.d,null))),c.a.createElement("div",{className:tr.a.link},c.a.createElement("input",{value:window.location.href}))))}function cr(e){var t,n=e.match.params.id,a=Object(o.useState)(null),r=Object(h.a)(a,2),i=r[0],l=r[1],s=Aa().tieBreaks,u=function(e){var t=e.id,n=Object(o.useReducer)((function(e,t){var n=t.action,a=t.set,r=Object.assign({},e);return r[n]=void 0===a||a,Object.values(r).length>=4&&(r.all=!0),r}),{}),a=Object(h.a)(n,2),r=a[0],i=a[1],c=Object(o.useState)({}),l=Object(h.a)(c,2),s=l[0],u=l[1],m=Object(o.useState)({}),d=Object(h.a)(m,2),f=d[0],v=d[1],p=Object(o.useState)([]),b=Object(h.a)(p,2),g=b[0],E=b[1],_=Object(o.useState)([]),j=Object(h.a)(_,2),y=j[0],k=j[1],w=Object(o.useState)(!1),O=Object(h.a)(w,2),N=O[0],C=O[1],S=Object(o.useState)([]),x=Object(h.a)(S,2),L=x[0],M=x[1];return Object(o.useEffect)((function(){pe({url:"/tournament/"+t+"/fetchPlayers"}).then(k).then((function(){return i({action:"players"})})).catch((function(){return i({action:"players",set:!1})}))}),[k,t,i]),Object(o.useEffect)((function(){pe({url:"/tournament/"+t+"/getSettings"}).then(u).then((function(){return i({action:"settings"})})).catch((function(){return i({action:"settings",set:!1})}))}),[u,t,i]),Object(o.useEffect)((function(){pe({url:"/tournament/"+t+"/getState"}).then((function(e){var t=e.players,n=Object.entries(t).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return[Number(n),a]})).sort((function(e,t){return t[0]-e[0]})).reduce((function(e,t){return e.concat(t[1])}),[]);E(n)})).then((function(){return i({action:"state"})})).catch((function(){return i({action:"state",set:!1})}))}),[E,t,i]),Object(o.useEffect)((function(){pe({url:"/tournament/"+t+"/getStatus"}).then(v).then((function(){return i({action:"status"})})).catch((function(){return i({action:"sattus",set:!1})}))}),[v,i,t]),Object(o.useEffect)((function(){pe({url:["","tournament",t,"getAnnouncements"].join("/")}).then(M)}),[t,M]),Object(o.useEffect)((function(){pe({url:["","tournament",t,"isLive"].join("/")}).then((function(e){return C(e.isLive)}))}),[t,C]),{loaded:r,settings:s,status:f,state:g,rawPlayers:y,isLive:N,announcements:L}}({id:n}),m=u.loaded,d=u.settings,f=u.status,b=u.state,g=u.rawPlayers,k=u.isLive,O=u.announcements,N=Me({status:f,players:g,settings:d,round:f.round}),C=Object(o.useMemo)((function(){if(!N.length)return new Map;var e,t=new Map,n=Object(y.a)(N);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.set(a.id,a)}}catch(r){n.e(r)}finally{n.f()}return t}),[N]),L=f.round||0,M=Qa({tournaments:Object(o.useMemo)((function(){return[Object.assign({},f,d)]}),[f,d])}).gradients,R=Object(o.useMemo)((function(){var e,t=((null===(e=d.streamURL)||void 0===e?void 0:e.match(Be))||[]).slice(1),n=Object(h.a)(t,2),a=n[0],r=n[1],i=null===a||void 0===a?void 0:a.split(".").shift();return{isLive:k,channel:r,site:i}}),[d,k]);Object(o.useEffect)((function(){if(L){for(var e=new Array(L+1),t=1;t<L+1;t++)e[t]={match:0,game:0};var a=Ce.bye(n,L,d);a.histories=e,C.set("bye",a)}}),[C,L,n,d]);var A=Object(o.useState)(""),I=Object(h.a)(A,2),D=I[0],F=I[1],W=Object(o.useCallback)((function(e){if(!e)return"\u200b";if("bye"===e)return"BYE";if("string"!==typeof e){var t=e;return"individual"===d.competitors?[t.firstName,t.lastName].join(" "):t.firstName}var n=C.get(e);return n?"individual"===d.competitors?[n.firstName,n.lastName].join(" "):n.firstName:e}),[C,d.competitors]);return Object(o.useEffect)((function(){var e=window.location.pathname.split("/")[2];d.vanityURL&&d.vanityURL!==e&&window.history.pushState("",document.title,window.location.toString().replace(e,d.vanityURL))}),[d.vanityURL]),!1===m.state?c.a.createElement(je,null):c.a.createElement(S,{values:[[x,d]]},c.a.createElement("div",{id:"main",className:w()({still:ve.getLocal("noAnimations")})},c.a.createElement(Xa,{faded:!0,gradients:M,id:f.id,withContainer:!0,img:d.logoURL}),c.a.createElement("section",{className:w()("container",ke.a.nav)},c.a.createElement("div",{className:ke.a.stage},c.a.createElement("div",{className:ke.a.profileWrapper},c.a.createElement("div",{className:w()(ke.a.profilePicture,Object(j.a)({},ke.a.preload,!m.all))},m.all&&d.logoURL?c.a.createElement(Fa,{src:d.logoURL,alt:"profile_picture"}):c.a.createElement("div",{className:ke.a.defaultProfilePicture},m.all&&f.name?null===(t=f.name.match(Ae))||void 0===t?void 0:t.map((function(e){return e.substring(0,1).toUpperCase()})).join(""):"\u200b"))),m.all&&k?c.a.createElement(v.b,{to:window.location.href.includes("dashboard")?"#live":H("t",d.vanityURL||n,"dashboard")+"#live",className:ke.a.live},c.a.createElement(Wa,{diameter:180,width:10,className:ke.a.liveRing}),c.a.createElement(E.S,{className:[ke.a.livePlay].join(" ")})):null,c.a.createElement("div",{className:[ke.a.extra,m.all?"/":ke.a.preload].join(" ")},m.all?d.profileURL?c.a.createElement("a",{className:[ke.a.website].join(" "),href:d.profileURL,target:"_blank",rel:"noopener noreferrer",title:"Website"},c.a.createElement(E.J,null)):null:c.a.createElement("div",{className:[ke.a.website].join(" ")},"\u200b"),m.all?d.rulesURL?d.rulesURL.endsWith(".pdf")&&!Fe()?c.a.createElement(v.b,{to:["","t",n,"rules"].join("/"),className:ke.a.rules,title:"Rules"},c.a.createElement(E.i,null)):c.a.createElement("a",{className:[ke.a.rules].join(" "),href:d.rulesURL,target:"_blank",rel:"noopener noreferrer",title:"Rules"},c.a.createElement(E.i,null)):null:c.a.createElement("div",{className:[ke.a.rules].join(" ")},"\u200b")),c.a.createElement("div",{className:ke.a.nameContainer},c.a.createElement("div",{className:ke.a.name,title:f.id},f.name||"\u200b")),c.a.createElement("div",{className:ke.a.linkButtons},m.all?c.a.createElement(v.b,{className:[ke.a.linkButton,"header-button"].join(" "),to:["","t",n,"announcements"].join("/")},c.a.createElement(E.j,null),"Announcements"):c.a.createElement("div",{className:[ke.a.linkButton].join(" ")},"\u200b"),m.all?f.user?c.a.createElement("div",{className:[ke.a.linkButton,"header-button"].join(" "),onClick:function(){return F("description"===D?"":"description")}},c.a.createElement(E.F,null),"Description"):null:c.a.createElement("div",{className:[ke.a.linkButton].join(" ")},"\u200b"),m.all?f.user?c.a.createElement(v.b,{className:[ke.a.linkButton,"header-button"].join(" "),to:"/@/"+f.user},c.a.createElement(E.lb,null),f.user):null:c.a.createElement("div",{className:[ke.a.linkButton].join(" ")},"\u200b")),c.a.createElement("div",{className:ke.a.infoBox},m.all?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:"rules.1"},c.a.createElement("div",null,"Format: "),c.a.createElement("div",null,z(d.pairingSystem)),c.a.createElement("div",null,"Created: "),c.a.createElement("div",null,new Date(f.createdAt).toString().slice(4,15)),c.a.createElement("div",null,"Type: "),c.a.createElement("div",null,z(d.competitors)+"s"),c.a.createElement("div",null,z("team"===d.competitors?"Teams":"Players"),":"),c.a.createElement("div",null,f.players),1===d.gamePointTotal?null:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"Games:"),c.a.createElement("div",null,Math.ceil(N.reduce((function(e,t){return e+t.histories.reduce((function(e,t){return t?e+=t.played:e}),0)}),0)/2)))),c.a.createElement("div",{key:"rules.2"},c.a.createElement("div",null,"Location: "),c.a.createElement("div",null,d.location||"-"),c.a.createElement("div",null,"Time control: "),c.a.createElement("div",null,d.timeControl||"-"),c.a.createElement("div",null,"Status: "),c.a.createElement("div",null,!1!==f.active?"Live":f.round?"Finished":"Not yet started"),d.prizes?c.a.createElement("div",{className:ke.a.tieBreakLink,onClick:function(){return F("prizes"===D?"":"prizes")}},"Prizes"):d.description?c.a.createElement("div",null,"\u200b"):"",c.a.createElement("div",{className:ke.a.tieBreakLink,onClick:function(){return F("tie breaks"===D?"":"tie breaks")}},"Tie breaks"))):null),c.a.createElement(p.b,{path:"/t/:id/:section?/:round?/",render:function(t){var n=parseInt(t.match.params.round);return isNaN(n)&&(n=f.round),n<0||n>d.totalRounds?null:c.a.createElement(te,{id:e.match.params.id,settings:d,section:t.match.params.section,round:n,loaded:m})}}))),c.a.createElement("section",{className:w()(ke.a.tieBreakSection,Object(j.a)({},ke.a.visible,D))},c.a.createElement("div",{className:"container"},c.a.createElement("div",null,c.a.createElement("div",{className:ke.a.tieBreakTitle,onClick:function(){return F("")}},D.toUpperCase()),c.a.createElement("div",{className:ke.a.tieBreaks},"tie breaks"===D?s.map((function(e,t){var n=Object(h.a)(e,2)[1];return n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:[n,t,"1"].join(" ")},"#",t+1),c.a.createElement("div",{key:[n,t,"2"].join(" ")},n.name)):null})):"description"===D?d.description:null)))),c.a.createElement(p.b,{path:"/t/:id/:section?/:round?/",render:function(t){var n;if(n="results"===t.match.params.round||"individual"===t.match.params.round?f.round+1:parseInt(t.match.params.round),isNaN(n)&&(n=f.round),"Infinity"===d.totalRounds&&(d.totalRounds=1/0),n<=0||n>d.totalRounds+1)return null;var a=t.match.params.section;if(a||(a="pairings"),"pairings"!==a&&"standings"!==a)return null;switch(a){case"standings":if("knockout"===d.pairingSystem)return null}return c.a.createElement(_e,{direction:e.location.state.direction.slice(6),section:t.match.params.section,round:n,id:e.match.params.id,playerDict:C,status:f,settings:d,loaded:m})}}),c.a.createElement(p.b,{render:function(t){var a=t.location;return m.status?c.a.createElement(T.Provider,{value:W},c.a.createElement(B.Provider,{value:s},c.a.createElement(P.Provider,{value:R},c.a.createElement(p.d,{location:a},c.a.createElement(p.b,{exact:!0,path:"/t/:id/",render:function(){var t=d.vanityURL||e.match.params.id;return c.a.createElement(p.a,{push:!0,to:{pathname:"/t/".concat(t,"/dashboard"),state:e.history.location.state}})}}),c.a.createElement(p.b,{path:"/t/:id/stats/",render:function(){return c.a.createElement(Zn,{direction:e.location.state.direction.slice(6),round:f.round,status:f,players:Array.from(C.values()),settings:d})}}),c.a.createElement(p.b,{path:"/t/:id/announcements/",render:function(){return c.a.createElement(la,{announcements:O.map((function(e,t){return Object(_.a)({},e,{content:e.announcement,id:t.toString(),tournamentId:n,author:"",role:"director",title:"",link:""})}))})}}),c.a.createElement(p.b,{path:"/t/:id/tv/",render:function(){return c.a.createElement(Wn,{streamURL:d.streamURL,pop:l,isLive:k})}}),c.a.createElement(p.b,{path:"/t/:id/rules/",render:function(e){return c.a.createElement(or,{id:e.match.params.id,settings:d})}}),c.a.createElement(p.b,{path:"/t/:id/dashboard/",render:function(t){return c.a.createElement(Ia,{status:f,settings:d,players:N,loaded:m,pop:l,isLive:k,announcements:O,direction:e.location.state.direction.slice(6),id:e.match.params.id,profile:e.profile,playerDict:C,round:L})}}),c.a.createElement(p.b,{path:"/t/:id/leaderboard",render:function(t){return c.a.createElement(p.a,{push:!0,to:{pathname:["","t",t.match.params.id,"standings","individual"].join("/"),state:e.history.location.state}})}}),c.a.createElement(p.b,{exact:!0,path:"/t/:id/(pairings|standings)/",render:function(t){if(void 0===f.round)return null;var n=t.match.url.includes("pairings")&&f.round&&!f.active,a=t.match.url.endsWith("/")?"":"/";return c.a.createElement(p.a,{push:!0,to:{pathname:t.match.url+a+(n?"results":f.round),state:e.history.location.state}})}}),c.a.createElement(p.b,{path:"/t/:id/pairings/:round",render:function(t){if("results"===t.match.params.round)return c.a.createElement(da,{direction:e.location.state.direction.slice(6),state:b,playerDict:C,settings:d,id:t.match.params.id});var n=parseInt(t.match.params.round);return isNaN(n)||n<0||n>d.totalRounds?null:c.a.createElement(Dn,Object.assign({direction:e.location.state.direction.slice(6),id:e.match.params.id,profile:e.profile},{announcements:O,status:f,settings:d,playerDict:C,round:n}))}}),c.a.createElement(p.b,{path:"/t/:id/standings/:round",render:function(t){return c.a.createElement(Xt,{players:N,status:f,settings:d,state:b,rProps:t,direction:e.location.state.direction})}}),c.a.createElement(p.b,{path:"/t/:id/*",component:je,status:404}))))):null}}),c.a.createElement(Da,{margin:10},i?c.a.createElement("div",{onClick:function(){return l(null)}},c.a.createElement(E.ob,null)):null,c.a.createElement("div",{dangerouslySetInnerHTML:{__html:(null===i||void 0===i?void 0:i.outerHTML)||""}}))))}var lr=n(17),sr=n.n(lr),ur=(n(859),n(374));function mr(e){var t=e.n,n=e.i,a=Object(o.useContext)(A),r=c.a.createElement(Fn.a,null),i=(t.link||"").match(Te);return i&&(r=ra(i[1])),c.a.createElement("tr",{className:sr.a.notificationRow,key:["notification",n].join(".")},c.a.createElement("td",null,c.a.createElement("div",{onClick:function(){return a(t)}},t.link?c.a.createElement("a",{className:sr.a.iconLink,href:t.link,rel:"noopener noreferrer",target:"_blank"},r):c.a.createElement("div",null,"icon"),c.a.createElement("div",null,c.a.createElement("span",{className:"bold"},t.title)),c.a.createElement("div",{className:sr.a.notifContent},t.content),c.a.createElement("div",{className:sr.a.expando},c.a.createElement(E.d,null)))))}var dr=[{id:"ecf-award",logoURL:"/images/ecf.jpg",name:"English Chess Federation: Online Contribution of the Year",description:"ScorchChess is proud to be announced the winner of English Chess Federation's award for 'Online Chess Contribution of the Year' 2020. As the national federation in our home country, the ECF's recognition is quite the honour.",button:"View More",active:!0,href:"https://www.englishchess.org.uk/ecf-awards-2020-citations/"}];function fr(e){var t=Object(o.useReducer)((function(){return!0}),!1),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)(0),l=Object(h.a)(i,2),s=l[0],u=l[1],m=Object(o.useState)([]),d=Object(h.a)(m,2),f=d[0],p=d[1],b=Object(o.useState)([]),g=Object(h.a)(b,2),_=g[0],j=g[1],k=Object(o.useCallback)((function(){return pe({url:"/announcements"}).then(j)}),[j]),w=Object(o.useCallback)((function(){return pe({url:"/tournaments"}).then(p).catch((function(){return r()}))}),[r,p]);Object(o.useEffect)((function(){w(),k()}),[w,k]),Object(o.useEffect)((function(){Ee.on("connected_count",(function(e){return u(e)}))}),[u]),Object(o.useEffect)((function(){if(!s){var e=setTimeout((function(){return Ee.emit("request_online")}),1e3);return function(){return clearTimeout(e)}}}),[s]);var O=Object(o.useMemo)((function(){var e,t=Object(h.a)([[],[],[]],3),n=t[0],a=t[1],r=t[2],i=Object(y.a)(f);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.round?o.active?a.push(o):r.push(o):n.push(o)}}catch(c){i.e(c)}finally{i.f()}return[n,a,r]}),[f]),N=Object(h.a)(O,3),C=N[0],S=N[1],x=N[2],L=Object(o.useMemo)((function(){return dr.concat(f)}),[f]),M=Qa({tournaments:L}),R=M.gradients,P=M.palettes;return a?c.a.createElement(je,null):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"main"},c.a.createElement("div",{className:sr.a.container},c.a.createElement(Za,{gradients:R,palettes:P,tournaments:L}),c.a.createElement("div",{className:sr.a.col1},c.a.createElement("div",{className:["container",sr.a.title].join(" "),"data-aos":"fade-right"},c.a.createElement("h1",null,c.a.createElement("b",null,"Scorch"),"Results",c.a.createElement("small",{className:sr.a.tiny}," from ScorchChess")),c.a.createElement("h3",null,"Your universal platform for results and pairings. Attractive. Automated. Effortless."),c.a.createElement("div",{className:sr.a.wrapper},c.a.createElement("div",{className:Ee.connected?sr.a.connected:sr.a.disconnected},c.a.createElement(ur.a,null)," ",null!==s&&void 0!==s?s:"-"," user",1!==s?"s":""," online"),c.a.createElement("a",{href:"https://beta.scorchapp.co.uk",rel:"noopener noreferrer",target:"_blank",className:[sr.a.new].join(" ")},"Create New Tournament",c.a.createElement(E.d,null)))),c.a.createElement("div",{className:"container","data-aos":"fade-right"},"How are you liking our new changes?",c.a.createElement("br",null),c.a.createElement(v.b,{to:"/contact#feedback"},"Write some feedback here")),c.a.createElement("div",{className:["container",sr.a.announcements].join(" "),"data-aos":"fade-right"},c.a.createElement("table",{className:[sr.a.tableAnnounce].join(" ")},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:sr.a.sectionHeader},"Announcements"))),c.a.createElement("tbody",null,_.map((function(e,t){return c.a.createElement(mr,{key:[e.id,t].join("."),n:e,i:t})})))))),c.a.createElement("div",{className:sr.a.col2},c.a.createElement("div",{className:["container",sr.a.tournaments].join(" "),"data-aos":"fade-left"},c.a.createElement("table",{className:[sr.a.tableAnnounce].join(" ")},c.a.createElement("thead",null,c.a.createElement("tr",{className:sr.a.sizer},c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null)),c.a.createElement("tr",null,c.a.createElement("th",{colSpan:5,className:[sr.a.sectionHeader,sr.a.live].join(" ")},"Live Tournaments")),c.a.createElement("tr",{className:sr.a.sectionHeader},c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Started"),c.a.createElement("th",null,"Round"),c.a.createElement("th",null,"Players"),c.a.createElement("th",null))),c.a.createElement("tbody",null,S.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e,t){return c.a.createElement(hr,{key:[e.id,t].join("."),t:e,i:t})}))))),c.a.createElement("div",{className:["container",sr.a.tournaments].join(" "),"data-aos":"fade-right"},c.a.createElement("table",{className:[sr.a.tableAnnounce].join(" ")},c.a.createElement("thead",null,c.a.createElement("tr",{className:sr.a.sizer},c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null)),c.a.createElement("tr",null,c.a.createElement("th",{colSpan:5,className:sr.a.sectionHeader},"Upcoming Tournaments")),c.a.createElement("tr",{className:sr.a.sectionHeader},c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Started"),c.a.createElement("th",null,"Round"),c.a.createElement("th",null,"Players"),c.a.createElement("th",null))),c.a.createElement("tbody",null,C.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e,t){return c.a.createElement(hr,{key:[e.id,t].join("."),t:e,i:t})}))))),c.a.createElement("div",{className:["container",sr.a.tournaments].join(" "),"data-aos":"fade-left"},c.a.createElement("table",{className:[sr.a.tableAnnounce].join(" ")},c.a.createElement("thead",null,c.a.createElement("tr",{className:sr.a.sizer},c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null)),c.a.createElement("tr",null,c.a.createElement("th",{colSpan:5,className:sr.a.sectionHeader},"Finished Tournaments")),c.a.createElement("tr",{className:sr.a.sectionHeader},c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Started"),c.a.createElement("th",null,"Round"),c.a.createElement("th",null,"Players"),c.a.createElement("th",null))),c.a.createElement("tbody",null,x.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})).map((function(e,t){return c.a.createElement(hr,{key:[e.id,t].join("."),t:e,i:t})})))))))))}function hr(e){var t=e.t,n=e.i,a=new Date(t.createdAt).toString();return c.a.createElement("tr",{key:[t.id,n].join("."),className:sr.a.rowLink},[t.name||t.id,a.slice(0,11),t.round,t.players,c.a.createElement(E.d,{key:"angle-right"})].map((function(e,a){return c.a.createElement("td",{key:["elem",n,a].join(".")},c.a.createElement(v.b,{className:sr.a.tournamentLink,to:"/t/"+t.id},e))})))}var vr=n(87),pr=n.n(vr);function br(e){var t,n=Object(o.useState)([]),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return pe({url:"/users"}).then(i)}),[i]);return Object(o.useEffect)((function(){l()}),[l]),c.a.createElement("div",{id:"main",className:"animated-"+(null===(t=e.location.state)||void 0===t?void 0:t.direction)},c.a.createElement("div",{className:pr.a.container},c.a.createElement("section",{className:"container"},c.a.createElement("div",{className:pr.a.title},c.a.createElement("div",null,c.a.createElement("b",null,"Users")),c.a.createElement("div",{className:"light"},r.length)),c.a.createElement("div",{className:pr.a.userTable},r.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{key:["status",t].join("."),className:[pr.a.status,e.online?pr.a.online:""].join(" ")},e.isLicensed?c.a.createElement(E.y,{title:"Licensed"}):c.a.createElement(E.r,{style:{fontSize:"0.5em"},title:e.online?"Online":"Offline"})),c.a.createElement(v.b,{key:["username",t].join("."),className:pr.a.profile,to:"/@/"+e.username},e.username))}))))))}var gr=n(77),Er=n.n(gr);function _r(e){var t,n,a=e.match.params.id,r=Object(o.useState)({}),i=Object(h.a)(r,2),l=i[0],s=i[1],u=Object(o.useCallback)((function(){return pe({url:["result",a].join("/")}).then(s)}),[a,s]);Object(o.useEffect)((function(){u()}),[u]);var m=Object(o.useMemo)((function(){return Object.values(l.games||{})}),[l.games]),d=Object(o.useRef)(),f=Object(o.useCallback)((function(e){var t=d.current;if(t){var n=t.getBoundingClientRect().width+100;t.scrollBy({top:n*("up"===e?-1:1),behavior:"smooth"})}}),[d]),b=Object(o.useState)([]),g=Object(h.a)(b,2),_=g[0],j=g[1],y=Object(o.useState)(void 0),k=Object(h.a)(y,2),O=k[0],N=k[1],C=Object(o.useCallback)((function(){var e=l.idW,t=l.idB,n=l.tournamentId;e&&t&&(l.chessComTeamLink||l.lichessTeamLink?N(!0):(l.chessComLink||l.lichessLink)&&N(!1),pe({url:["","tournament",n,"fetchPlayers"].join("/"),params:{ids:[e,t].join(",")}}).then(j))}),[l]);function S(e){var t=Number(e.match.params.index)-1;return Object(o.useEffect)((function(){setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),100)}),[]),m[t]?c.a.createElement(qt,{g:m[t]}):null}return Object(o.useEffect)((function(){C()}),[C]),c.a.createElement("div",{id:"main"},c.a.createElement("div",{className:[Er.a.stage].join(" ")},c.a.createElement("div",{className:Er.a.info},O?"Team ":"","Match",c.a.createElement("br",null),null===(t=_[0])||void 0===t?void 0:t.name," vs. ",null===(n=_[1])||void 0===n?void 0:n.name),c.a.createElement("div",{className:[Er.a.viewer,nt.a.wrapper].join(" ")},c.a.createElement("div",{className:nt.a.gameViewWrapper},c.a.createElement(p.b,{path:"/g/:id/:index",render:function(e){return c.a.createElement(S,e)}}))),c.a.createElement("div",{className:Er.a.rightCol},c.a.createElement("div",{className:["button",Er.a.scroll].join(" "),onClick:function(){return f("up")}},c.a.createElement(E.e,null)),c.a.createElement("div",{className:[Er.a.more].join(" "),ref:d},m.map((function(e,t){return c.a.createElement(v.b,{key:w()("gameLink",t),to:"/g/"+a+"/"+(t+1).toString()},c.a.createElement(qt,{g:e}))}))),c.a.createElement("div",{className:["button",Er.a.scroll].join(" "),onClick:function(){return f("down")}},c.a.createElement(E.b,null)))))}function jr(e){var t=e.page,n=Object(o.useState)(""),a=Object(h.a)(n,2),r=a[0],i=a[1];return Object(o.useEffect)((function(){ae.a.get("/pages/".concat(t,".md")).then((function(e){return e.data})).then(i)}),[i,t]),c.a.createElement("div",{id:"main"},c.a.createElement("section",null,c.a.createElement(hn.a,{source:r.trim(),escapeHtml:!1,astPlugins:[Ln],renderers:{link:Mn}})))}var yr=n(44),kr=n.n(yr),wr=n(117),Or=n.n(wr);function Nr(e){return c.a.createElement("div",{"data-aos":"fade-left","data-aos-delay":e.i?e.i%4*100:void 0,className:Or.a.matchUp},c.a.createElement("div",{className:[Or.a.white].join(" ")},c.a.createElement("div",{className:Or.a.flag},e.profile.nationality?q(e.profile.nationality):null),c.a.createElement("div",{className:["playerInfo",Or.a.playerInfo].join(" "),onClick:e.onClick},e.profile.name)))}function Cr(){var e=Object(o.useState)("grid"),t=Object(h.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)([]),i=Object(h.a)(r,2),l=i[0],s=i[1],u=Object(o.useState)([]),m=Object(h.a)(u,2),d=m[0],f=m[1],v=Object(o.useMemo)((function(){return c.a.createElement("div",{className:kr.a.searchBarDiv},c.a.createElement("div",{className:kr.a.searchBar},c.a.createElement(E.W,{className:kr.a.searchIcon}),c.a.createElement(Qt,{onChange:f,onSubmit:Promise.resolve,action:"",options:l,convert:function(e){return e.name},styles:kr.a,placeholder:"Search"})))}),[l,f]),p=Object(o.useReducer)((function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)?null:t}),null),b=Object(h.a)(p,2),g=b[0],_=b[1],j=Object(o.useCallback)((function(){return pe({url:"/teams"}).then(s)}),[s]);Object(o.useEffect)((function(){j()}),[j]);var y=Object(o.useMemo)((function(){return l.sort((function(e,t){var n,a;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase().charCodeAt(0))-(null===(a=t.name)||void 0===a?void 0:a.toLowerCase().charCodeAt(0))})),"compact"===n?l.filter((function(e){return 0===d.length||d.find((function(t){return t.id===e.id}))})).map((function(e,t){return c.a.createElement(Nr,{key:["team",t].join("."),profile:e,i:t,type:"team",onClick:function(){return _(e)}})})):l.filter((function(e){return 0===d.length||d.find((function(t){return t.id===e.id}))})).map((function(e,t){return c.a.createElement(ka,{key:["team",t].join("."),id:e.id,profile:e,type:"team",i:t})}))}),[l,n,d,_]),k=Object(o.useRef)();return c.a.createElement("div",{id:"main"},c.a.createElement("section",{className:kr.a.container},c.a.createElement("div",{className:kr.a.title},c.a.createElement("div",null,c.a.createElement("b",null,"Teams")),c.a.createElement("div",{className:"light"},l.length),v,c.a.createElement("div",{className:kr.a.menu},c.a.createElement("label",null,"Display"),c.a.createElement(E.v,{onClick:function(){return a("compact")},className:"compact"===n?kr.a.inactive:kr.a.active}),c.a.createElement(E.db,{onClick:function(){return a("grid")},className:"grid"===n?kr.a.inactive:kr.a.active}))),"compact"===n?c.a.createElement("div",{className:kr.a.compactContainer},c.a.createElement("div",{className:kr.a.compact},y),c.a.createElement(Ge,{absoluteStyles:{top:"-40px"},fixedStyles:{top:"8vh"},upperLimit:10*window.innerHeight/100,lowerLimit:275},c.a.createElement("div",{className:[kr.a.preview].join(" ")},g?c.a.createElement(ka,{id:g.id,profile:g,type:"team",small:!1,showLinks:!0}):null))):c.a.createElement("div",{className:kr.a.userTable,ref:k}," ",y)))}function Sr(e){var t,n=Object(o.useState)(null===(t=e.expanded)||void 0===t||t),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useRef)(null),s=l.current;return Object(o.useEffect)((function(){"boolean"===typeof e.expanded&&i(e.expanded)}),[e.expanded,i]),Object(o.useEffect)((function(){if(s)for(var e=s.nextElementSibling;e&&e.className.includes("container");){if(!e)return;e.style.overflow||(e.style.overflow="hidden"),e.style.transition||(e.style.transition="all 0.333s ease"),r?e.removeAttribute("style"):Object.assign(e.style,{maxHeight:"0px",paddingTop:"0px",paddingBottom:"0px",marginTop:"0px",marginBottom:"0px"}),e=e.nextElementSibling}})),c.a.createElement("div",{ref:l,className:[na.a.divide,r?"":na.a.collapsed].join(" "),onClick:function(){return i(!r)}},c.a.createElement("hr",null),e.name,c.a.createElement(E.q,null),c.a.createElement("hr",null))}var xr=n(118),Lr=n.n(xr),Mr=n(20),Rr=n.n(Mr);function Pr(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?null!==(t=a[0])&&void 0!==t?t:"On":!1===e?null!==(n=a[1])&&void 0!==n?n:"Off":""}var Br={source:{name:"Source",enum:["","lichess","chessCom"],convert:function(e){return"lichess"===e?"Lichess.org":"chessCom"===e?"Chess.com":"None"},show:{media:"online"},defaultValue:"",level:1,description:'This setting enables ScorchChess\' state-of-the-art integration features. Select a website where games will be played to begin. ScorchChess currently has support for  <span id="lichess" className="switcher">Lichess.org</span> and  <span id="chessCom" className="switcher">Chess.com</span>. This setting controls your ability to submit game links.'},pullResults:{name:"Pull results",show:{source:["lichess","chessCom"]},enum:[0,1,2],type:"number",highlight:!0,level:1,convert:function(e){return 0===e?"Off":1===e?"Ask me first":"Pull and save all"},defaultValue:1,description:'This setting enables ScorchChess\' state-of-the-art integration features. This setting enables ScorchChess to sync the results with the results found on Lichess.org or Chess.com. There are 3 settings:\n\t\t\t\t- <span id="0" className="switcher">Off</span>: Don\'t sync. Let me submit the results myself manually.\n\t\t\t\t- <span id="1" className="switcher">Ask me first</span>: Sync, but don\'t confirm any results. Make all synced results provisional and I\'ll confirm them.\n\t\t\t\t- <span id="2" className="switcher">Pull and save all</span>: Sync and save all the results. If there any results that need correcting, you can edit results by clicking on the _Dropdown_ for a pairing and _Undo result_.'},allowSelfLinks:{name:"Let users submit links?",lockOnInit:!1,enum:[0,1,2,3],type:"number",defaultValue:1,highlight:!0,level:1,show:{source:["lichess","chessCom"]},convert:function(e){return 0===e?"Off":1===e?"Ask me first":2===e?"Save if both players confirm":"Save if either player confirms"},description:'This setting lets users submit game links to either Lichess.org or Chess.com. If running a team tournament, team admins are allowed to do this. There are 4 options with this setting:\n\t\t\t\t- <span id="0" className="switcher">Off</span>: Don\'t allow users to submit game links. You can add a game link to any pairing yourself by clicking on the _Pairing Dropdown_.\n\t\t\t\t- <span id="1" className="switcher">Ask me first</span>: Provisionally add links. I will then confirm them using the _Pairing Dropdown_.\n\t\t\t\t- <span id="2" className="switcher">Save if both players confirm</span>: If any player adds a link, make it provisional. Show a confirmation dialogue to the the player and save it if they accept.\n\t\t\t\t- <span id="3" className="switcher">Save if either player confirms</span>: If any player adds a link, save it to the pairing.'},allowSelfSubmissions:{name:"Let users submit results?",convert:Pr,locked:!0,lockOnInit:!1,type:"boolean",defaultValue:!1},allowRegistration:{name:"Let users register online?",convert:z,enum:["closed","approve","open"],onInit:!1,locked:!0,defaultValue:"closed"}};function Tr(e){var t=e.p,n=e.className,a=Object(o.useState)({}),r=Object(h.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)([]),u=Object(h.a)(s,2),m=u[0],d=u[1];Object(o.useEffect)((function(){pe({url:["tournament",t.tournamentId,"fetchPlayers"].join("/"),params:{ids:m.join(",")}}).then((function(e){var t,n={},a=Object(y.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r.id]=r.name}}catch(i){a.e(i)}finally{a.f()}l(n)}))}),[t.tournamentId,m,l]);var f=new Ce(t,t.tournament.round,t.tournament.setting),p="string"!==typeof t.tournament.setting.totalRounds&&t.tournament.setting.totalRounds!==1/0?t.tournament.setting.totalRounds:t.histories.length+1,b=t.histories.slice(0);Object(o.useEffect)((function(){var e=[];t.histories.forEach((function(t,n){if(!n)return null;t||(t={});var a=t.id;a&&"bye"!==a.toLowerCase()&&!(a in i)&&e.push(a)})),e.length&&d(e)}),[t.histories,i,d]);for(var g=0;g<=p;g++)b[g]||(b[g]=null);for(var _=Object(h.a)([null,null],2),j=_[0],k=_[1],w=1;w<b.length;w++){if(!b[w]){k=null;break}var O=Object.assign(b[w],{round:w,w:"W"===b[w].colour?t.id:b[w].id,b:"W"===b[w].colour?b[w].id:t.id});if(null===O.match){k=O;break}j=O}return c.a.createElement("section",{key:["section",t.id].join("."),className:["container",Rr.a.background,n].join(" ")},c.a.createElement("div",{className:Rr.a.stage},c.a.createElement(v.b,{to:"/t/".concat(t.tournament.setting.vanityURL||t.tournament.id),className:[Rr.a.name,Rr.a.box].join(" ")},t.tournament.name),c.a.createElement("div",{className:[Rr.a.scores,Rr.a.box].join(" ")},Object.entries(Re.post).map((function(e,n){var a,r=Object(h.a)(e,2),i=r[0],o=r[1];return o.show&&!o.show(f,n,t.tournament.setting,"results")?null:c.a.createElement("div",{className:Rr.a.row,key:["row",n].join(".")},c.a.createElement("div",{className:Rr.a.key},o.brief||o.mobile),c.a.createElement("div",{className:Rr.a.value},o.convert?o.convert(f[i],f,t.tournament.setting,"results"):null===(a=f[i])||void 0===a?void 0:a.toString()))}))),c.a.createElement("div",{className:Rr.a.midButtons},c.a.createElement(v.b,{to:"/t/".concat(t.tournament.setting.vanityURL||t.tournament.id),className:[Rr.a.currRound,Rr.a.box,"header-button"].join(" ")},"Round: ",t.tournament.round),c.a.createElement("div",{className:[Rr.a.nextRound,Rr.a.box,"header-button"].join(" ")},"Time: ",t.tournament.setting.timeControl),c.a.createElement("div",{className:[Rr.a.nextRound,Rr.a.box,"header-button"].join(" ")},"Started: ",new Date(t.tournament.createdAt).toString().slice(0,15))),c.a.createElement("div",{className:[Rr.a.history,Rr.a.box].join(" "),style:t.tournament.setting.totalRounds<10?{gridTemplateRows:"1.5em repeat(".concat(t.tournament.setting.totalRounds,", auto)")}:{}},c.a.createElement("div",{className:Rr.a.subtitle},"Results"),b.map((function(e,n){if(!n)return null;e||(e={});var a=e,r=a.id,o=a.colour,l=e.game,s=e.match,u=null!==e.game&&"game"===t.tournament.setting.displayPoints,d="W"===o?t.id:e.id,f="W"===o?e.id:t.id;r&&"bye"!==r.toLowerCase()&&!(r in i)&&m.push(r);var h=[n,i[r]||("bye"===r?"BYE":r),o||"\u200b",null!==l?l:c.a.createElement(E.A,null),null!==s?s:c.a.createElement(E.A,null)];return c.a.createElement("div",{className:[Rr.a.resultsRow,u?"":Rr.a.small].join(" "),key:["row","history",n].join(".")},h.map((function(e,a){var i=1===a?Rr.a.playerName:Rr.a.fieldBox,o=1===a?"/".concat("team"===t.tournament.setting.competitors?"team":"player","/").concat(r):"/".concat(t.tournament.id,"/pairings/").concat(n,"#").concat(d,".").concat(f);return"bye"===r&&(o=""),3!==a||u?r?c.a.createElement(v.b,{to:o,className:i,key:["entry",a].join(".")},e):c.a.createElement("div",{className:i,key:["entry",a].join(".")},e):null})))}))),t.active&&t.tournament.active?c.a.createElement("div",{className:Rr.a.action},j?c.a.createElement(v.b,{className:"header-button",to:"/".concat(t.tournament.id,"/pairings/").concat(j.round,"#").concat(j.w,".").concat(j.b)},c.a.createElement("img",{src:an.a,alt:"watch"}),"Analyse last game"):null,k?c.a.createElement(v.b,{className:"header-button",to:"/".concat(t.tournament.id,"/pairings/").concat(k.round,"#").concat(k.w,".").concat(k.b)},c.a.createElement(E.D,null),"View next game"):null):null))}function Ar(e){return c.a.createElement("section",{className:["container",Rr.a.background].join(" ")},c.a.createElement("div",{className:Rr.a.teamStage},c.a.createElement(v.b,{to:"/team/".concat(e.id),className:[Rr.a.name,Rr.a.box].join(" ")},e.name),c.a.createElement("div",{className:Rr.a.action},c.a.createElement("div",{className:"header-button"},c.a.createElement(E.H,{style:{color:"var(--col-alert1)"}}),"Founded: ",new Date(e.createdAt).toString().slice(4,15)),c.a.createElement("div",{className:"header-button"},c.a.createElement(E.p,null),"Last online: ",new Date(e.updatedAt).toString().slice(4,15)))))}function Ir(e){var t,n,a=e.u,r=e.update,i=e.className,l=Object(o.useContext)(I),s=Object(o.useContext)(M).authLevel,u=a.prop,m=a.opp,p=a.colour,b=a.round,g=a.id,j=a.result,y=a.startTime,k=a.endTime,w=a.games,O="B"===p&&1===u.tournament.setting.gamePointTotal,N=(O?m:u)||Ce.bye(u.tournamentId,a.round,u.tournament.setting),C=(O?u:m)||Ce.bye(u.tournamentId,a.round,u.tournament.setting),S="individual"===u.tournament.setting.competitors?"player":"team",x=j.link,L=Object(o.useState)(new Ze(Object(_.a)({w:N,b:C,tournamentId:u.tournamentId,scores:N&&C?[null===(t=N.histories[b])||void 0===t?void 0:t.game,null===(n=C.histories[b])||void 0===n?void 0:n.game]:[0,0],teams:[],id:g,round:b,link:x,startTime:y,endTime:k,games:w},j.fetched),b)),R=Object(h.a)(L,2),P=R[0],B=R[1],T=u.tournament.setting.source?Br.source.convert(u.tournament.setting.source):"",A=Object(o.useCallback)((function(){l({title:"Remove game link",message:c.a.createElement(c.a.Fragment,null,"Remove this game link for match: ",u.name," vs ",m.name,"?"),type:"confirm",resolve:function(){return be({url:["","submit","removeGameLink"].join("/"),data:{id:j.id,playerId:u.id,team:"team"===u.tournament.setting.competitors}})}})}),[l,u.id,u.name,m.name,j.id,u.tournament.setting.competitors]),D=Object(o.useCallback)((function(){l({title:"Add game link",message:"Input your ".concat(S," game link").concat(T?" from "+T:"",":"),icon:"chessCom"===u.tournament.setting.source?"chess.com":void 0,type:"prompt",resolve:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="B"===p?m:u,a="B"===p?u:m,e.next=4,St.a.hash([n.id,a.id,P.tournamentId,b].join("."),10);case 4:i=e.sent,be({url:"/submit/gameLink",data:{idW:n.id,idB:a.id,tournamentId:P.tournamentId,round:b,key:i,link:t}}).then(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),prompt:{validate:function(e){return"chessCom"!==u.tournament.setting.source||("team"!==S||Pe.test(e))},errorMessage:"team"===S?"Link must be a valid from "+T:"",additionalInputProps:{autoComplete:"game-link",spellCheck:!1}}})}),[l,S,P,b,r,p,m,u,T]);return c.a.createElement("section",{className:["container",pa.a.upcomingBattle,i].join(" ")},c.a.createElement("div",{className:[pa.a.stage,O?pa.a.reversed:" "].join(" ")},c.a.createElement(v.b,{to:"bye"===N.id?"#":"/".concat(S,"/").concat(N.id),className:pa.a.name,style:{gridArea:"wName"}},N.name),(null===N||void 0===N?void 0:N.nationality)?c.a.createElement("div",{className:Rr.a.flag,style:{gridArea:"wFlag"}},q(N.nationality)):null,c.a.createElement(v.b,{to:["","t",u.tournament.setting.vanityURL||u.tournamentId,"pairings",b].join("/"),className:[pa.a.vs,pa.a.round].join(" ")},b),c.a.createElement("div",{className:pa.a.vs},"VS"),(null===C||void 0===C?void 0:C.nationality)?c.a.createElement("div",{className:Rr.a.flag,style:{gridArea:"bFlag"}},q(C.nationality)):null,c.a.createElement(v.b,{to:"bye"===C.id?"#":"/".concat(S,"/").concat(C.id),className:pa.a.name,style:{gridArea:"bName"}},C.name),c.a.createElement("div",{className:pa.a.scoreBox},P.isFinished&&P.games?c.a.createElement(Gt,{id:P.id,match:P,setMatch:B,setFinished:function(){},sync:function(){},fetch:!1,expanded:!0,enforceBoards:P.players?Number(P.players):0,round:b,teams:P.teams,showButtons:!1}):c.a.createElement("div",{className:pa.a.warning},P.startTime?"Match is scheduled to start at "+new Date(P.startTime).toString().slice(0,15):"Match has not yet started")),c.a.createElement("div",{className:pa.a.infoBox},u.histories&&u.histories[b]&&P.scores.some((function(e){return e}))?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,"Result:"),c.a.createElement("div",{style:{fontWeight:700}},function(){switch(u.histories[b].match){case 1:return"Win";case.5:return"Draw";case 0:return"Loss"}}())):null,c.a.createElement("div",null,"Scores:"),c.a.createElement("div",null,P.scores.join("-")),c.a.createElement("div",null,P.startTime&&new Date(P.startTime).valueOf()<Date.now()?"Started:":"Starting:"),P.startTime?new Date(P.startTime).toString().slice(0,10)+" "+new Date(P.startTime).toString().slice(16,21):c.a.createElement("div",{className:[pa.a.null,pa.a.clickButton].join(" ")},"No starting time added")),c.a.createElement("div",{className:pa.a.buttons},P.isFinished?c.a.createElement(v.b,{to:["","t",u.tournament.setting.vanityURL||u.tournamentId,"pairings",b].join("/")+"#"+g,className:["header-button","link",pa.a.join].join(" ")},c.a.createElement(E.o,null),"Scores"):P.link?c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:P.link,rel:"noopener noreferrer",target:"_blank",className:["header-button","link",pa.a.join].join(" ")},c.a.createElement(E.M,null),"Join game on ",T),s>=2?c.a.createElement("div",{className:["header-button","link",pa.a.remove].join(" "),onClick:A},"Remove link"):null):s?c.a.createElement("div",{className:["header-button","link",pa.a.join,pa.a.gameLink].join(" "),onClick:D},c.a.createElement(E.T,null),"Add game link"):c.a.createElement("div",{className:["header-button",pa.a.join,pa.a.null].join(" ")},"No game link added"),c.a.createElement(v.b,{to:["","t",u.tournament.setting.vanityURL||u.tournamentId].join("/"),className:["header-button","link"].join(" ")},c.a.createElement(E.n,null),u.tournament.name),P.startTime&&Date.now()<P.startTime?c.a.createElement("div",{className:["header-button","link",pa.a.null].join(" ")},c.a.createElement(E.h,null),"Set reminder"):null)))}function Dr(e){var t=Object(o.useContext)(M).isAuthed,n=Object(o.useState)([]),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return pe({url:"/profile/tournaments"}).then(i)}),[i]);Object(o.useEffect)((function(){t&&"player"===e.type&&l()}),[l,t,e.type]);var s=Object(o.useMemo)((function(){var t=[[],[]];if(!e.profile)return t;var n,a=Object(y.a)(e.profile.tournaments.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})));try{for(a.s();!(n=a.n()).done;){var r=n.value;r.active&&r.tournament.active?t[0].push(r):t[1].push(r)}}catch(i){a.e(i)}finally{a.f()}return t}),[e.profile]),u=Object(h.a)(s,2),m=u[0],d=u[1];return c.a.createElement(c.a.Fragment,null,r.length?c.a.createElement("section",{key:"standings.1"},c.a.createElement(Sr,{name:"MANAGED TOURNAMENTS"}),c.a.createElement("div",{className:["container"].join(" ")},c.a.createElement("table",{className:[Lr.a.tableAnnounce].join(" ")},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{style:{width:"20px"}},"Manage"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Started"),c.a.createElement("th",null,"Round"),c.a.createElement("th",null,"View"))),c.a.createElement("tbody",null,r.sort((function(e,t){return new Date(t.updatedAt).valueOf()-new Date(e.updatedAt).valueOf()})).map((function(e,t){var n=new Date(e.createdAt).toString();return c.a.createElement("tr",{key:[e.id,t].join("."),className:Lr.a.rowLink},c.a.createElement("td",null,c.a.createElement("a",{className:Lr.a.tournamentLink,href:"https://beta.scorchapp.co.uk"},c.a.createElement(E.c,null))),c.a.createElement("td",null,e.name||e.id),c.a.createElement("td",null,n.slice(0,11)),c.a.createElement("td",null,e.round),c.a.createElement("td",null,e.setting&&e.setting.public?c.a.createElement(v.b,{className:Lr.a.tournamentLink,to:"/"+e.id},c.a.createElement(E.d,null)):null))})))))):null,c.a.createElement(Sr,{name:"ACTIVE TOURNAMENTS"}),m.map((function(e,t){return c.a.createElement(Tr,{key:w()("active",t),p:e})})),c.a.createElement(Sr,{name:"INACTIVE TOURNAMENTS"}),d.map((function(e,t){return c.a.createElement(Tr,{key:w()("inactive",t),p:e})})),c.a.createElement("section",null))}function Fr(e){var t=Object(o.useState)(!1),n=Object(h.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){a||be({url:"/profile/email/authenticate",data:e.location.search.slice(1).split("&").reduce((function(e,t){var n=t.split("="),a=Object(h.a)(n,2),r=a[0],i=a[1];return e[r]=i,e}),{})}).then((function(){return r(!0)}))}),[a,r,e.location.search]),a?(e.updateProfile(),c.a.createElement(p.a,{push:!0,to:{pathname:"/@/".concat(e.id,"/accounts"),state:e.history.location.state}})):null}function Wr(e){var t=Object(o.useContext)(L).isLoggedIn,n=Object(o.useContext)(M),a=n.isAuthed,r=n.authLevel;return"individual"===e.type?c.a.createElement(Z,{section:e.section,loaded:!0,sections:{tournaments:{link:"/@/".concat(e.profile.username,"/tournaments"),icon:c.a.createElement(E.n,null)},teams:{link:"/@/".concat(e.profile.username,"/teams"),icon:c.a.createElement(E.nb,null)},accounts:{hide:!a,link:"/@/".concat(e.profile.username,"/accounts"),icon:c.a.createElement(E.mb,null)},settings:{hide:!a,link:"/@/".concat(e.profile.username,"/settings"),icon:c.a.createElement(E.u,null)}}}):c.a.createElement(Z,{section:e.section||"play",loaded:!0,sections:{play:{name:"Play",link:"/".concat(e.type,"/").concat(e.id,"/"),icon:c.a.createElement(ma.a,null)},tournaments:{link:"/".concat(e.type,"/").concat(e.id,"/tournaments"),icon:c.a.createElement(E.n,null)},members:{hide:!t||!e.profile.players&&!e.profile.teamId,link:"/".concat(e.type,"/").concat(e.id,"/members"),icon:c.a.createElement(E.nb,null)},accounts:{hide:r<2||!0,link:"/".concat(e.type,"/").concat(e.id,"/accounts"),icon:c.a.createElement(E.mb,null)},settings:{hide:r<2,link:"/".concat(e.type,"/").concat(e.id,"/settings"),icon:c.a.createElement(E.u,null)}}})}function Ur(e){var t=Object(o.useState)(void 0),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useMemo)((function(){return(null===a||void 0===a?void 0:a.username)||e.id}),[e.id,a]),l=Object(o.useCallback)(Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(De.test(e.id)){t.next=2;break}return t.abrupt("return",r(null));case 2:pe({url:"/user/"+e.id}).then(r).catch((function(){return r(null)}));case 3:case"end":return t.stop()}}),t)}))),[e.id,r]);Object(o.useEffect)((function(){l()}),[l]);var s=Ta({profile:a,updateProfile:l}).updateBio,u=e.id.toLowerCase()===e.profile.uniqueID,m=u?2:0;return void 0===a?null:a?c.a.createElement(M.Provider,{value:{isAuthed:u,authLevel:m}},c.a.createElement("div",{id:"main"},c.a.createElement("div",{className:pa.a.container},c.a.createElement("div",{className:pa.a.col1},c.a.createElement(Ge,{upperLimit:null},c.a.createElement("div",{className:pa.a.infoWrapper},c.a.createElement(ka,Object.assign({},e,{profile:a,updateProfile:l,updateBio:s,type:"user"}))))),c.a.createElement("div",{className:pa.a.col2},c.a.createElement(p.b,{path:"/@/:id/:section?",render:function(e){return c.a.createElement(Wr,Object.assign({},e.match.params,{type:"individual",profile:a}))}}),c.a.createElement(p.b,{render:function(t){var n=t.location;return c.a.createElement(p.d,{location:n},c.a.createElement(p.b,{exact:!0,path:"/@/".concat(i),render:function(){return c.a.createElement(Dr,Object.assign({},e,{profile:a,type:"player"}))}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(i,"/verify/:account?"),render:function(t){return u?c.a.createElement(Fr,Object.assign({},e,{id:i,updateProfile:l})):null}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(i,"/tournaments"),render:function(){return c.a.createElement(Dr,Object.assign({},e,{profile:a,type:"player"}))}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(i,"/teams"),render:function(){return c.a.createElement(zr,Object.assign({},e,{profile:a,updateProfile:l}))}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(i,"/accounts"),render:function(){return u?c.a.createElement(ni,Object.assign({},e,{profile:a,updateProfile:l})):null}}),c.a.createElement(p.b,{exact:!0,path:"/@/".concat(i,"/settings"),render:function(){return u?c.a.createElement(Kr,Object.assign({},e,{updateProfile:e.updateProfile,updateBio:s})):null}}))}}))))):c.a.createElement(je,null)}var Gr=n(57),Hr=n.n(Gr);function zr(e){var t;return(null===(t=e.profile.teams)||void 0===t?void 0:t.length)?c.a.createElement(c.a.Fragment,null,(e.profile.teams||[]).map(Ar)):c.a.createElement("section",{className:"container"},"This user is not in any teams")}function Vr(e){var t=Object(o.useContext)(M).authLevel,n=Object(o.useState)([]),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useCallback)((function(){return pe({url:"/users"}).then(i)}),[i]);Object(o.useEffect)((function(){l()}),[l]);var s=Object(o.useState)([]),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(o.useState)([]),p=Object(h.a)(f,2),b=p[0],g=p[1];Object(o.useEffect)((function(){if(e.team.users){var t,n=[],a=[],r=Object(y.a)(e.team.users);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.level?n.push(i):a.push(i)}}catch(o){r.e(o)}finally{r.f()}d(n),g(a)}}),[d,g,e.team]);var _=Object(o.useCallback)((function(t){return be({url:["team",e.team.id,"addUser"].join("/"),data:{username:t.username}}).then(e.updateProfile)}),[e.updateProfile,e.team.id]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:Hr.a.columns},c.a.createElement("section",{className:"container"},c.a.createElement("h1",null,c.a.createElement("b",null,"Admins")),c.a.createElement("div",{className:Hr.a.userTable},m.map((function(e,t){return c.a.createElement(v.b,{key:["admin",t].join("."),className:Hr.a.row,to:"/@/"+e.username,draggable:!0},c.a.createElement("div",{className:Hr.a.status},e.isLicensed?c.a.createElement(E.y,{title:"Licensed"}):c.a.createElement(E.r,{style:{fontSize:"0.5em"},title:e.online?"Online":"Offline"})),c.a.createElement("div",{className:Hr.a.profile},e.username))})))),c.a.createElement("section",{className:"container"},c.a.createElement("h1",null,c.a.createElement("b",null,"Members")),c.a.createElement("div",{className:Hr.a.userTable},b.map((function(e,t){return c.a.createElement(v.b,{key:["member",t].join("."),className:Hr.a.row,to:"/team/"+e.username,draggable:!0},c.a.createElement("div",{className:Hr.a.status},e.isLicensed?c.a.createElement(E.y,{title:"Licensed"}):c.a.createElement(E.r,{style:{fontSize:"0.5em"},title:e.online?"Online":"Offline"})),c.a.createElement("div",{className:Hr.a.profile},e.username))})),t?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null),c.a.createElement("div",{className:Hr.a.searchBar},c.a.createElement(E.T,null),c.a.createElement(Qt,{onChange:function(){},onSubmit:_,action:"",options:r,convert:function(e){return e.username},styles:Hr.a,placeholder:"Add new member"}))):null))),c.a.createElement("section",null))}function qr(e){var t=Object(o.useState)([]),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)([]),l=Object(h.a)(i,2),s=l[0],u=l[1],m=Object(o.useCallback)(Object(f.a)(d.a.mark((function t(){var n,a,i,o,c,l,s,m,f,h,v,p,b,g,E,_,j,k,w,O,N,C,S,x,L;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],a=[],i=e.profile.tournaments.filter((function(e){return e.active})).sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})),o={},c={},l=[],s=Object(y.a)(i),t.prev=7,s.s();case 9:if((m=s.n()).done){t.next=30;break}if(f=m.value,h=[],!f.histories){t.next=23;break}v=1;case 14:if(!(v<f.histories.length)){t.next=23;break}if(p=f.histories[v]){t.next=18;break}return t.abrupt("continue",20);case 18:h.push(p.id),l.push(p.resultId);case 20:v++,t.next=14;break;case 23:return t.next=25,pe({url:["tournament",f.tournamentId,"fetchPlayers"].join("/"),params:{ids:h.join(",")}}).catch((function(e){return console.error(e),[]}));case 25:b=t.sent,g=Object(y.a)(b);try{for(g.s();!(E=g.n()).done;)_=E.value,o[_.id]=_}catch(d){g.e(d)}finally{g.f()}case 28:t.next=9;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(7),s.e(t.t0);case 35:return t.prev=35,s.f(),t.finish(35);case 38:return t.next=40,pe({url:"/results",params:{ids:l.join(",")}}).catch((function(e){return console.error(e),[]}));case 40:for(j=t.sent,k=0;k<j.length;k++)w=j[k].id,c[w]=j[k];return t.next=44,pe({url:"/results",params:{ids:l.join(","),games:!0}});case 44:O=t.sent,N=Object(y.a)(i),t.prev=46,N.s();case 48:if((C=N.n()).done){t.next=63;break}if((S=C.value).histories){t.next=52;break}return t.abrupt("continue",61);case 52:x=function(e){var t,r,i,l=S.histories[e];if(!l)return"continue";var s=c[S.histories[e].resultId];if(!s)return"continue";var u={prop:S,opp:o[l.id],id:s.id,round:e,colour:l.colour,result:s,games:null===(t=O.find((function(e){return e.id===s.id})))||void 0===t?void 0:t.games,startTime:null===(r=s.fetched)||void 0===r?void 0:r.startTime,endTime:null===(i=s.fetched)||void 0===i?void 0:i.endTime};if(!u.result)return"continue";null===l.match?n.push(u):a.push(u)},L=S.histories.length-1;case 54:if(!(L>=0)){t.next=61;break}if("continue"!==x(L)){t.next=58;break}return t.abrupt("continue",58);case 58:L--,t.next=54;break;case 61:t.next=48;break;case 63:t.next=68;break;case 65:t.prev=65,t.t1=t.catch(46),N.e(t.t1);case 68:return t.prev=68,N.f(),t.finish(68);case 71:r(n),u(a);case 73:case"end":return t.stop()}}),t,null,[[7,32,35,38],[46,65,68,71]])}))),[e.profile,r,u]);Object(o.useEffect)((function(){m()}),[m]);var v=Object(o.useState)(!1),p=Object(h.a)(v,2),b=(p[0],p[1],Object(o.useState)({})),g=Object(h.a)(b,2),E=(g[0],g[1]);Object(o.useCallback)((function(e){return pe({url:"/results",params:{round:0,ids:null===e||void 0===e?void 0:e.join(","),games:!0}}).then((function(e){return E(e.reduce((function(e,t){return e[t.id]=t.games,e}),{}))}))}),[E]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Sr,{name:"UPCOMING MATCHES"}),a.map((function(e,t){return c.a.createElement(Ir,{key:w()(e.id,t),u:e,update:m})})),c.a.createElement(Sr,{name:"PAST MATCHES"}),s.map((function(e,t){return c.a.createElement(Ir,{key:w()(e.id,t),u:e,update:m,className:Rr.a.inactive})})),c.a.createElement("section",null))}function Kr(e){var t=Object(o.useContext)(L).profile,n=Object(o.useContext)(I),a=Object(o.useCallback)((function(t){return be({url:"/profile/updateSetting",data:{backgroundURL:t}}).then(e.updateProfile)}),[e.updateProfile]),r=Object(o.useCallback)((function(){n({title:"Add background image",message:"Add a link to the background image you want to use. Leave empty to clear.",type:"prompt",resolve:a,prompt:{validate:function(e){return!e||Te.test(e)},errorMessage:"Must be a valid link to an image",allowNull:!0,defaultValue:null===t||void 0===t?void 0:t.backgroundURL}})}),[n,a,t]),i=Object(o.useState)(!!ve.getLocal("noAnimations")),l=Object(h.a)(i,2),s=l[0],u=l[1],m=Object(o.useCallback)((function(){ve.setLocal("noAnimations",!s),u(!s)}),[s,u]),d=Object(o.useState)(Ya()),f=Object(h.a)(d,2),v=f[0],p=f[1],b=Object(o.useCallback)((function(){p(Ya())}),[p]);return Object(o.useEffect)((function(){return window.addEventListener("theme",b),function(){return window.removeEventListener("theme",b)}}),[b]),t?c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:["container",pa.a.wrapper].join(" ")},c.a.createElement("div",{className:["header-button",pa.a.darkMode,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,v?"Dark Mode":"Light Mode")),c.a.createElement("div",{className:"toggleSwitch",onClick:Ja},v?c.a.createElement(E.hb,null):c.a.createElement(E.gb,null))),c.a.createElement("div",{className:["header-button",pa.a.darkMode,"switchContainer"].join(" "),onClick:r},t.backgroundURL?c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:t.backgroundURL,target:"_blank",rel:"noopener noreferrer"},"Background set"),"\u200b"," | Change"):"Add background image"),c.a.createElement("div",{className:["header-button",pa.a.darkMode,"switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,"Animations")),c.a.createElement("div",{className:"toggleSwitch",onClick:m},s?c.a.createElement(E.gb,null):c.a.createElement(E.hb,null)))),c.a.createElement("section",{className:["container"].join(" ")},c.a.createElement("div",{className:["header-button",pa.a.darkMode,"switchContainer"].join(" "),onClick:e.updateBio},"Update bio"))):null}function Yr(e){var t=Object(o.useContext)(L).profile,n=Object(o.useContext)(I),a=Object(o.useReducer)((function(e){return!e}),!1),r=Object(h.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)(""),u=Object(h.a)(s,2),m=u[0],v=u[1],b=Object(o.useState)([]),g=Object(h.a)(b,2),E=g[0],_=g[1],j=Object(o.useCallback)((function(){return pe({url:"/user/"+(null===t||void 0===t?void 0:t.username)}).then((function(e){return _(e.teams)}))}),[t,_]);Object(o.useEffect)((function(){j()}),[j]);var y=Object(o.useReducer)((function(e,t){var n=e.slice(0);return t.set&&!n.includes(t.k)?n.push(t.k):t.set||n.includes(t.k)&&n.splice(n.indexOf(t.k),1),n}),[]),k=Object(h.a)(y,2),O=k[0],N=k[1],C=Object(o.useCallback)(function(){var t=Object(f.a)(d.a.mark((function t(a){var r,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.profile,t.next=3,pe({url:["","team",a.id].join("/")});case 3:i=t.sent,o=["description","ecf","fide"].filter((function(e){return r[e]})),n({title:"Confirm the merger of ".concat(r.name," into ").concat(i.name,"?"),message:c.a.createElement(c.a.Fragment,null,o.length?"Please select which fields to keep":"",o.map((function(e,t){return r[e]===i[e]?null:c.a.createElement(c.a.Fragment,null,"Which ",z(e)," to keep?",c.a.createElement("div",{key:[e,t].join(".")},c.a.createElement("div",{onClick:function(){return N({k:e,set:!0})}},r[e]),c.a.createElement("div",{onClick:function(){return N({k:e,set:!1})}},i[e])))}))),type:"confirm",resolve:function(){return be({url:["","team",r.id,"merge"].join("/"),data:{to:i.id,keepFields:O}}).then((function(){return n({message:"",title:""})})).then((function(){return v("/team/"+i.id)}))}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[n,e.profile,O,N,v]);return t?m?c.a.createElement(p.a,{to:m}):c.a.createElement(c.a.Fragment,null,c.a.createElement("section",{className:["container",pa.a.wrapper].join(" ")},c.a.createElement("div",{className:["header-button",pa.a.merge].join(" "),onClick:l},"Merge team into..."),i?E.length?E.map((function(t,n){return t.id===e.profile.id?null:c.a.createElement("div",{key:w()(t.id,n),className:["header-button",pa.a.teamMerge].join(" "),onClick:function(){return C(t)}},t.name)})):"No teams available into which to merge. You must be admin of both teams to create a merge request.":null),c.a.createElement("section",{className:["container"].join(" ")},c.a.createElement("div",{className:["header-button",pa.a.darkMode,"switchContainer"].join(" "),onClick:e.updateBio},"Update description"))):null}function Jr(e){var t=Object(o.useState)(void 0),n=Object(h.a)(t,2),a=n[0],r=n[1],i=Object(o.useCallback)((function(){return pe({url:H(e.type,e.id)}).then((function(e){return r(e),e})).then((function(t){return t.teamId?window.history.pushState("",document.title,window.location.pathname.replace(e.id,t.teamId)+window.location.search):t.userId&&window.history.pushState("",document.title,window.location.pathname.replace(e.id,t.userId).replace("/player/","/@/")+window.location.search),t})).catch((function(){return r(null)}))}),[r,e.id,e.type]);Object(o.useEffect)((function(){i()}),[i]);var l=Ta({profile:a,updateProfile:i}).updateBio,s=Object(o.useMemo)((function(){return"player"===e.type?e.id.toLowerCase()===e.profile.uniqueID?2:0:"number"===typeof(null===a||void 0===a?void 0:a.permissions)?a.permissions+1:0}),[e.type,e.id,e.profile,a]),u=2===s;return void 0===a?null:null===a?c.a.createElement(je,null):c.a.createElement(M.Provider,{value:{isAuthed:u,authLevel:s}},c.a.createElement("div",{id:"main"},c.a.createElement("div",{className:pa.a.container},c.a.createElement("div",{className:pa.a.col1},c.a.createElement(Ge,{upperLimit:null},c.a.createElement("div",{className:pa.a.infoWrapper},c.a.createElement(ka,Object.assign({},e,{profile:a,updateProfile:i,updateBio:l,type:e.type}))))),c.a.createElement("div",{className:pa.a.col2},c.a.createElement(p.b,{path:"/:type/:id/:section?",render:function(e){return c.a.createElement(Wr,Object.assign({},e.match.params,{profile:a}))}}),c.a.createElement(p.b,{render:function(t){var n=t.location;return c.a.createElement(p.d,{location:n},c.a.createElement(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id),render:function(){return c.a.createElement(qr,Object.assign({},e,{profile:a,type:e.type}))}}),c.a.createElement(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id,"/tournaments"),render:function(){return c.a.createElement(Dr,Object.assign({},e,{profile:a,type:e.type}))}}),c.a.createElement(p.b,{exact:!0,path:"/".concat(e.type,"/").concat(e.id,"/members"),render:function(){return c.a.createElement(Vr,Object.assign({},e,{team:a,updateProfile:i}))}}),c.a.createElement(p.b,{exact:!0,path:"/team/".concat(e.id,"/settings"),render:function(){return u?c.a.createElement(Yr,Object.assign({},e,{user:e.profile,profile:a,updateProfile:i,updateBio:l})):null}}))}})))))}function Qr(e){return c.a.createElement("div",{className:["header-button","switchContainer"].join(" ")},c.a.createElement("label",null,c.a.createElement("div",null,e.on?e.main.on:e.main.off),e.sub?c.a.createElement("div",null,e.on?e.sub.on:e.sub.off):null),c.a.createElement("div",{className:"toggleSwitch",onClick:function(){return e.onSwitch(!e.on)}},c.a.createElement("input",{type:"checkbox",className:"check",checked:e.on}),c.a.createElement("div",{className:"toggleSlider round"})))}function Xr(e){var t=e.updateProfile,n=Object(o.useState)(""),a=Object(h.a)(n,2),r=a[0],i=a[1];Object(o.useEffect)((function(){Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getAll();case 2:t=e.sent,i(t.sessionID);case 4:case"end":return e.stop()}}),e)})))()}),[i]);var c=Object(o.useMemo)((function(){var t={response_type:"code",client_id:de,redirect_uri:fe,scope:[["email","read"],["challenge","read"],["challenge","write"]].map((function(e){return e.join(":")})).join(" "),state:"".concat(null===r||void 0===r?void 0:r.slice(0,8),".referrer=").concat(e.currentPath)};return"".concat("https://oauth.lichess.org/oauth/authorize","?").concat(Object.entries(t).map((function(e){return e.join("=")})).join("&"))}),[r,e.currentPath]),l=Object(o.useState)(null),s=Object(h.a)(l,2),u=s[0],m=s[1],v=Object(o.useCallback)((function(e){e.closed&&(m(null),t())}),[t,m]);return Object(o.useEffect)((function(){if(u){var e=setInterval((function(){return v(u)}),1e3);return function(){return clearInterval(e)}}}),[u,v]),{href:c,setWindow:m}}function Zr(e){return be({url:["profile","lichess","updateFrom"].join("/")}).finally(e)}function $r(e){return Object(o.useCallback)((function(t){t&&t.id&&be({url:"/profile/facebook/link",data:{id:t.userID,name:t.name,email:t.id,accessToken:t.accessToken}}).then(e.updateProfile)}),[e.updateProfile])}var ei=n(375),ti=n.n(ei);function ni(e){var t,n=Object(o.useState)(e.profile),l=Object(h.a)(n,2),s=l[0],u=l[1];Object(o.useEffect)((function(){u(e.profile)}),[u,e.profile]);Object(o.useCallback)((function(){return pe({url:"/user/"+e.profile.username+"/getAccounts"}).then(u)}),[u,e.profile.username]);var m=Object(o.useCallback)((function(e,t){be({url:"/profile/updateAccount",data:{account:"email"===e?"emailMeta":e,data:t}}).then(u)}),[u]),d=Object(o.useState)([]),f=Object(h.a)(d,2),v=f[0],p=f[1],b=Object(o.useState)([]),g=Object(h.a)(b,2),_=g[0],y=g[1],k=Object(o.useState)([]),w=Object(h.a)(k,2),O=w[0],N=w[1];Object(o.useEffect)((function(){for(var e=[],t=[],n=[],a=0,r=Object.entries(aa);a<r.length;a++){var i=Object(h.a)(r[a],2),o=i[0],c=i[1];if(o in s){var l,u,m,d=s[o];"email"===o&&(d=Object.assign(s.emailMeta||{},{id:d,username:d})),Object.assign(c,{id:o}),(null===(l=d)||void 0===l?void 0:l.verified)?e.push([c,d]):((null===(u=d)||void 0===u?void 0:u.id)||(null===(m=d)||void 0===m?void 0:m.username))&&t.push([c,d]),d&&!c.hasMultiple||n.push([c,d])}else c.canLink&&n.push([c,{}])}p(e),y(t),N(n)}),[s,p,y,N]);var C=e.updateProfile,S=Object(o.useContext)(R).state.currentPath,x=r.useLink({currentPath:S,updateProfile:C}),L=a.useVerify({profile:e.profile,updateProfile:C}),M=a.useLink({updateProfile:function(){C(),L()}}),P=i.useFacebook({updateProfile:C}),B=(t={},Object(j.a)(t,"lichess",x),Object(j.a)(t,"chessCom",M),Object(j.a)(t,"facebook",{href:P,setWindow:function(){}}),t),T=Object(o.useContext)(I),A=Object(o.useMemo)((function(){return{chessCom:L,email:function(t){return be({url:"/profile/email/verify",data:{force:t}}).then((function(){return T({title:"Verify email account",message:"An email has been sent to "+e.profile.email+". Check your inbox!"})})).then(C)}}}),[L,T,e.profile.email,C]),D=Object(o.useMemo)((function(){return{lichess:function(){return r.handleSync(C)}}}),[C]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Sr,{name:"VERIFIED ACCOUNTS"}),v.map((function(e,t){var n=Object(h.a)(e,2),a=n[0],r=n[1];return c.a.createElement("section",{key:["section",t].join(" "),className:["container",pa.a.accountSection].join(" ")},c.a.createElement("div",{className:["optionsContainer",pa.a.optionsContainer].join(" ")},c.a.createElement("a",{id:a.id,href:(a.idLink||a.link).replace("|",r.username||r.id),className:["button","link",pa.a.account,pa.a.inline].join(" "),rel:"noopener noreferrer",target:"_blank"},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:pa.a.icon}):c.a.cloneElement(a.icon[1],{className:pa.a.icon}),a.name||z(a.id),c.a.createElement(E.m,{className:"verified"})),c.a.createElement(Qr,{on:!1!==r.public,onSwitch:function(e){return m(a.id,{public:e})},main:{on:"Public",off:"Hidden"},sub:{on:"Switch to hide your account from public view",off:"Switch on to make visible to all signed-in users"}}),a.id in D?c.a.createElement("div",{className:["header-button",pa.a.accountButton].join(" "),onClick:D[a.id]},c.a.createElement("div",null,c.a.createElement(E.bb,null),"Sync data")):null,a.permanent?null:c.a.createElement("div",{className:["header-button",pa.a.accountButton,pa.a.remove].join(" "),onClick:function(){return be({url:"/profile/removeAccount",data:{account:a.id}}).then(u)}},c.a.createElement("div",null,c.a.createElement(E.X,null),"Remove integration"))))})),c.a.createElement(Sr,{name:"PENDING VERIFICATION"}),_.map((function(e,t){var n=Object(h.a)(e,2),a=n[0],r=n[1];return c.a.createElement("section",{key:["section",t].join(" "),className:["container",pa.a.accountSection].join(" ")},c.a.createElement("div",{className:["optionsContainer",pa.a.pendingContainer].join(" ")},c.a.createElement("div",{id:a.id,onClick:function(){a.id&&(a.id in A&&(r.sent||(0,A[a.id])()))},className:["button","link",pa.a.account,pa.a.inline,r.sent?"sent":""].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:pa.a.icon}):c.a.cloneElement(a.icon[1],{className:pa.a.icon}),r.sent?"":"Verify"," ",r.username||a.name||z(a.id),r.sent?null:c.a.createElement(E.d,null)),r.sent?c.a.createElement("div",{className:["header-button",pa.a.accountButton].join(" "),onClick:function(){a.id&&(a.id in A&&(0,A[a.id])(!0))}},c.a.createElement("div",null,c.a.createElement(E.P,null),"Resend email")):null,a.permanent?null:c.a.createElement("div",{className:["header-button",pa.a.accountButton,pa.a.remove].join(" "),onClick:function(){return be({url:"/profile/removeAccount",data:{account:a.id}}).then(u)}},c.a.createElement("div",null,c.a.createElement(E.eb,null),"Cancel"))))})),c.a.createElement(Sr,{name:"AVAILABLE"}),O.length?c.a.createElement("section",{className:["container",pa.a.accountSection].join(" ")},c.a.createElement("div",{className:["optionsContainer",pa.a.availableContainer].join(" ")},O.map((function(e,t){var n=Object(h.a)(e,2),a=n[0];n[1];if(a.id&&"facebook"===a.id){var r={render:function(e){return c.a.createElement("div",{key:["entry",t].join(" "),id:a.id,onClick:e.onClick,className:["button","link",pa.a.account,pa.a.inline].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:pa.a.icon}):c.a.cloneElement(a.icon[1],{className:pa.a.icon}),"Link ",a.name||z(a.id),c.a.createElement(E.d,null))}};return c.a.createElement("div",{key:["entry",t].join(" "),id:a.id,onClick:function(){if(a.id&&a.id in B){var e=B[a.id],t=e.href,n=e.setWindow;"function"===typeof t?t():n(window.open(t,"_blank"))}},className:["button","link",pa.a.account,pa.a.inline].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:pa.a.icon}):c.a.cloneElement(a.icon[1],{className:pa.a.icon}),c.a.createElement(ti.a,Object.assign({appId:"3423958477620478",fields:"name,email",scope:"public_profile",cssClass:pa.a.facebookLink,callback:B.facebook.href},r)),c.a.createElement(E.d,null))}return c.a.createElement("div",{key:["entry",t].join(" "),id:a.id,onClick:function(){if(a.id&&a.id in B){var e=B[a.id],t=e.href,n=e.setWindow;"function"===typeof t?t():n(window.open(t,"_blank"))}},className:["button","link",pa.a.account,pa.a.inline].join(" ")},"string"===typeof a.icon[1]?c.a.createElement("img",{src:a.icon[1],alt:a.id,className:pa.a.icon}):c.a.cloneElement(a.icon[1],{className:pa.a.icon}),"Link ",a.name||z(a.id),c.a.createElement(E.d,null))})))):c.a.createElement("section",null))}var ai=n(29),ri=n.n(ai),ii={draw:c.a.createElement(E.a,null),announcement:c.a.createElement(E.j,null)},oi={"/login":"login","/register":"login","/me":"login","/@/":"community","/teams":"teams","/community":"community","/news":"news","/team/":"teams","/player/":"community"};function ci(e){var t=Object(o.useMemo)((function(){return Object(_.a)(Object(j.a)({},"/@/"+e.profile.username,"login"),oi)}),[e.profile.username]),n=Object(o.useContext)(L).isLoggedIn,a=Object(o.useState)(!1),r=Object(h.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)(!0),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(o.useState)([]),v=Object(h.a)(f,2),p=v[0],b=v[1],g=Object(o.useReducer)((function(e){return!e}),!1),y=Object(h.a)(g,2),k=y[0],O=y[1],N=Object(o.useMemo)((function(){return p.filter((function(e){return e&&!e.seen})).length}),[p]);Object(o.useEffect)((function(){document.title=N?"("+N+") "+document.title:"Results | ScorchChess"}),[N]);var C=Object(o.useMemo)((function(){return[{name:c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,"Scorch"),"Results"),className:ri.a.title,mobile:"Home",url:"/",selected:!Object.entries(t).some((function(t){var n=Object(h.a)(t,1)[0];return e.currentPath.startsWith(n)}))},{name:"Teams",icon:E.nb,url:"/teams",selected:"teams"===t[Object.keys(t).find((function(t){return e.currentPath.startsWith(t)}))]},{name:"News",icon:E.O,url:"/news",selected:"news"===t[Object.keys(t).find((function(t){return e.currentPath.startsWith(t)}))]},{name:"About",icon:E.K,url:"https://scorchapp.co.uk",mobileIgnore:!0},{name:c.a.createElement(E.L,null),mobileIgnore:!0,color:"yellow",onClick:Ja,native:!0,show:!1},{name:c.a.createElement(E.E,null),url:"https://facebook.com/scorchchess",mobile:"Facebook",native:!0,color:"#4267B2"},{name:c.a.createElement(E.jb,null),url:"https://twitter.com/scorchchess",mobile:"Twitter",color:"#00aced",native:!0},{name:c.a.createElement(c.a.Fragment,null,c.a.createElement(E.h,null),N?c.a.createElement("div",{className:ri.a.unseen},N):null),onClick:O,native:!0,inactive:!n,mobileIgnore:!0,color:"#43853d"},{name:n?e.profile.username||"PROFILE":"SIGN IN",url:n?"/@/"+e.profile.username:"/login",selected:"login"===t[Object.keys(t).find((function(t){return e.currentPath.startsWith(t)}))],native:!0}]}),[n,e.profile,e.currentPath,t,O,N,Ja]),S=Object(o.useCallback)((function(){window.innerWidth===window.screen.width&&window.innerHeight===window.screen.height?d(!1):d(!0)}),[d]);Object(o.useEffect)((function(){return document.addEventListener("fullscreenchange",S),function(){return document.removeEventListener("fullscreenchange",S)}}),[S]);var x=Object(o.useCallback)((function(e){122===e.keyCode&&(window.innerWidth>window.screen.width-10&&window.innerHeight>window.screen.height-10?d(!1):d(!0))}),[d]);Object(o.useEffect)((function(){return document.addEventListener("keydown",x),function(){return document.removeEventListener("keydown",x)}}),[S,x]);var M=Object(o.useState)(!1),R=Object(h.a)(M,2),P=R[0],B=R[1],T=Object(o.useCallback)((function(){window.scrollY?B(!0):B(!1)}),[B]);return Object(o.useEffect)((function(){return document.addEventListener("scroll",T),function(){return document.removeEventListener("scroll",T)}}),[T]),Object(o.useEffect)((function(){if(e.profile.id){Ee.on("notifs",b),Ee.emit("request_notifs");var t=setInterval((function(){return Ee.emit("request_notifs")}),6e4);return function(){return clearInterval(t)}}}),[b,e.profile.id]),Object(o.useEffect)((function(){Ee.emit("request_notifs")}),[b]),Object(o.useEffect)((function(){var e=function(){return Ee.emit("request_notifs")};return window.addEventListener("focus",e),function(){return window.removeEventListener("focus",e)}}),[]),Object(o.useEffect)((function(){var e=function(){return Ee.emit("request_notifs")};return window.addEventListener("blur",e),function(){return window.removeEventListener("blur",e)}}),[]),m?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:[ri.a.header,!P||ri.a.small].join(" ")},c.a.createElement(Va,{to:"/",className:ri.a.logoWrapper},c.a.createElement("img",{src:"/favicon.png",className:ri.a.logo,alt:"logo"})),Fe()?c.a.createElement("div",{className:ri.a.menuButton,onClick:function(){return l(!i)}},c.a.createElement(E.g,null)):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:ri.a.buttonContainer},c.a.createElement("div",null),C.map((function(e,t){var n;return c.a.createElement(c.a.Fragment,{key:w()("headerLink",t)},c.a.createElement("div",{className:w()(ri.a.headerButton,e.className,(n={},Object(j.a)(n,ri.a.selected,e.selected),Object(j.a)(n,ri.a.inactive,e.inactive),Object(j.a)(n,ri.a.hidden,!1===e.show),n))},c.a.createElement(Va,{className:w()(ri.a.button,Object(j.a)({},ri.a.native,e.native)),onClick:e.onClick,to:e.url},e.icon?c.a.createElement(c.a.Fragment,null,c.a.createElement(e.icon,{className:ri.a.icon}),c.a.createElement("div",{className:w()(Object(j.a)({},ri.a.label,!!e.icon))},e.name)):e.name)),t?null:c.a.createElement("div",null))})),c.a.createElement("div",{className:[ri.a.notifications,"scrollable"].join(" "),style:{opacity:k?1:0,visibility:k?"visible":"hidden"}},c.a.createElement("div",{className:ri.a.inlineNotifTitle},c.a.createElement("strong",null,"Notifications")),c.a.createElement("hr",null),p.length?p.sort((function(e,t){return new Date(t.createdAt).valueOf()-new Date(e.createdAt).valueOf()})).map((function(e,t){return c.a.createElement(Va,{key:["notif",t].join("."),to:e.link,className:[ri.a.inlineNotif,e.seen?"":ri.a.unseenN].join(" "),onClick:function(){return be({url:"/profile/readNotification",data:{id:e.id},noCatch:!0}).then((function(){return Ee.emit("request_notifs")})).then((function(){return O()}))}},ii[e.role]||c.a.createElement("div",null),c.a.createElement("div",{className:[ri.a.inlineNotifContent].join(" ")},c.a.createElement(hn.a,{source:e.content.trim(),escapeHtml:!1,astPlugins:[Ln],renderers:{link:Mn}})),c.a.createElement("div",{className:ri.a.inlineNotifDate},function(e,t){for(var n=["year","month","day","hour","minute","second"],a=[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()],r=[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()],i=0;i<n.length;i++)if(a[i]!==r[i]){var o=r[i]-a[i],c=n[i];return o>=2&&(c+="s"),[o,c,"ago"].join(" ")}}(new Date(e.createdAt),new Date(Date.now()))))})):"You have no new notifications at this time.")))),Fe()?c.a.createElement("div",{className:ri.a.mobileMenu,style:{paddingTop:i?void 0:"0px",maxHeight:i?"100%":"0px"}},C.map((function(e,t){if(e.mobileIgnore)return null;var n=e.mobile||e.name;return"string"===typeof n&&(n=n.toLowerCase()),c.a.createElement(Va,{key:[e,t].join("."),className:ri.a.button,onClick:function(){return l(!1)},to:e.url},n)}))):null):null}var li=n(67),si=n.n(li),ui=n(376);function mi(){return c.a.createElement("footer",{className:si.a.footer,"data-aos":"fade-up","data-aos-offset":5},c.a.createElement("div",{className:si.a.col1},c.a.createElement("div",{onClick:function(){return window.scrollTo({top:0})},className:si.a.logoWrapper},c.a.createElement("img",{src:"/favicon.png",className:si.a.logo,alt:"logo"})),c.a.createElement("div",{onClick:function(){return window.scrollTo({top:0})},className:si.a.text},c.a.createElement("b",null,"Scorch"),"Results"),c.a.createElement("div",{className:si.a.copyright},"ScorchChess ",c.a.createElement(E.x,null)," 2020 All Rights Reserved"),c.a.createElement("div",{className:si.a.version},c.a.createElement("small",null,"Website v.",ui.version))),c.a.createElement("div",{className:si.a.col2},c.a.createElement("div",{className:si.a.shortcuts},c.a.createElement(v.b,{to:"/contact#feedback"},"Feedback"),c.a.createElement(v.b,{to:"/community"},"Community"),c.a.createElement(v.b,{to:"/privacy"},"Privacy"),c.a.createElement(v.b,{to:"/tos"},"Terms of Service"))))}var di=n(377),fi=n.n(di);function hi(){var e=Object(o.useState)([]),t=Object(h.a)(e,2),n=t[0],a=t[1],r=Object(o.useCallback)((function(){return pe({url:"/announcements"}).then(a)}),[a]);return Object(o.useEffect)((function(){r()}),[r]),c.a.createElement("div",{id:"main"},c.a.createElement("div",{className:fi.a.news},c.a.createElement(la,{announcements:n.map((function(e){return Object(_.a)({},e,{createdAt:1e3*new Date(e.createdAt).valueOf(),updatedAt:1e3*new Date(e.updatedAt).valueOf()})}))})))}var vi=n(70),pi=n.n(vi);function bi(){var e=Object(o.useContext)(I),t=Object(o.useContext)(L),n=t.isLoggedIn,a=t.profile,r=ya({profile:{reddit:{name:"/r/scorchchess",username:"scorchchess"},facebook:{name:"/scorchchess",username:"scorchchess"},twitter:{name:"/@/scorchchess",username:"scorchchess"},email:{name:"Aloysius Lip, Founder",username:"aloysius.lip@gmail.com"}},forceFacebook:!0}).links;return c.a.createElement("div",{id:"main"},c.a.createElement("section",{id:"contact"},c.a.createElement("h1",null,"Contact"),c.a.createElement("div",{className:pi.a.content},"ScorchChess Developers are available at the following links:",c.a.createElement("div",{className:pi.a.list},r))),c.a.createElement("section",{id:"feedback"},c.a.createElement("h1",null,"Feedback"),c.a.createElement("div",{className:pi.a.content},"You can go to our ",c.a.createElement(v.b,{to:"https://reddit.com/r/scorchchess"},"subreddit")," and leave a post there to give feedback. Alternatively, fill in the following form:"),n?c.a.createElement("div",{className:pi.a.formContainer},c.a.createElement("form",{className:pi.a.form,method:"POST",action:xe.a.resolve(me,"profile/submitFeedback"),onSubmit:function(t){return ge(t).then((function(n){e({title:"Submitted feedback",message:c.a.createElement(c.a.Fragment,null,"Thanks for submitting feedback, it's much appreciated! View your post here: ",c.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n))}),t.target.reset()}))}},c.a.createElement("fieldset",{className:pi.a.fieldSet},c.a.createElement("legend",null,"Your feedback"),c.a.createElement("input",{name:"title",type:"text",required:!0,placeholder:"Your title",maxLength:a?300-"[".concat(a.username,"]: ").length:300}),c.a.createElement("select",{name:"type",id:"type"},c.a.createElement("option",{value:"suggestion"},"Suggestion"),c.a.createElement("option",{value:"bug"},"Bug"),c.a.createElement("option",{value:"other"},"Other")),c.a.createElement("textarea",{name:"content",className:pi.a.textArea,placeholder:"Your text",required:!0,maxLength:4e4}),c.a.createElement("input",{className:w()(pi.a.submit,"button"),type:"submit",value:"Submit"})))):c.a.createElement(v.b,{to:"/login"},"Log in or register to send feedback")))}var gi=n(35),Ei=n.n(gi);function _i(){var e=Object(o.useReducer)((function(e){return!e}),!1),t=Object(h.a)(e,2),n=t[0],a=t[1];return c.a.createElement("div",{className:w()(Ei.a.floated,Ei.a.bottom,Ei.a.left)},c.a.createElement("div",{className:Ei.a.dotExpando,onClick:a},c.a.createElement(E.w,null)),c.a.createElement("div",{className:Ei.a.wrapper,style:{maxWidth:n?void 0:"0px"}},c.a.createElement(v.b,{className:Ei.a.link,to:"/contact#feedback"},"Like the new design? Leave feedback here"),c.a.createElement("div",{className:w()(Ei.a.expando),onClick:a},"Not now")))}function ji(){var e=Object(o.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],r=Object(o.useCallback)(Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.search.includes("refresh")){e.next=4;break}return e.next=3,ve.remove("linkHidden").catch((function(){}));case 3:a(!1);case 4:return e.next=6,ve.get("linkHidden").catch((function(){}));case 6:(t=e.sent)&&!isNaN(Number(t))||a(!1),Date.now()-Number(t)<432e5&&a(!0);case 9:case"end":return e.stop()}}),e)}))),[a]);Object(o.useEffect)((function(){r()}),[r]);var i=Object(o.useCallback)(function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ve.set("linkHidden",Date.now()).catch((function(){}));case 3:a(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),l=Object(o.useContext)(L),s=l.isLoggedIn,u=l.profile,m=Object(o.useState)(void 0),p=Object(h.a)(m,2),b=p[0],g=p[1],_=Object(o.useCallback)(Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&u.username){e.next=2;break}return e.abrupt("return");case 2:if(De.test(u.username)){e.next=4;break}return e.abrupt("return",g(null));case 4:pe({url:"/user/"+u.username,params:{fetchGameLinks:!0}}).then(g);case 5:case"end":return e.stop()}}),e)}))),[g,u]);Object(o.useEffect)((function(){s&&_()}),[_,s]);var j=Object(o.useMemo)((function(){return b?b.teams.map((function(e){return e.gameLinks.map((function(t){return Object.assign({},t,{team:e.name})}))})).flat():[]}),[b]),y=Object(o.useState)(0),k=Object(h.a)(y,2),O=k[0],N=k[1],C=Object(o.useMemo)((function(){return void 0===O?null:j[O]}),[j,O]),S=Object(o.useState)(!0),x=Object(h.a)(S,2),M=(x[0],x[1]),R=Object(o.useContext)(I),P=Object(o.useCallback)((function(e){e.preventDefault(),M(!0);for(var t=e.target;t.parentElement&&"HTMLFormElement"!==t.constructor.name;)t=t.parentElement;var n=t.link,a=null===n||void 0===n?void 0:n.value.trim();if(a)return"chessCom"!==(null===C||void 0===C?void 0:C.source)||Pe.test(a)?void ge(e).then((function(){return g(void 0)})).then(_).finally((function(){return M(!1)})):(M(!1),void R({title:"Link error",message:"Link does not match format for a chess.com link",type:"error"}));M(!1)}),[_,C,M,R]),B=Object(o.useMemo)((function(){return"chessCom"===(null===C||void 0===C?void 0:C.source)?"Ex: https://chess.com/live#tm=xxxxx":""}),[C]),T=Object(o.useMemo)((function(){for(var e=[],t=function(t){t===O?e.push(c.a.createElement(E.r,{key:w()("circle",t),className:w()(Ei.a.dot),onClick:function(){return N(void 0)}})):e.push(c.a.createElement(E.V,{key:w()("circle",t),className:w()(Ei.a.dot),onClick:function(){return N(t)}}))},n=0;n<j.length;n++)t(n);return e}),[j,O]);return u&&j.length?n?null:c.a.createElement("div",{className:w()(Ei.a.top,Ei.a.right,Ei.a.container),"data-aos":"fade-left"},c.a.createElement("div",{className:w()(Ei.a.linkSwitcher)},T),C?c.a.createElement("div",{className:w()("container"),"data-aos":"fade-left"},c.a.createElement("div",{className:Ei.a.title},"You have one link from ",c.a.createElement("b",null,C.name)," waiting for team ",c.a.createElement("b",null,C.team)),c.a.createElement("form",{className:Ei.a.formWrapper,method:"POST",action:xe.a.resolve(me,"submit/gameLink"),onSubmit:P},c.a.createElement("div",{className:Ei.a.input},c.a.createElement("input",{type:"hidden",name:"id",value:C.id}),c.a.createElement("input",{type:"hidden",name:"tournamentId",value:C.tournamentId}),c.a.createElement("input",{type:"text",name:"link",placeholder:B})),c.a.createElement("div",{className:Ei.a.buttons},c.a.createElement("button",{className:"button",onClick:i},"Later"),c.a.createElement(v.b,{className:w()("button",Ei.a.viewTournament),to:"/t/"+C.tournamentId},c.a.createElement(E.D,null)),c.a.createElement("button",{className:"button"},"Submit")))):null):null}var yi=n(153),ki=n.n(yi);function wi(e){var t=Object(o.useRef)(),n=Object(o.useReducer)((function(e){return e+1}),0),a=Object(h.a)(n,2),r=a[0],i=a[1],l=Object(o.useState)([]),s=Object(h.a)(l,2),u=s[0],m=s[1],d=Object(o.useMemo)((function(){var t=e.search.get("iteration");return t&&isNaN(parseInt(t))?parseInt(t):0}),[e.search]),f=Object(o.useMemo)((function(){return u[d]}),[u,d]),v=Object(o.useState)({}),p=Object(h.a)(v,2),b=p[0],g=p[1];Object(o.useEffect)((function(){if(f){var e=function(){return g(f.getBoundingClientRect())};e();for(var t=[],n=0;n<10;n++)t.push(setTimeout(e,500*n));return function(){var e,n=Object(y.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;clearTimeout(a)}}catch(r){n.e(r)}finally{n.f()}}}}),[f]);var E=Object(o.useMemo)((function(){var t=e.search.get("width");return t?parseInt(t)/b.width:1}),[e.search,b]),_=Object(o.useCallback)((function(){var t='[data-embed-id="'.concat(e.search.get("embed"),'"]'),n=document.querySelectorAll(t);m(Array.from(n))}),[e.search]);return Object(o.useEffect)((function(){if(!u.length&&!(r>10)){var e=function(){_(),i()};r||e();var t=setTimeout(e,1e3);return function(){return clearTimeout(t)}}}),[u,_,i,r]),Object(o.useEffect)((function(){t.current&&f&&t.current.appendChild(f)}),[t,f]),c.a.createElement("div",{className:w()(ki.a.cover,"scrollable")},c.a.createElement("div",{className:ki.a.canvas,ref:t,style:{height:b.height,width:b.width,transform:"scale(".concat(E,")")}},c.a.createElement("a",{className:ki.a.brand,href:window.location.href.replace("?"+window.location.search,""),target:"_blank",rel:"noopener noreferrer"},c.a.createElement("img",{src:"/images/brand.png"}))))}g.a.init();var Oi=Date.now(),Ni=["/","pairings","standings","stats","tv","community","team","player","@","login"];function Ci(e){var t,n=function(e){for(var t=0;t<Ni.length;t++)if(Ni[t]===e)return t;for(var n=Ni.length;n>0;n--)if(e.includes(Ni[n]))return n;return.5}(e);t=.5===n?"home":.5===n?"tournament":Ni[n],Ee.connected&&Ee.emit("public_page",{section:t,tournament:n>0&&n<5?e.split("/")[1]:e.split("/")[2],time:(Date.now()-Oi)/6e4,mobile:Fe()}),Oi=Date.now()}function Si(e,t){var n="";var a=[e,t].map((function(e){return Number(e.split("/").pop())})),r=Object(h.a)(a,2),i=r[0],o=r[1];return i&&o&&!isNaN(i)&&!isNaN(o)&&(o>i?n="right":i>o&&(n="left")),n}var xi={direction:"",referrer:"",currentPath:""};var Li=function(){var e=Object(o.useState)({}),t=Object(h.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)({}),i=Object(h.a)(r,2),l=i[0],s=i[1],m=Object(o.useState)(void 0),b=Object(h.a)(m,2),g=b[0],_=b[1],j=Object(o.useMemo)((function(){return void 0===g?void 0:!!g}),[g]),y=Object(o.useCallback)(Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be({url:"/endSession"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.prev=8,e.next=11,ve.remove("sessionID");case 11:return _(""),e.finish(8);case 13:case"end":return e.stop()}}),e,null,[[0,5,8,13]])}))),[_]),k=Object(o.useCallback)((function(){var e=document.getElementById("root");e&&(Ya()||l.backgroundURL?e.classList.add("dark"):e.classList.remove("dark"),l.backgroundURL?e.style.backgroundImage="url(".concat(l.backgroundURL,")"):e.style.backgroundImage="")}),[l]);Object(o.useEffect)((function(){return window.addEventListener("theme",k),function(){return window.removeEventListener("theme",k)}}),[k]);var w=Object(o.useCallback)((function(){return pe({url:"/profile",timeout:5e3}).then(s).catch(function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(404!==(null===(n=t.response)||void 0===n?void 0:n.status)){e.next=4;break}y(),e.next=6;break;case 4:return e.next=6,ve.remove("sessionID");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[s,y]),O=Object(o.useCallback)(Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getAll();case 2:if(t=e.sent,n=t.sessionID){e.next=6;break}throw t;case 6:_(n);case 7:case"end":return e.stop()}}),e)}))),[_]);Object(o.useEffect)((function(){O().catch((function(){return _("")}))}),[O]),Object(o.useEffect)((function(){var e;e=g,Ee.close(),Ee=se()(me,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:1e5,reconnectionAttempts:5,query:{sessionID:e}})}),[g]),Object(o.useEffect)((function(){g&&w().catch(console.error)}),[g,w]);var N=Object(o.useState)({title:"",message:""}),C=Object(h.a)(N,2),x=C[0],M=C[1];return Object(o.useEffect)((function(){ue=function(e,t){M({icon:c.a.createElement(E.C,null),title:e,message:"string"===typeof t?t.startsWith("<!DOCTYPE html>")?c.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}):t:JSON.stringify(t,null,4),type:"error"})}}),[M]),c.a.createElement(c.a.Fragment,null,c.a.createElement(v.a,{basename:""},c.a.createElement(S,{values:[[I,M],[L,{isLoggedIn:j,profile:l,updateProfile:w}],[A,a]]},c.a.createElement(p.b,{render:function(e){var t,n=e.location;e.history;xi.currentPath.split("?").shift()!==n.pathname&&(xi=Object.assign(xi||{},{direction:Si(xi.currentPath||n.pathname+n.search,n.pathname+n.search)||xi.direction,referrer:xi.currentPath||n.pathname+n.search,currentPath:n.pathname+n.search})||{}),n.state=xi,Ci(xi.referrer);var a=new URLSearchParams(n.search);return c.a.createElement(S,{values:[[R,n]]},a.get("embed")?c.a.createElement(wi,{search:a}):null,c.a.createElement(ci,{setID:function(){},profile:l,referrer:null===(t=xi)||void 0===t?void 0:t.referrer,currentPath:n.pathname}),c.a.createElement(p.d,{location:n},c.a.createElement(p.b,{exact:!0,path:"/",render:function(e){return c.a.createElement(fr,e)}}),c.a.createElement(p.b,{exact:!0,path:"/teams",component:Cr}),c.a.createElement(p.b,{exact:!0,path:"/news",component:hi}),c.a.createElement(p.b,{exact:!0,path:"/contact",component:bi}),c.a.createElement(p.b,{exact:!0,path:"/community",render:function(e){return c.a.createElement(br,e)}}),c.a.createElement(p.b,{path:"/me/",render:function(e){return!1===j?c.a.createElement(p.a,{to:{pathname:"/login",search:e.location.search,state:e.history.location.state}}):l.username?c.a.createElement(p.a,{push:!0,to:{pathname:e.location.pathname.replace("/me","/@/"+l.username),search:e.location.search,state:e.history.location.state}}):null}}),c.a.createElement(p.b,{path:"/@/:id",render:function(e){return c.a.createElement(Ur,Object.assign({},e,{id:e.match.params.id,profile:l,updateProfile:w,endSession:y}))}}),c.a.createElement(p.b,{path:"/reset/password",render:function(e){return c.a.createElement(tn,Object.assign({},e,{isLoggedIn:j,mode:"reset/password",setSession:_,updateProfile:w}))}}),c.a.createElement(p.b,{path:"/login",render:function(e){var t=xi.referrer.split("?"),n=Object(h.a)(t,2),a=n[0],r=n[1];return j?c.a.createElement(p.a,{push:!0,to:{pathname:"/login"===a?"/me":a,search:r,state:e.history.location.state}}):c.a.createElement(tn,Object.assign({},e,{isLoggedIn:j,mode:"login",setSession:_,updateProfile:w}))}}),c.a.createElement(p.b,{path:"/register",render:function(e){var t=xi.referrer.split("?"),n=Object(h.a)(t,2),a=n[0],r=n[1];return j?c.a.createElement(p.a,{push:!0,to:{pathname:"/register"===a?"/me":a,search:r,state:e.history.location.state}}):c.a.createElement(tn,Object.assign({},e,{isLoggedIn:j,mode:"register",setSession:_,updateProfile:w}))}}),c.a.createElement(p.b,{path:"/player/:id/",render:function(e){return c.a.createElement(Jr,Object.assign({},e,{id:e.match.params.id,profile:l,type:"player"}))}}),c.a.createElement(p.b,{path:"/team/:id/",render:function(e){return c.a.createElement(Jr,Object.assign({},e,{id:e.match.params.id,profile:l,type:"team"}))}}),c.a.createElement(p.b,{path:"/g/:id",render:function(e){return c.a.createElement(_r,e)}}),c.a.createElement(p.b,{path:"/t/:id/",render:function(e){return c.a.createElement(cr,Object.assign({},e,{profile:l}))}}),c.a.createElement(p.b,{path:"/tournament/:id/",render:function(e){var t=xi.referrer.split("?"),n=Object(h.a)(t,2),a=n[0],r=n[1];return c.a.createElement(p.a,{push:!0,to:{pathname:"/t/"+a.slice("/tournament/".length),search:r,state:e.history.location.state}})}}),["privacy","tos"].map((function(e,t){return c.a.createElement(p.b,{exact:!0,path:"/"+e,key:[e,t].join("."),render:function(){return c.a.createElement(jr,{page:e})}})})),c.a.createElement(p.b,{path:"/:id/",render:function(e){return[].concat(Object(u.a)(Object.keys(oi).map((function(e){return e.split("/")[1]}))),["tournament"]).includes(e.match.params.id)?c.a.createElement(p.b,{path:"*",component:je,status:404}):c.a.createElement(p.a,{push:!0,to:{pathname:"/t"+e.location.pathname,search:xi.referrer.split("?")[1],state:e.history.location.state}})}}),c.a.createElement(p.b,{path:"*",component:je,status:404})),c.a.createElement(mi,null))}}),c.a.createElement(_i,null),c.a.createElement(ji,null),c.a.createElement(ia,x),c.a.createElement(oa,{notif:n,select:a}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Li,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){e.exports={container:"community_container__2qOrW",userTable:"community_userTable__NudmB",status:"community_status__3r8a4",online:"community_online__31t3x",profile:"community_profile__3bNmQ",title:"community_title__26thm"}},94:function(e,t,n){e.exports={container:"dropdown_container__1hKRx",header:"dropdown_header__1BLxu",sent:"dropdown_sent__1kGzj",wrapper:"dropdown_wrapper__1ecPY",list:"dropdown_list__3lWIJ"}}},[[386,1,2]]]);
//# sourceMappingURL=main.5370e60d.chunk.js.map